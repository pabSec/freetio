{
  "{\"filename\":\"/root/gulpfile.babel.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "del",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "del"
              }
            ]
          },
          {
            "source": "gulp",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "gulp"
              }
            ]
          },
          {
            "source": "grunt",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "grunt"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "through2",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "through2"
              }
            ]
          },
          {
            "source": "gulp-load-plugins",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "gulpLoadPlugins"
              }
            ]
          },
          {
            "source": "http",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "http"
              }
            ]
          },
          {
            "source": "open",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "open"
              }
            ]
          },
          {
            "source": "lazypipe",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "lazypipe"
              }
            ]
          },
          {
            "source": "nodemon",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodemon"
              }
            ]
          },
          {
            "source": "karma",
            "imported": [
              "Server"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Server",
                "local": "KarmaServer"
              }
            ]
          },
          {
            "source": "run-sequence",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "runSequence"
              }
            ]
          },
          {
            "source": "gulp-protractor",
            "imported": [
              "protractor",
              "webdriver_update"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "protractor",
                "local": "protractor"
              },
              {
                "kind": "named",
                "imported": "webdriver_update",
                "local": "webdriver_update"
              }
            ]
          },
          {
            "source": "isparta",
            "imported": [
              "Instrumenter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Instrumenter",
                "local": "Instrumenter"
              }
            ]
          },
          {
            "source": "webpack-stream",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "webpack"
              }
            ]
          },
          {
            "source": "./webpack.make",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "makeWebpackConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/gulpfile.babel.js",
      "filenameRelative": "/root/gulpfile.babel.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "gulpfile.babel.js",
      "sourceFileName": "gulpfile.babel.js",
      "sourceRoot": "/root",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "gulpfile.babel"
    },
    "ignored": false,
    "code": "// Generated on 2017-10-12 using generator-angular-fullstack 4.2.2\n'use strict';\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _del = require('del');\n\nvar _del2 = _interopRequireDefault(_del);\n\nvar _gulp = require('gulp');\n\nvar _gulp2 = _interopRequireDefault(_gulp);\n\nvar _grunt = require('grunt');\n\nvar _grunt2 = _interopRequireDefault(_grunt);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _through = require('through2');\n\nvar _through2 = _interopRequireDefault(_through);\n\nvar _gulpLoadPlugins = require('gulp-load-plugins');\n\nvar _gulpLoadPlugins2 = _interopRequireDefault(_gulpLoadPlugins);\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _open = require('open');\n\nvar _open2 = _interopRequireDefault(_open);\n\nvar _lazypipe = require('lazypipe');\n\nvar _lazypipe2 = _interopRequireDefault(_lazypipe);\n\nvar _nodemon = require('nodemon');\n\nvar _nodemon2 = _interopRequireDefault(_nodemon);\n\nvar _karma = require('karma');\n\nvar _runSequence = require('run-sequence');\n\nvar _runSequence2 = _interopRequireDefault(_runSequence);\n\nvar _gulpProtractor = require('gulp-protractor');\n\nvar _isparta = require('isparta');\n\nvar _webpackStream = require('webpack-stream');\n\nvar _webpackStream2 = _interopRequireDefault(_webpackStream);\n\nvar _webpack = require('./webpack.make');\n\nvar _webpack2 = _interopRequireDefault(_webpack);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar plugins = (0, _gulpLoadPlugins2.default)();\nvar config;\n\nvar clientPath = 'client';\nvar serverPath = 'server';\nvar paths = {\n    client: {\n        assets: clientPath + '/assets/**/*',\n        images: clientPath + '/assets/images/**/*',\n        revManifest: clientPath + '/assets/rev-manifest.json',\n        scripts: [clientPath + '/**/!(*.spec|*.mock).ts', '!' + clientPath + '/{typings,test_typings}/**/*'],\n        styles: [clientPath + '/{app,components}/**/*.scss'],\n        mainStyle: clientPath + '/app/app.scss',\n        views: clientPath + '/{app,components}/**/*.html',\n        mainView: clientPath + '/index.html',\n        test: [clientPath + '/{app,components}/**/*.{spec,mock}.ts'],\n        e2e: ['e2e/**/*.spec.js']\n    },\n    server: {\n        scripts: [serverPath + '/**/!(*.spec|*.integration).js', '!' + serverPath + '/config/local.env.sample.js'],\n        json: [serverPath + '/**/*.json'],\n        test: {\n            integration: [serverPath + '/**/*.integration.js', 'mocha.global.js'],\n            unit: [serverPath + '/**/*.spec.js', 'mocha.global.js']\n        }\n    },\n    karma: 'karma.conf.js',\n    dist: 'dist'\n};\n\n/********************\n * Helper functions\n ********************/\n\nfunction onServerLog(log) {\n    console.log(plugins.util.colors.white('[') + plugins.util.colors.yellow('nodemon') + plugins.util.colors.white('] ') + log.message);\n}\n\nfunction checkAppReady(cb) {\n    var options = {\n        host: 'localhost',\n        port: config.port\n    };\n    _http2.default.get(options, function () {\n        return cb(true);\n    }).on('error', function () {\n        return cb(false);\n    });\n}\n\n// Call page until first success\nfunction whenServerReady(cb) {\n    var serverReady = false;\n    var appReadyInterval = setInterval(function () {\n        return checkAppReady(function (ready) {\n            if (!ready || serverReady) {\n                return;\n            }\n            clearInterval(appReadyInterval);\n            serverReady = true;\n            cb();\n        });\n    }, 100);\n}\n\n/********************\n * Reusable pipelines\n ********************/\n\nvar lintClientScripts = (0, _lazypipe2.default)().pipe(plugins.tslint, require('./' + clientPath + '/tslint.json')).pipe(plugins.tslint.report, 'verbose', { emitError: false });\n\nvar lintClientTestScripts = (0, _lazypipe2.default)().pipe(plugins.tslint, require('./' + clientPath + '/tslint.json')).pipe(plugins.tslint.report, 'verbose', { emitError: false });\n\nvar lintServerScripts = (0, _lazypipe2.default)().pipe(plugins.eslint, serverPath + '/.eslintrc').pipe(plugins.eslint.format);\n\nvar lintServerTestScripts = (0, _lazypipe2.default)().pipe(plugins.eslint, {\n    configFile: serverPath + '/.eslintrc',\n    envs: ['node', 'es6', 'mocha']\n}).pipe(plugins.eslint.format);\n\nvar transpileServer = (0, _lazypipe2.default)().pipe(plugins.sourcemaps.init).pipe(plugins.babel, {\n    plugins: ['transform-class-properties', 'transform-runtime']\n}).pipe(plugins.sourcemaps.write, '.');\n\nvar mocha = (0, _lazypipe2.default)().pipe(plugins.mocha, {\n    reporter: 'spec',\n    timeout: 5000,\n    require: ['./mocha.conf']\n});\n\nvar istanbul = (0, _lazypipe2.default)().pipe(plugins.istanbul.writeReports).pipe(plugins.istanbulEnforcer, {\n    thresholds: {\n        global: {\n            lines: 80,\n            statements: 80,\n            branches: 80,\n            functions: 80\n        }\n    },\n    coverageDirectory: './coverage',\n    rootDirectory: ''\n});\n\n/********************\n * Env\n ********************/\n\n_gulp2.default.task('env:all', function () {\n    var localConfig = void 0;\n    try {\n        localConfig = require('./' + serverPath + '/config/local.env');\n    } catch (e) {\n        localConfig = {};\n    }\n    plugins.env({\n        vars: localConfig\n    });\n});\n_gulp2.default.task('env:test', function () {\n    plugins.env({\n        vars: { NODE_ENV: 'test' }\n    });\n});\n_gulp2.default.task('env:prod', function () {\n    plugins.env({\n        vars: { NODE_ENV: 'production' }\n    });\n});\n\n/********************\n * Tasks\n ********************/\n\n_gulp2.default.task('inject', function (cb) {\n    (0, _runSequence2.default)(['inject:scss'], cb);\n});\n\n_gulp2.default.task('inject:scss', function () {\n    return _gulp2.default.src(paths.client.mainStyle).pipe(plugins.inject(_gulp2.default.src(_lodash2.default.union(paths.client.styles, ['!' + paths.client.mainStyle]), { read: false }).pipe(plugins.sort()), {\n        transform: function transform(filepath) {\n            var newPath = filepath.replace('/' + clientPath + '/app/', '').replace('/' + clientPath + '/components/', '../components/').replace(/_(.*).scss/, function (match, p1, offset, string) {\n                return p1;\n            }).replace('.scss', '');\n            return '@import \\'' + newPath + '\\';';\n        }\n    })).pipe(_gulp2.default.dest(clientPath + '/app'));\n});\n\n_gulp2.default.task('webpack:dev', function () {\n    var webpackDevConfig = (0, _webpack2.default)({ DEV: true });\n    return _gulp2.default.src(webpackDevConfig.entry.app).pipe(plugins.plumber()).pipe((0, _webpackStream2.default)(webpackDevConfig)).pipe(_gulp2.default.dest('.tmp'));\n});\n\n_gulp2.default.task('webpack:dist', function () {\n    var _this = this;\n\n    var webpackDistConfig = (0, _webpack2.default)({ BUILD: true });\n    return _gulp2.default.src(webpackDistConfig.entry.app).pipe((0, _webpackStream2.default)(webpackDistConfig)).on('error', function (err) {\n        _this.emit('end'); // Recover from errors\n    }).pipe(_gulp2.default.dest(paths.dist + '/client'));\n});\n\n_gulp2.default.task('webpack:test', function () {\n    var webpackTestConfig = (0, _webpack2.default)({ TEST: true });\n    return _gulp2.default.src(webpackTestConfig.entry.app).pipe((0, _webpackStream2.default)(webpackTestConfig)).pipe(_gulp2.default.dest('.tmp'));\n});\n\n_gulp2.default.task('webpack:e2e', function () {\n    var webpackE2eConfig = (0, _webpack2.default)({ E2E: true });\n    return _gulp2.default.src(webpackE2eConfig.entry.app).pipe((0, _webpackStream2.default)(webpackE2eConfig)).pipe(_gulp2.default.dest('.tmp'));\n});\n\n// Install DefinitelyTyped TypeScript definition files\n_gulp2.default.task('typings', function () {\n    return _gulp2.default.src(\"./typings.json\").pipe(plugins.typings());\n});\n\n_gulp2.default.task('styles', function () {\n    return _gulp2.default.src(paths.client.mainStyle).pipe(styles()).pipe(_gulp2.default.dest('.tmp/app'));\n});\n\n_gulp2.default.task('transpile:server', function () {\n    return _gulp2.default.src(_lodash2.default.union(paths.server.scripts, paths.server.json)).pipe(transpileServer()).pipe(_gulp2.default.dest(paths.dist + '/' + serverPath));\n});\n\n_gulp2.default.task('lint:scripts', function (cb) {\n    return (0, _runSequence2.default)(['lint:scripts:client', 'lint:scripts:server'], cb);\n});\n\n_gulp2.default.task('lint:scripts:client', function () {\n    return _gulp2.default.src(_lodash2.default.union(paths.client.scripts, _lodash2.default.map(paths.client.test, function (blob) {\n        return '!' + blob;\n    }))).pipe(lintClientScripts());\n});\n\n_gulp2.default.task('lint:scripts:server', function () {\n    return _gulp2.default.src(_lodash2.default.union(paths.server.scripts, _lodash2.default.map(paths.server.test, function (blob) {\n        return '!' + blob;\n    }))).pipe(lintServerScripts());\n});\n\n_gulp2.default.task('lint:scripts:clientTest', function () {\n    return _gulp2.default.src(paths.client.test).pipe(lintClientScripts());\n});\n\n_gulp2.default.task('lint:scripts:serverTest', function () {\n    return _gulp2.default.src(paths.server.test).pipe(lintServerTestScripts());\n});\n\n_gulp2.default.task('jscs', function () {\n    return _gulp2.default.src(_lodash2.default.union(paths.client.scripts, paths.server.scripts)).pipe(plugins.jscs()).pipe(plugins.jscs.reporter());\n});\n\n_gulp2.default.task('clean:tmp', function () {\n    return (0, _del2.default)(['.tmp/**/*'], { dot: true });\n});\n\n_gulp2.default.task('start:client', function (cb) {\n    whenServerReady(function () {\n        (0, _open2.default)('http://localhost:' + config.browserSyncPort);\n        cb();\n    });\n});\n\n_gulp2.default.task('start:server', function () {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'development';\n    config = require('./' + serverPath + '/config/environment');\n    (0, _nodemon2.default)('-w ' + serverPath + ' ' + serverPath).on('log', onServerLog);\n});\n\n_gulp2.default.task('start:server:prod', function () {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'production';\n    config = require('./' + paths.dist + '/' + serverPath + '/config/environment');\n    (0, _nodemon2.default)('-w ' + paths.dist + '/' + serverPath + ' ' + paths.dist + '/' + serverPath).on('log', onServerLog);\n});\n\n_gulp2.default.task('start:server:debug', function () {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'development';\n    config = require('./' + serverPath + '/config/environment');\n    // nodemon(`-w ${serverPath} --debug=5858 --debug-brk ${serverPath}`)\n    (0, _nodemon2.default)('-w ' + serverPath + ' --inspect --debug-brk ' + serverPath).on('log', onServerLog);\n});\n\n_gulp2.default.task('watch', function () {\n    var testFiles = _lodash2.default.union(paths.client.test, paths.server.test.unit, paths.server.test.integration);\n\n    plugins.watch(_lodash2.default.union(paths.server.scripts, testFiles)).pipe(plugins.plumber()).pipe(lintServerScripts());\n\n    plugins.watch(_lodash2.default.union(paths.server.test.unit, paths.server.test.integration)).pipe(plugins.plumber()).pipe(lintServerTestScripts());\n});\n\n_gulp2.default.task('serve', function (cb) {\n    (0, _runSequence2.default)(['clean:tmp', 'lint:scripts', 'inject', 'copy:fonts:dev', 'env:all', 'typings'],\n    // 'webpack:dev',\n    ['start:server', 'start:client'], 'watch', cb);\n});\n\n_gulp2.default.task('serve:debug', function (cb) {\n    (0, _runSequence2.default)(['clean:tmp', 'lint:scripts', 'inject', 'copy:fonts:dev', 'env:all', 'typings'], 'webpack:dev', ['start:server:debug', 'start:client'], 'watch', cb);\n});\n\n_gulp2.default.task('serve:dist', function (cb) {\n    (0, _runSequence2.default)('build', 'env:all', 'env:prod', ['start:server:prod', 'start:client'], cb);\n});\n\n_gulp2.default.task('test', function (cb) {\n    return (0, _runSequence2.default)('test:server', 'test:client', cb);\n});\n\n_gulp2.default.task('test:server', function (cb) {\n    (0, _runSequence2.default)('env:all', 'env:test', 'mocha:unit', 'mocha:integration', cb);\n});\n\n_gulp2.default.task('mocha:unit', function () {\n    return _gulp2.default.src(paths.server.test.unit).pipe(mocha());\n});\n\n_gulp2.default.task('mocha:integration', function () {\n    return _gulp2.default.src(paths.server.test.integration).pipe(mocha());\n});\n\n_gulp2.default.task('test:server:coverage', function (cb) {\n    (0, _runSequence2.default)('coverage:pre', 'env:all', 'env:test', 'coverage:unit', 'coverage:integration', cb);\n});\n\n_gulp2.default.task('coverage:pre', function () {\n    return _gulp2.default.src(paths.server.scripts)\n    // Covering files\n    .pipe(plugins.istanbul({\n        instrumenter: _isparta.Instrumenter, // Use the isparta instrumenter (code coverage for ES6)\n        includeUntested: true\n    }))\n    // Force `require` to return covered files\n    .pipe(plugins.istanbul.hookRequire());\n});\n\n_gulp2.default.task('coverage:unit', function () {\n    return _gulp2.default.src(paths.server.test.unit).pipe(mocha()).pipe(istanbul());\n    // Creating the reports after tests ran\n});\n\n_gulp2.default.task('coverage:integration', function () {\n    return _gulp2.default.src(paths.server.test.integration).pipe(mocha()).pipe(istanbul());\n    // Creating the reports after tests ran\n});\n\n// Downloads the selenium webdriver\n_gulp2.default.task('webdriver_update', _gulpProtractor.webdriver_update);\n\n_gulp2.default.task('test:e2e', ['webpack:e2e', 'env:all', 'env:test', 'start:server', 'webdriver_update'], function (cb) {\n    _gulp2.default.src(paths.client.e2e).pipe((0, _gulpProtractor.protractor)({\n        configFile: 'protractor.conf.js'\n    })).on('error', function (e) {\n        throw e;\n    }).on('end', function () {\n        process.exit();\n    });\n});\n\n_gulp2.default.task('test:client', function (done) {\n    new _karma.Server({\n        configFile: __dirname + '/' + paths.karma,\n        singleRun: true\n    }, function (err) {\n        done(err);\n        process.exit(err);\n    }).start();\n});\n\n/********************\n * Build\n ********************/\n\n_gulp2.default.task('build', function (cb) {\n    (0, _runSequence2.default)(['clean:dist', 'clean:tmp'], 'inject', 'transpile:server', ['build:images', 'typings'], ['copy:extras', 'copy:assets', 'copy:fonts:dist', 'copy:server', 'webpack:dist'], 'revReplaceWebpack', cb);\n});\n\n_gulp2.default.task('clean:dist', function () {\n    return (0, _del2.default)([paths.dist + '/!(.git*|.openshift|Procfile)**'], { dot: true });\n});\n\n_gulp2.default.task('build:images', function () {\n    return _gulp2.default.src(paths.client.images).pipe(plugins.imagemin([plugins.imagemin.optipng({ optimizationLevel: 5 }), plugins.imagemin.jpegtran({ progressive: true }), plugins.imagemin.gifsicle({ interlaced: true }), plugins.imagemin.svgo({ plugins: [{ removeViewBox: false }] })])).pipe(plugins.rev()).pipe(_gulp2.default.dest(paths.dist + '/' + clientPath + '/assets/images')).pipe(plugins.rev.manifest(paths.dist + '/' + paths.client.revManifest, {\n        base: paths.dist + '/' + clientPath + '/assets',\n        merge: true\n    })).pipe(_gulp2.default.dest(paths.dist + '/' + clientPath + '/assets'));\n});\n\n_gulp2.default.task('revReplaceWebpack', function () {\n    return _gulp2.default.src('dist/client/app.*.js').pipe(plugins.revReplace({ manifest: _gulp2.default.src(paths.dist + '/' + paths.client.revManifest) })).pipe(_gulp2.default.dest('dist/client'));\n});\n\n_gulp2.default.task('copy:extras', function () {\n    return _gulp2.default.src([clientPath + '/favicon.ico', clientPath + '/robots.txt', clientPath + '/.htaccess'], { dot: true }).pipe(_gulp2.default.dest(paths.dist + '/' + clientPath));\n});\n\n/**\n * turns 'bootstrap/fonts/font.woff' into 'bootstrap/font.woff'\n */\nfunction flatten() {\n    return _through2.default.obj(function (file, enc, next) {\n        if (!file.isDirectory()) {\n            try {\n                var dir = _path2.default.dirname(file.relative).split(_path2.default.sep)[0];\n                var fileName = _path2.default.normalize(_path2.default.basename(file.path));\n                file.path = _path2.default.join(file.base, _path2.default.join(dir, fileName));\n                this.push(file);\n            } catch (e) {\n                this.emit('error', new Error(e));\n            }\n        }\n        next();\n    });\n}\n_gulp2.default.task('copy:fonts:dev', function () {\n    return _gulp2.default.src('node_modules/{bootstrap,font-awesome}/fonts/*').pipe(flatten()).pipe(_gulp2.default.dest(clientPath + '/assets/fonts'));\n});\n_gulp2.default.task('copy:fonts:dist', function () {\n    return _gulp2.default.src('node_modules/{bootstrap,font-awesome}/fonts/*').pipe(flatten()).pipe(_gulp2.default.dest(paths.dist + '/' + clientPath + '/assets/fonts'));\n});\n\n_gulp2.default.task('copy:assets', function () {\n    return _gulp2.default.src([paths.client.assets, '!' + paths.client.images]).pipe(_gulp2.default.dest(paths.dist + '/' + clientPath + '/assets'));\n});\n\n_gulp2.default.task('copy:server', function () {\n    return _gulp2.default.src(['package.json'], { cwdbase: true }).pipe(_gulp2.default.dest(paths.dist));\n});\n\n/********************\n * Grunt ported tasks\n ********************/\n\n_grunt2.default.initConfig({\n    buildcontrol: {\n        options: {\n            dir: paths.dist,\n            commit: true,\n            push: true,\n            connectCommits: false,\n            message: 'Built %sourceName% from commit %sourceCommit% on branch %sourceBranch%'\n        },\n        heroku: {\n            options: {\n                remote: 'heroku',\n                branch: 'master'\n            }\n        },\n        openshift: {\n            options: {\n                remote: 'openshift',\n                branch: 'master'\n            }\n        }\n    }\n});\n\n_grunt2.default.loadNpmTasks('grunt-build-control');\n\n_gulp2.default.task('buildcontrol:heroku', function (done) {\n    _grunt2.default.tasks(['buildcontrol:heroku'], //you can add more grunt tasks in this array\n    { gruntfile: false }, //don't look for a Gruntfile - there is none. :-)\n    function () {\n        done();\n    });\n});\n_gulp2.default.task('buildcontrol:openshift', function (done) {\n    _grunt2.default.tasks(['buildcontrol:openshift'], //you can add more grunt tasks in this array\n    { gruntfile: false }, //don't look for a Gruntfile - there is none. :-)\n    function () {\n        done();\n    });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImd1bHBmaWxlLmJhYmVsLmpzIl0sIm5hbWVzIjpbInBsdWdpbnMiLCJjb25maWciLCJjbGllbnRQYXRoIiwic2VydmVyUGF0aCIsInBhdGhzIiwiY2xpZW50IiwiYXNzZXRzIiwiaW1hZ2VzIiwicmV2TWFuaWZlc3QiLCJzY3JpcHRzIiwic3R5bGVzIiwibWFpblN0eWxlIiwidmlld3MiLCJtYWluVmlldyIsInRlc3QiLCJlMmUiLCJzZXJ2ZXIiLCJqc29uIiwiaW50ZWdyYXRpb24iLCJ1bml0Iiwia2FybWEiLCJkaXN0Iiwib25TZXJ2ZXJMb2ciLCJsb2ciLCJjb25zb2xlIiwidXRpbCIsImNvbG9ycyIsIndoaXRlIiwieWVsbG93IiwibWVzc2FnZSIsImNoZWNrQXBwUmVhZHkiLCJjYiIsIm9wdGlvbnMiLCJob3N0IiwicG9ydCIsImdldCIsIm9uIiwid2hlblNlcnZlclJlYWR5Iiwic2VydmVyUmVhZHkiLCJhcHBSZWFkeUludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWFkeSIsImNsZWFySW50ZXJ2YWwiLCJsaW50Q2xpZW50U2NyaXB0cyIsInBpcGUiLCJ0c2xpbnQiLCJyZXF1aXJlIiwicmVwb3J0IiwiZW1pdEVycm9yIiwibGludENsaWVudFRlc3RTY3JpcHRzIiwibGludFNlcnZlclNjcmlwdHMiLCJlc2xpbnQiLCJmb3JtYXQiLCJsaW50U2VydmVyVGVzdFNjcmlwdHMiLCJjb25maWdGaWxlIiwiZW52cyIsInRyYW5zcGlsZVNlcnZlciIsInNvdXJjZW1hcHMiLCJpbml0IiwiYmFiZWwiLCJ3cml0ZSIsIm1vY2hhIiwicmVwb3J0ZXIiLCJ0aW1lb3V0IiwiaXN0YW5idWwiLCJ3cml0ZVJlcG9ydHMiLCJpc3RhbmJ1bEVuZm9yY2VyIiwidGhyZXNob2xkcyIsImdsb2JhbCIsImxpbmVzIiwic3RhdGVtZW50cyIsImJyYW5jaGVzIiwiZnVuY3Rpb25zIiwiY292ZXJhZ2VEaXJlY3RvcnkiLCJyb290RGlyZWN0b3J5IiwidGFzayIsImxvY2FsQ29uZmlnIiwiZSIsImVudiIsInZhcnMiLCJOT0RFX0VOViIsInNyYyIsImluamVjdCIsInVuaW9uIiwicmVhZCIsInNvcnQiLCJ0cmFuc2Zvcm0iLCJmaWxlcGF0aCIsIm5ld1BhdGgiLCJyZXBsYWNlIiwibWF0Y2giLCJwMSIsIm9mZnNldCIsInN0cmluZyIsImRlc3QiLCJ3ZWJwYWNrRGV2Q29uZmlnIiwiREVWIiwiZW50cnkiLCJhcHAiLCJwbHVtYmVyIiwid2VicGFja0Rpc3RDb25maWciLCJCVUlMRCIsImVyciIsImVtaXQiLCJ3ZWJwYWNrVGVzdENvbmZpZyIsIlRFU1QiLCJ3ZWJwYWNrRTJlQ29uZmlnIiwiRTJFIiwidHlwaW5ncyIsIm1hcCIsImJsb2IiLCJqc2NzIiwiZG90IiwiYnJvd3NlclN5bmNQb3J0IiwicHJvY2VzcyIsInRlc3RGaWxlcyIsIndhdGNoIiwiaW5zdHJ1bWVudGVyIiwiaW5jbHVkZVVudGVzdGVkIiwiaG9va1JlcXVpcmUiLCJleGl0IiwiX19kaXJuYW1lIiwic2luZ2xlUnVuIiwiZG9uZSIsInN0YXJ0IiwiaW1hZ2VtaW4iLCJvcHRpcG5nIiwib3B0aW1pemF0aW9uTGV2ZWwiLCJqcGVndHJhbiIsInByb2dyZXNzaXZlIiwiZ2lmc2ljbGUiLCJpbnRlcmxhY2VkIiwic3ZnbyIsInJlbW92ZVZpZXdCb3giLCJyZXYiLCJtYW5pZmVzdCIsImJhc2UiLCJtZXJnZSIsInJldlJlcGxhY2UiLCJmbGF0dGVuIiwib2JqIiwiZmlsZSIsImVuYyIsIm5leHQiLCJpc0RpcmVjdG9yeSIsImRpciIsImRpcm5hbWUiLCJyZWxhdGl2ZSIsInNwbGl0Iiwic2VwIiwiZmlsZU5hbWUiLCJub3JtYWxpemUiLCJiYXNlbmFtZSIsInBhdGgiLCJqb2luIiwicHVzaCIsIkVycm9yIiwiY3dkYmFzZSIsImluaXRDb25maWciLCJidWlsZGNvbnRyb2wiLCJjb21taXQiLCJjb25uZWN0Q29tbWl0cyIsImhlcm9rdSIsInJlbW90ZSIsImJyYW5jaCIsIm9wZW5zaGlmdCIsImxvYWROcG1UYXNrcyIs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UDtBQUlILENBTEQ7O0FBT0E7Ozs7QUFJQSxnQkFBTXlJLFVBQU4sQ0FBaUI7QUFDYkMsa0JBQWM7QUFDVi9ILGlCQUFTO0FBQ0xpSCxpQkFBSzdJLE1BQU1pQixJQUROO0FBRUwySSxvQkFBUSxJQUZIO0FBR0xMLGtCQUFNLElBSEQ7QUFJTE0sNEJBQWdCLEtBSlg7QUFLTHBJLHFCQUFTO0FBTEosU0FEQztBQVFWcUksZ0JBQVE7QUFDSmxJLHFCQUFTO0FBQ0xtSSx3QkFBUSxRQURIO0FBRUxDLHdCQUFRO0FBRkg7QUFETCxTQVJFO0FBY1ZDLG1CQUFXO0FBQ1BySSxxQkFBUztBQUNMbUksd0JBQVEsV0FESDtBQUVMQyx3QkFBUTtBQUZIO0FBREY7QUFkRDtBQURELENBQWpCOztBQXdCQSxnQkFBTUUsWUFBTixDQUFtQixxQkFBbkI7O0FBRUEsZUFBSzNGLElBQUwsQ0FBVSxxQkFBVixFQUFpQyxVQUFTZ0QsSUFBVCxFQUFlO0FBQzVDLG9CQUFNNEMsS0FBTixDQUNJLENBQUMscUJBQUQsQ0FESixFQUNnQztBQUM1QixNQUFDQyxXQUFXLEtBQVosRUFGSixFQUV3QjtBQUNwQixnQkFBVztBQUFDN0M7QUFBUSxLQUh4QjtBQUtILENBTkQ7QUFPQSxlQUFLaEQsSUFBTCxDQUFVLHdCQUFWLEVBQW9DLFVBQVNnRCxJQUFULEVBQWU7QUFDL0Msb0JBQU00QyxLQUFOLENBQ0ksQ0FBQyx3QkFBRCxDQURKLEVBQ21DO0FBQy9CLE1BQUNDLFdBQVcsS0FBWixFQUZKLEVBRXdCO0FBQ3BCLGdCQUFXO0FBQUM3QztBQUFRLEtBSHhCO0FBS0gsQ0FORCIsImZpbGUiOiJndWxwZmlsZS5iYWJlbC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdCIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBvbiAyMDE3LTEwLTEyIHVzaW5nIGdlbmVyYXRvci1hbmd1bGFyLWZ1bGxzdGFjayA0LjIuMlxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGRlbCBmcm9tICdkZWwnO1xuaW1wb3J0IGd1bHAgZnJvbSAnZ3VscCc7XG5pbXBvcnQgZ3J1bnQgZnJvbSAnZ3J1bnQnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgdGhyb3VnaDIgZnJvbSAndGhyb3VnaDInO1xuaW1wb3J0IGd1bHBMb2FkUGx1Z2lucyBmcm9tICdndWxwLWxvYWQtcGx1Z2lucyc7XG5pbXBvcnQgaHR0cCBmcm9tICdodHRwJztcbmltcG9ydCBvcGVuIGZyb20gJ29wZW4nO1xuaW1wb3J0IGxhenlwaXBlIGZyb20gJ2xhenlwaXBlJztcbmltcG9ydCBub2RlbW9uIGZyb20gJ25vZGVtb24nO1xuaW1wb3J0IHtTZXJ2ZXIgYXMgS2FybWFTZXJ2ZXJ9IGZyb20gJ2thcm1hJztcbmltcG9ydCBydW5TZXF1ZW5jZSBmcm9tICdydW4tc2VxdWVuY2UnO1xuaW1wb3J0IHtwcm90cmFjdG9yLCB3ZWJkcml2ZXJfdXBkYXRlfSBmcm9tICdndWxwLXByb3RyYWN0b3InO1xuaW1wb3J0IHtJbnN0cnVtZW50ZXJ9IGZyb20gJ2lzcGFydGEnO1xuaW1wb3J0IHdlYnBhY2sgZnJvbSAnd2VicGFjay1zdHJlYW0nO1xuaW1wb3J0IG1ha2VXZWJwYWNrQ29uZmlnIGZyb20gJy4vd2VicGFjay5tYWtlJztcblxudmFyIHBsdWdpbnMgPSBndWxwTG9hZFBsdWdpbnMoKTtcbnZhciBjb25maWc7XG5cbmNvbnN0IGNsaWVudFBhdGggPSAnY2xpZW50JztcbmNvbnN0IHNlcnZlclBhdGggPSAnc2VydmVyJztcbmNvbnN0IHBhdGhzID0ge1xuICAgIGNsaWVudDoge1xuICAgICAgICBhc3NldHM6IGAke2NsaWVudFBhdGh9L2Fzc2V0cy8qKi8qYCxcbiAgICAgICAgaW1hZ2VzOiBgJHtjbGllbnRQYXRofS9hc3NldHMvaW1hZ2VzLyoqLypgLFxuICAgICAgICByZXZNYW5pZmVzdDogYCR7Y2xpZW50UGF0aH0vYXNzZXRzL3Jldi1tYW5pZmVzdC5qc29uYCxcbiAgICAgICAgc2NyaXB0czogW1xuICAgICAgICAgICAgYCR7Y2xpZW50UGF0aH0vKiovISgqLnNwZWN8Ki5tb2NrKS50c2AsXG4gICAgICAgICAgICBgISR7Y2xpZW50UGF0aH0ve3R5cGluZ3MsdGVzdF90eXBpbmdzfS8qKi8qYFxuICAgICAgICBdLFxuICAgICAgICBzdHlsZXM6IFtgJHtjbGllbnRQYXRofS97YXBwLGNvbXBvbmVudHN9LyoqLyouc2Nzc2BdLFxuICAgICAgICBtYWluU3R5bGU6IGAke2NsaWVudFBhdGh9L2FwcC9hcHAuc2Nzc2AsXG4gICAgICAgIHZpZXdzOiBgJHtjbGllbnRQYXRofS97YXBwLGNvbXBvbmVudHN9LyoqLyouaHRtbGAsXG4gICAgICAgIG1haW5WaWV3OiBgJHtjbGllbnRQYXRofS9pbmRleC5odG1sYCxcbiAgICAgICAgdGVzdDogW2Ake2NsaWVudFBhdGh9L3thcHAsY29tcG9uZW50c30vKiovKi57c3BlYyxtb2NrfS50c2BdLFxuICAgICAgICBlMmU6IFsnZTJlLyoqLyouc3BlYy5qcyddXG4gICAgfSxcbiAgICBzZXJ2ZXI6IHtcbiAgICAgICAgc2NyaXB0czogW1xuICAgICAgICAgIGAke3NlcnZlclBhdGh9LyoqLyEoKi5zcGVjfCouaW50ZWdyYXRpb24pLmpzYCxcbiAgICAgICAgICBgISR7c2VydmVyUGF0aH0vY29uZmlnL2xvY2FsLmVudi5zYW1wbGUuanNgXG4gICAgICAgIF0sXG4gICAgICAgIGpzb246IFtgJHtzZXJ2ZXJQYXRofS8qKi8qLmpzb25gXSxcbiAgICAgICAgdGVzdDoge1xuICAgICAgICAgIGludGVncmF0aW9uOiBbYCR7c2VydmVyUGF0aH0vKiovKi5pbnRlZ3JhdGlvbi5qc2AsICdtb2NoYS5nbG9iYWwuanMnXSxcbiAgICAgICAgICB1bml0OiBbYCR7c2VydmVyUGF0aH0vKiovKi5zcGVjLmpzYCwgJ21vY2hhLmdsb2JhbC5qcyddXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGthcm1hOiAna2FybWEuY29uZi5qcycsXG4gICAgZGlzdDogJ2Rpc3QnXG59O1xuXG4vKioqKioqKioqKioqKioqKioqKipcbiAqIEhlbHBlciBmdW5jdGlvbnNcbiAqKioqKioqKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gb25TZXJ2ZXJMb2cobG9nKSB7XG4gICAgY29uc29sZS5sb2cocGx1Z2lucy51dGlsLmNvbG9ycy53aGl0ZSgnWycpICtcbiAgICAgICAgcGx1Z2lucy51dGlsLmNvbG9ycy55ZWxsb3coJ25vZGVtb24nKSArXG4gICAgICAgIHBsdWdpbnMudXRpbC5jb2xvcnMud2hpdGUoJ10gJykgK1xuICAgICAgICBsb2cubWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrQXBwUmVhZHkoY2IpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgaG9zdDogJ2xvY2FsaG9zdCcsXG4gICAgICAgIHBvcnQ6IGNvbmZpZy5wb3J0XG4gICAgfTtcbiAgICBodHRwXG4gICAgICAgIC5nZXQob3B0aW9ucywgKCkgPT4gY2IodHJ1ZSkpXG4gICAgICAgIC5vbignZXJyb3InLCAoKSA9PiBjYihmYWxzZSkpO1xufVxuXG4vLyBDYWxsIHBhZ2UgdW50aWwgZmlyc3Qgc3VjY2Vzc1xuZnVuY3Rpb24gd2hlblNlcnZlclJlYWR5KGNiKSB7XG4gICAgdmFyIHNlcnZlclJlYWR5ID0gZmFsc2U7XG4gICAgdmFyIGFwcFJlYWR5SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PlxuICAgICAgICBjaGVja0FwcFJlYWR5KChyZWFkeSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZWFkeSB8fCBzZXJ2ZXJSZWFkeSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYXBwUmVhZHlJbnRlcnZhbCk7XG4gICAgICAgICAgICBzZXJ2ZXJSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9KSxcbiAgICAgICAgMTAwKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqXG4gKiBSZXVzYWJsZSBwaXBlbGluZXNcbiAqKioqKioqKioqKioqKioqKioqKi9cblxubGV0IGxpbnRDbGllbnRTY3JpcHRzID0gbGF6eXBpcGUoKVxuICAgIC5waXBlKHBsdWdpbnMudHNsaW50LCByZXF1aXJlKGAuLyR7Y2xpZW50UGF0aH0vdHNsaW50Lmpzb25gKSlcbiAgICAucGlwZShwbHVnaW5zLnRzbGludC5yZXBvcnQsICd2ZXJib3NlJywge2VtaXRFcnJvcjogZmFsc2V9KTtcblxuY29uc3QgbGludENsaWVudFRlc3RTY3JpcHRzID0gbGF6eXBpcGUoKVxuICAgIC5waXBlKHBsdWdpbnMudHNsaW50LCByZXF1aXJlKGAuLyR7Y2xpZW50UGF0aH0vdHNsaW50Lmpzb25gKSlcbiAgICAucGlwZShwbHVnaW5zLnRzbGludC5yZXBvcnQsICd2ZXJib3NlJywge2VtaXRFcnJvcjogZmFsc2V9KTtcblxubGV0IGxpbnRTZXJ2ZXJTY3JpcHRzID0gbGF6eXBpcGUoKVxuICAgIC5waXBlKHBsdWdpbnMuZXNsaW50LCBgJHtzZXJ2ZXJQYXRofS8uZXNsaW50cmNgKVxuICAgIC5waXBlKHBsdWdpbnMuZXNsaW50LmZvcm1hdCk7XG5cbmxldCBsaW50U2VydmVyVGVzdFNjcmlwdHMgPSBsYXp5cGlwZSgpXG4gICAgLnBpcGUocGx1Z2lucy5lc2xpbnQsIHtcbiAgICAgICAgY29uZmlnRmlsZTogYCR7c2VydmVyUGF0aH0vLmVzbGludHJjYCxcbiAgICAgICAgZW52czogW1xuICAgICAgICAgICAgJ25vZGUnLFxuICAgICAgICAgICAgJ2VzNicsXG4gICAgICAgICAgICAnbW9jaGEnXG4gICAgICAgIF1cbiAgICB9KVxuICAgIC5waXBlKHBsdWdpbnMuZXNsaW50LmZvcm1hdCk7XG5cbmxldCB0cmFuc3BpbGVTZXJ2ZXIgPSBsYXp5cGlwZSgpXG4gICAgLnBpcGUocGx1Z2lucy5zb3VyY2VtYXBzLmluaXQpXG4gICAgLnBpcGUocGx1Z2lucy5iYWJlbCwge1xuICAgICAgICBwbHVnaW5zOiBbXG4gICAgICAgICAgICAndHJhbnNmb3JtLWNsYXNzLXByb3BlcnRpZXMnLFxuICAgICAgICAgICAgJ3RyYW5zZm9ybS1ydW50aW1lJ1xuICAgICAgICBdXG4gICAgfSlcbiAgICAucGlwZShwbHVnaW5zLnNvdXJjZW1hcHMud3JpdGUsICcuJyk7XG5cbmxldCBtb2NoYSA9IGxhenlwaXBlKClcbiAgICAucGlwZShwbHVnaW5zLm1vY2hhLCB7XG4gICAgICAgIHJlcG9ydGVyOiAnc3BlYycsXG4gICAgICAgIHRpbWVvdXQ6IDUwMDAsXG4gICAgICAgIHJlcXVpcmU6IFtcbiAgICAgICAgICAgICcuL21vY2hhLmNvbmYnXG4gICAgICAgIF1cbiAgICB9KTtcblxubGV0IGlzdGFuYnVsID0gbGF6eXBpcGUoKVxuICAgIC5waXBlKHBsdWdpbnMuaXN0YW5idWwud3JpdGVSZXBvcnRzKVxuICAgIC5waXBlKHBsdWdpbnMuaXN0YW5idWxFbmZvcmNlciwge1xuICAgICAgICB0aHJlc2hvbGRzOiB7XG4gICAgICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgICAgICBsaW5lczogODAsXG4gICAgICAgICAgICAgICAgc3RhdGVtZW50czogODAsXG4gICAgICAgICAgICAgICAgYnJhbmNoZXM6IDgwLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uczogODBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY292ZXJhZ2VEaXJlY3Rvcnk6ICcuL2NvdmVyYWdlJyxcbiAgICAgICAgcm9vdERpcmVjdG9yeSA6ICcnXG4gICAgfSk7XG5cbi8qKioqKioqKioqKioqKioqKioqKlxuICogRW52XG4gKioqKioqKioqKioqKioqKioqKiovXG5cbmd1bHAudGFzaygnZW52OmFsbCcsICgpID0+IHtcbiAgICBsZXQgbG9jYWxDb25maWc7XG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYWxDb25maWcgPSByZXF1aXJlKGAuLyR7c2VydmVyUGF0aH0vY29uZmlnL2xvY2FsLmVudmApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9jYWxDb25maWcgPSB7fTtcbiAgICB9XG4gICAgcGx1Z2lucy5lbnYoe1xuICAgICAgICB2YXJzOiBsb2NhbENvbmZpZ1xuICAgIH0pO1xufSk7XG5ndWxwLnRhc2soJ2Vudjp0ZXN0JywgKCkgPT4ge1xuICAgIHBsdWdpbnMuZW52KHtcbiAgICAgICAgdmFyczoge05PREVfRU5WOiAndGVzdCd9XG4gICAgfSk7XG59KTtcbmd1bHAudGFzaygnZW52OnByb2QnLCAoKSA9PiB7XG4gICAgcGx1Z2lucy5lbnYoe1xuICAgICAgICB2YXJzOiB7Tk9ERV9FTlY6ICdwcm9kdWN0aW9uJ31cbiAgICB9KTtcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKipcbiAqIFRhc2tzXG4gKioqKioqKioqKioqKioqKioqKiovXG5cbmd1bHAudGFzaygnaW5qZWN0JywgY2IgPT4ge1xuICAgIHJ1blNlcXVlbmNlKFsnaW5qZWN0OnNjc3MnXSwgY2IpO1xufSk7XG5cbmd1bHAudGFzaygnaW5qZWN0OnNjc3MnLCAoKSA9PiB7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHBhdGhzLmNsaWVudC5tYWluU3R5bGUpXG4gICAgICAgIC5waXBlKHBsdWdpbnMuaW5qZWN0KFxuICAgICAgICAgICAgZ3VscC5zcmMoXy51bmlvbihwYXRocy5jbGllbnQuc3R5bGVzLCBbJyEnICsgcGF0aHMuY2xpZW50Lm1haW5TdHlsZV0pLCB7cmVhZDogZmFsc2V9KVxuICAgICAgICAgICAgICAgIC5waXBlKHBsdWdpbnMuc29ydCgpKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IChmaWxlcGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UGF0aCA9IGZpbGVwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShgLyR7Y2xpZW50UGF0aH0vYXBwL2AsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoYC8ke2NsaWVudFBhdGh9L2NvbXBvbmVudHMvYCwgJy4uL2NvbXBvbmVudHMvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fKC4qKS5zY3NzLywgKG1hdGNoLCBwMSwgb2Zmc2V0LCBzdHJpbmcpID0+IHAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJy5zY3NzJywgJycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYEBpbXBvcnQgJyR7bmV3UGF0aH0nO2A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdChgJHtjbGllbnRQYXRofS9hcHBgKSk7XG59KTtcblxuZ3VscC50YXNrKCd3ZWJwYWNrOmRldicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHdlYnBhY2tEZXZDb25maWcgPSBtYWtlV2VicGFja0NvbmZpZyh7IERFVjogdHJ1ZSB9KTtcbiAgICByZXR1cm4gZ3VscC5zcmMod2VicGFja0RldkNvbmZpZy5lbnRyeS5hcHApXG4gICAgICAgIC5waXBlKHBsdWdpbnMucGx1bWJlcigpKVxuICAgICAgICAucGlwZSh3ZWJwYWNrKHdlYnBhY2tEZXZDb25maWcpKVxuICAgICAgICAucGlwZShndWxwLmRlc3QoJy50bXAnKSk7XG59KTtcblxuZ3VscC50YXNrKCd3ZWJwYWNrOmRpc3QnLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB3ZWJwYWNrRGlzdENvbmZpZyA9IG1ha2VXZWJwYWNrQ29uZmlnKHsgQlVJTEQ6IHRydWUgfSk7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHdlYnBhY2tEaXN0Q29uZmlnLmVudHJ5LmFwcClcbiAgICAgICAgLnBpcGUod2VicGFjayh3ZWJwYWNrRGlzdENvbmZpZykpXG4gICAgICAgIC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdlbmQnKTsgLy8gUmVjb3ZlciBmcm9tIGVycm9yc1xuICAgICAgICB9KVxuICAgICAgICAucGlwZShndWxwLmRlc3QoYCR7cGF0aHMuZGlzdH0vY2xpZW50YCkpO1xufSk7XG5cbmd1bHAudGFzaygnd2VicGFjazp0ZXN0JywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgd2VicGFja1Rlc3RDb25maWcgPSBtYWtlV2VicGFja0NvbmZpZyh7IFRFU1Q6IHRydWUgfSk7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHdlYnBhY2tUZXN0Q29uZmlnLmVudHJ5LmFwcClcbiAgICAgICAgLnBpcGUod2VicGFjayh3ZWJwYWNrVGVzdENvbmZpZykpXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdCgnLnRtcCcpKTtcbn0pO1xuXG5ndWxwLnRhc2soJ3dlYnBhY2s6ZTJlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgd2VicGFja0UyZUNvbmZpZyA9IG1ha2VXZWJwYWNrQ29uZmlnKHsgRTJFOiB0cnVlIH0pO1xuICAgIHJldHVybiBndWxwLnNyYyh3ZWJwYWNrRTJlQ29uZmlnLmVudHJ5LmFwcClcbiAgICAgICAgLnBpcGUod2VicGFjayh3ZWJwYWNrRTJlQ29uZmlnKSlcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCcudG1wJykpO1xufSk7XG5cbi8vIEluc3RhbGwgRGVmaW5pdGVseVR5cGVkIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmaWxlc1xuZ3VscC50YXNrKCd0eXBpbmdzJywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYyhcIi4vdHlwaW5ncy5qc29uXCIpXG4gICAgICAgIC5waXBlKHBsdWdpbnMudHlwaW5ncygpKTtcbn0pO1xuXG5ndWxwLnRhc2soJ3N0eWxlcycsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMocGF0aHMuY2xpZW50Lm1haW5TdHlsZSlcbiAgICAgICAgLnBpcGUoc3R5bGVzKCkpXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdCgnLnRtcC9hcHAnKSk7XG59KTtcblxuZ3VscC50YXNrKCd0cmFuc3BpbGU6c2VydmVyJywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYyhfLnVuaW9uKHBhdGhzLnNlcnZlci5zY3JpcHRzLCBwYXRocy5zZXJ2ZXIuanNvbikpXG4gICAgICAgIC5waXBlKHRyYW5zcGlsZVNlcnZlcigpKVxuICAgICAgICAucGlwZShndWxwLmRlc3QoYCR7cGF0aHMuZGlzdH0vJHtzZXJ2ZXJQYXRofWApKTtcbn0pO1xuXG5ndWxwLnRhc2soJ2xpbnQ6c2NyaXB0cycsIGNiID0+IHJ1blNlcXVlbmNlKFsnbGludDpzY3JpcHRzOmNsaWVudCcsICdsaW50OnNjcmlwdHM6c2VydmVyJ10sIGNiKSk7XG5cbmd1bHAudGFzaygnbGludDpzY3JpcHRzOmNsaWVudCcsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMoXy51bmlvbihcbiAgICAgICAgcGF0aHMuY2xpZW50LnNjcmlwdHMsXG4gICAgICAgIF8ubWFwKHBhdGhzLmNsaWVudC50ZXN0LCBibG9iID0+ICchJyArIGJsb2IpXG4gICAgKSlcbiAgICAgICAgLnBpcGUobGludENsaWVudFNjcmlwdHMoKSk7XG59KTtcblxuZ3VscC50YXNrKCdsaW50OnNjcmlwdHM6c2VydmVyJywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYyhfLnVuaW9uKHBhdGhzLnNlcnZlci5zY3JpcHRzLCBfLm1hcChwYXRocy5zZXJ2ZXIudGVzdCwgYmxvYiA9PiAnIScgKyBibG9iKSkpXG4gICAgICAgIC5waXBlKGxpbnRTZXJ2ZXJTY3JpcHRzKCkpO1xufSk7XG5cbmd1bHAudGFzaygnbGludDpzY3JpcHRzOmNsaWVudFRlc3QnLCAoKSA9PiB7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHBhdGhzLmNsaWVudC50ZXN0KVxuICAgICAgICAucGlwZShsaW50Q2xpZW50U2NyaXB0cygpKTtcbn0pO1xuXG5ndWxwLnRhc2soJ2xpbnQ6c2NyaXB0czpzZXJ2ZXJUZXN0JywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYyhwYXRocy5zZXJ2ZXIudGVzdClcbiAgICAgICAgLnBpcGUobGludFNlcnZlclRlc3RTY3JpcHRzKCkpO1xufSk7XG5cbmd1bHAudGFzaygnanNjcycsICgpID0+IHtcbiAgcmV0dXJuIGd1bHAuc3JjKF8udW5pb24ocGF0aHMuY2xpZW50LnNjcmlwdHMsIHBhdGhzLnNlcnZlci5zY3JpcHRzKSlcbiAgICAgIC5waXBlKHBsdWdpbnMuanNjcygpKVxuICAgICAgLnBpcGUocGx1Z2lucy5qc2NzLnJlcG9ydGVyKCkpO1xufSk7XG5cbmd1bHAudGFzaygnY2xlYW46dG1wJywgKCkgPT4gZGVsKFsnLnRtcC8qKi8qJ10sIHtkb3Q6IHRydWV9KSk7XG5cbmd1bHAudGFzaygnc3RhcnQ6Y2xpZW50JywgY2IgPT4ge1xuICAgIHdoZW5TZXJ2ZXJSZWFkeSgoKSA9PiB7XG4gICAgICAgIG9wZW4oJ2h0dHA6Ly9sb2NhbGhvc3Q6JyArIGNvbmZpZy5icm93c2VyU3luY1BvcnQpO1xuICAgICAgICBjYigpO1xuICAgIH0pO1xufSk7XG5cbmd1bHAudGFzaygnc3RhcnQ6c2VydmVyJywgKCkgPT4ge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JztcbiAgICBjb25maWcgPSByZXF1aXJlKGAuLyR7c2VydmVyUGF0aH0vY29uZmlnL2Vudmlyb25tZW50YCk7XG4gICAgbm9kZW1vbihgLXcgJHtzZXJ2ZXJQYXRofSAke3NlcnZlclBhdGh9YClcbiAgICAgICAgLm9uKCdsb2cnLCBvblNlcnZlckxvZyk7XG59KTtcblxuZ3VscC50YXNrKCdzdGFydDpzZXJ2ZXI6cHJvZCcsICgpID0+IHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdwcm9kdWN0aW9uJztcbiAgICBjb25maWcgPSByZXF1aXJlKGAuLyR7cGF0aHMuZGlzdH0vJHtzZXJ2ZXJQYXRofS9jb25maWcvZW52aXJvbm1lbnRgKTtcbiAgICBub2RlbW9uKGAtdyAke3BhdGhzLmRpc3R9LyR7c2VydmVyUGF0aH0gJHtwYXRocy5kaXN0fS8ke3NlcnZlclBhdGh9YClcbiAgICAgICAgLm9uKCdsb2cnLCBvblNlcnZlckxvZyk7XG59KTtcblxuZ3VscC50YXNrKCdzdGFydDpzZXJ2ZXI6ZGVidWcnLCAoKSA9PiB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnO1xuICAgIGNvbmZpZyA9IHJlcXVpcmUoYC4vJHtzZXJ2ZXJQYXRofS9jb25maWcvZW52aXJvbm1lbnRgKTtcbiAgICAvLyBub2RlbW9uKGAtdyAke3NlcnZlclBhdGh9IC0tZGVidWc9NTg1OCAtLWRlYnVnLWJyayAke3NlcnZlclBhdGh9YClcbiAgICBub2RlbW9uKGAtdyAke3NlcnZlclBhdGh9IC0taW5zcGVjdCAtLWRlYnVnLWJyayAke3NlcnZlclBhdGh9YClcbiAgICAgICAgLm9uKCdsb2cnLCBvblNlcnZlckxvZyk7XG59KTtcblxuZ3VscC50YXNrKCd3YXRjaCcsICgpID0+IHtcbiAgICB2YXIgdGVzdEZpbGVzID0gXy51bmlvbihwYXRocy5jbGllbnQudGVzdCwgcGF0aHMuc2VydmVyLnRlc3QudW5pdCwgcGF0aHMuc2VydmVyLnRlc3QuaW50ZWdyYXRpb24pO1xuXG4gICAgcGx1Z2lucy53YXRjaChfLnVuaW9uKHBhdGhzLnNlcnZlci5zY3JpcHRzLCB0ZXN0RmlsZXMpKVxuICAgICAgICAucGlwZShwbHVnaW5zLnBsdW1iZXIoKSlcbiAgICAgICAgLnBpcGUobGludFNlcnZlclNjcmlwdHMoKSk7XG5cbiAgICBwbHVnaW5zLndhdGNoKF8udW5pb24ocGF0aHMuc2VydmVyLnRlc3QudW5pdCwgcGF0aHMuc2VydmVyLnRlc3QuaW50ZWdyYXRpb24pKVxuICAgICAgICAucGlwZShwbHVnaW5zLnBsdW1iZXIoKSlcbiAgICAgICAgLnBpcGUobGludFNlcnZlclRlc3RTY3JpcHRzKCkpO1xufSk7XG5cbmd1bHAudGFzaygnc2VydmUnLCBjYiA9PiB7XG4gICAgcnVuU2VxdWVuY2UoXG4gICAgICAgIFtcbiAgICAgICAgICAgICdjbGVhbjp0bXAnLFxuICAgICAgICAgICAgJ2xpbnQ6c2NyaXB0cycsXG4gICAgICAgICAgICAnaW5qZWN0JyxcbiAgICAgICAgICAgICdjb3B5OmZvbnRzOmRldicsXG4gICAgICAgICAgICAnZW52OmFsbCcsXG4gICAgICAgICAgICAndHlwaW5ncydcbiAgICAgICAgXSxcbiAgICAgICAgLy8gJ3dlYnBhY2s6ZGV2JyxcbiAgICAgICAgWydzdGFydDpzZXJ2ZXInLCAnc3RhcnQ6Y2xpZW50J10sXG4gICAgICAgICd3YXRjaCcsXG4gICAgICAgIGNiXG4gICAgKTtcbn0pO1xuXG5ndWxwLnRhc2soJ3NlcnZlOmRlYnVnJywgY2IgPT4ge1xuICAgIHJ1blNlcXVlbmNlKFxuICAgICAgICBbXG4gICAgICAgICAgICAnY2xlYW46dG1wJyxcbiAgICAgICAgICAgICdsaW50OnNjcmlwdHMnLFxuICAgICAgICAgICAgJ2luamVjdCcsXG4gICAgICAgICAgICAnY29weTpmb250czpkZXYnLFxuICAgICAgICAgICAgJ2VudjphbGwnLFxuICAgICAgICAgICAgJ3R5cGluZ3MnXG4gICAgICAgIF0sXG4gICAgICAgICd3ZWJwYWNrOmRldicsXG4gICAgICAgIFsnc3RhcnQ6c2VydmVyOmRlYnVnJywgJ3N0YXJ0OmNsaWVudCddLFxuICAgICAgICAnd2F0Y2gnLFxuICAgICAgICBjYlxuICAgICk7XG59KTtcblxuZ3VscC50YXNrKCdzZXJ2ZTpkaXN0JywgY2IgPT4ge1xuICAgIHJ1blNlcXVlbmNlKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICAnZW52OmFsbCcsXG4gICAgICAgICdlbnY6cHJvZCcsXG4gICAgICAgIFsnc3RhcnQ6c2VydmVyOnByb2QnLCAnc3RhcnQ6Y2xpZW50J10sXG4gICAgICAgIGNiKTtcbn0pO1xuXG5ndWxwLnRhc2soJ3Rlc3QnLCBjYiA9PiB7XG4gICAgcmV0dXJuIHJ1blNlcXVlbmNlKCd0ZXN0OnNlcnZlcicsICd0ZXN0OmNsaWVudCcsIGNiKTtcbn0pO1xuXG5ndWxwLnRhc2soJ3Rlc3Q6c2VydmVyJywgY2IgPT4ge1xuICAgIHJ1blNlcXVlbmNlKFxuICAgICAgICAnZW52OmFsbCcsXG4gICAgICAgICdlbnY6dGVzdCcsXG4gICAgICAgICdtb2NoYTp1bml0JyxcbiAgICAgICAgJ21vY2hhOmludGVncmF0aW9uJyxcbiAgICAgICAgY2IpO1xufSk7XG5cbmd1bHAudGFzaygnbW9jaGE6dW5pdCcsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMocGF0aHMuc2VydmVyLnRlc3QudW5pdClcbiAgICAgICAgLnBpcGUobW9jaGEoKSk7XG59KTtcblxuZ3VscC50YXNrKCdtb2NoYTppbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMocGF0aHMuc2VydmVyLnRlc3QuaW50ZWdyYXRpb24pXG4gICAgICAgIC5waXBlKG1vY2hhKCkpO1xufSk7XG5cbmd1bHAudGFzaygndGVzdDpzZXJ2ZXI6Y292ZXJhZ2UnLCBjYiA9PiB7XG4gIHJ1blNlcXVlbmNlKCdjb3ZlcmFnZTpwcmUnLFxuICAgICAgICAgICAgICAnZW52OmFsbCcsXG4gICAgICAgICAgICAgICdlbnY6dGVzdCcsXG4gICAgICAgICAgICAgICdjb3ZlcmFnZTp1bml0JyxcbiAgICAgICAgICAgICAgJ2NvdmVyYWdlOmludGVncmF0aW9uJyxcbiAgICAgICAgICAgICAgY2IpO1xufSk7XG5cbmd1bHAudGFzaygnY292ZXJhZ2U6cHJlJywgKCkgPT4ge1xuICByZXR1cm4gZ3VscC5zcmMocGF0aHMuc2VydmVyLnNjcmlwdHMpXG4gICAgLy8gQ292ZXJpbmcgZmlsZXNcbiAgICAucGlwZShwbHVnaW5zLmlzdGFuYnVsKHtcbiAgICAgICAgaW5zdHJ1bWVudGVyOiBJbnN0cnVtZW50ZXIsIC8vIFVzZSB0aGUgaXNwYXJ0YSBpbnN0cnVtZW50ZXIgKGNvZGUgY292ZXJhZ2UgZm9yIEVTNilcbiAgICAgICAgaW5jbHVkZVVudGVzdGVkOiB0cnVlXG4gICAgfSkpXG4gICAgLy8gRm9yY2UgYHJlcXVpcmVgIHRvIHJldHVybiBjb3ZlcmVkIGZpbGVzXG4gICAgLnBpcGUocGx1Z2lucy5pc3RhbmJ1bC5ob29rUmVxdWlyZSgpKTtcbn0pO1xuXG5ndWxwLnRhc2soJ2NvdmVyYWdlOnVuaXQnLCAoKSA9PiB7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHBhdGhzLnNlcnZlci50ZXN0LnVuaXQpXG4gICAgICAgIC5waXBlKG1vY2hhKCkpXG4gICAgICAgIC5waXBlKGlzdGFuYnVsKCkpXG4gICAgICAgIC8vIENyZWF0aW5nIHRoZSByZXBvcnRzIGFmdGVyIHRlc3RzIHJhblxufSk7XG5cbmd1bHAudGFzaygnY292ZXJhZ2U6aW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgcmV0dXJuIGd1bHAuc3JjKHBhdGhzLnNlcnZlci50ZXN0LmludGVncmF0aW9uKVxuICAgICAgICAucGlwZShtb2NoYSgpKVxuICAgICAgICAucGlwZShpc3RhbmJ1bCgpKVxuICAgICAgICAvLyBDcmVhdGluZyB0aGUgcmVwb3J0cyBhZnRlciB0ZXN0cyByYW5cbn0pO1xuXG4vLyBEb3dubG9hZHMgdGhlIHNlbGVuaXVtIHdlYmRyaXZlclxuZ3VscC50YXNrKCd3ZWJkcml2ZXJfdXBkYXRlJywgd2ViZHJpdmVyX3VwZGF0ZSk7XG5cbmd1bHAudGFzaygndGVzdDplMmUnLCBbJ3dlYnBhY2s6ZTJlJywgJ2VudjphbGwnLCAnZW52OnRlc3QnLCAnc3RhcnQ6c2VydmVyJywgJ3dlYmRyaXZlcl91cGRhdGUnXSwgY2IgPT4ge1xuICAgIGd1bHAuc3JjKHBhdGhzLmNsaWVudC5lMmUpXG4gICAgICAgIC5waXBlKHByb3RyYWN0b3Ioe1xuICAgICAgICAgICAgY29uZmlnRmlsZTogJ3Byb3RyYWN0b3IuY29uZi5qcycsXG4gICAgICAgIH0pKVxuICAgICAgICAub24oJ2Vycm9yJywgZSA9PiB7IHRocm93IGUgfSlcbiAgICAgICAgLm9uKCdlbmQnLCAoKSA9PiB7IHByb2Nlc3MuZXhpdCgpIH0pO1xufSk7XG5cbmd1bHAudGFzaygndGVzdDpjbGllbnQnLCBkb25lID0+IHtcbiAgICBuZXcgS2FybWFTZXJ2ZXIoe1xuICAgICAgY29uZmlnRmlsZTogYCR7X19kaXJuYW1lfS8ke3BhdGhzLmthcm1hfWAsXG4gICAgICBzaW5nbGVSdW46IHRydWVcbiAgICB9LCBlcnIgPT4ge1xuICAgICAgICBkb25lKGVycik7XG4gICAgICAgIHByb2Nlc3MuZXhpdChlcnIpO1xuICAgIH0pLnN0YXJ0KCk7XG59KTtcblxuLyoqKioqKioqKioqKioqKioqKioqXG4gKiBCdWlsZFxuICoqKioqKioqKioqKioqKioqKioqL1xuXG5ndWxwLnRhc2soJ2J1aWxkJywgY2IgPT4ge1xuICAgIHJ1blNlcXVlbmNlKFxuICAgICAgICBbXG4gICAgICAgICAgICAnY2xlYW46ZGlzdCcsXG4gICAgICAgICAgICAnY2xlYW46dG1wJ1xuICAgICAgICBdLFxuICAgICAgICAnaW5qZWN0JyxcbiAgICAgICAgJ3RyYW5zcGlsZTpzZXJ2ZXInLFxuICAgICAgICBbXG4gICAgICAgICAgICAnYnVpbGQ6aW1hZ2VzJyxcbiAgICAgICAgICAgICd0eXBpbmdzJ1xuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICAnY29weTpleHRyYXMnLFxuICAgICAgICAgICAgJ2NvcHk6YXNzZXRzJyxcbiAgICAgICAgICAgICdjb3B5OmZvbnRzOmRpc3QnLFxuICAgICAgICAgICAgJ2NvcHk6c2VydmVyJyxcbiAgICAgICAgICAgICd3ZWJwYWNrOmRpc3QnXG4gICAgICAgIF0sXG4gICAgICAgICdyZXZSZXBsYWNlV2VicGFjaycsXG4gICAgICAgIGNiKTtcbn0pO1xuXG5ndWxwLnRhc2soJ2NsZWFuOmRpc3QnLCAoKSA9PiBkZWwoW2Ake3BhdGhzLmRpc3R9LyEoLmdpdCp8Lm9wZW5zaGlmdHxQcm9jZmlsZSkqKmBdLCB7ZG90OiB0cnVlfSkpO1xuXG5ndWxwLnRhc2soJ2J1aWxkOmltYWdlcycsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMocGF0aHMuY2xpZW50LmltYWdlcylcbiAgICAgICAgLnBpcGUocGx1Z2lucy5pbWFnZW1pbihbXG4gICAgICAgICAgICBwbHVnaW5zLmltYWdlbWluLm9wdGlwbmcoe29wdGltaXphdGlvbkxldmVsOiA1fSksXG4gICAgICAgICAgICBwbHVnaW5zLmltYWdlbWluLmpwZWd0cmFuKHtwcm9ncmVzc2l2ZTogdHJ1ZX0pLFxuICAgICAgICAgICAgcGx1Z2lucy5pbWFnZW1pbi5naWZzaWNsZSh7aW50ZXJsYWNlZDogdHJ1ZX0pLFxuICAgICAgICAgICAgcGx1Z2lucy5pbWFnZW1pbi5zdmdvKHtwbHVnaW5zOiBbe3JlbW92ZVZpZXdCb3g6IGZhbHNlfV19KVxuICAgICAgICBdKSlcbiAgICAgICAgLnBpcGUocGx1Z2lucy5yZXYoKSlcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KGAke3BhdGhzLmRpc3R9LyR7Y2xpZW50UGF0aH0vYXNzZXRzL2ltYWdlc2ApKVxuICAgICAgICAucGlwZShwbHVnaW5zLnJldi5tYW5pZmVzdChgJHtwYXRocy5kaXN0fS8ke3BhdGhzLmNsaWVudC5yZXZNYW5pZmVzdH1gLCB7XG4gICAgICAgICAgICBiYXNlOiBgJHtwYXRocy5kaXN0fS8ke2NsaWVudFBhdGh9L2Fzc2V0c2AsXG4gICAgICAgICAgICBtZXJnZTogdHJ1ZVxuICAgICAgICB9KSlcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KGAke3BhdGhzLmRpc3R9LyR7Y2xpZW50UGF0aH0vYXNzZXRzYCkpO1xufSk7XG5cbmd1bHAudGFzaygncmV2UmVwbGFjZVdlYnBhY2snLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZ3VscC5zcmMoJ2Rpc3QvY2xpZW50L2FwcC4qLmpzJylcbiAgICAgICAgLnBpcGUocGx1Z2lucy5yZXZSZXBsYWNlKHttYW5pZmVzdDogZ3VscC5zcmMoYCR7cGF0aHMuZGlzdH0vJHtwYXRocy5jbGllbnQucmV2TWFuaWZlc3R9YCl9KSlcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCdkaXN0L2NsaWVudCcpKTtcbn0pO1xuXG5ndWxwLnRhc2soJ2NvcHk6ZXh0cmFzJywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYyhbXG4gICAgICAgIGAke2NsaWVudFBhdGh9L2Zhdmljb24uaWNvYCxcbiAgICAgICAgYCR7Y2xpZW50UGF0aH0vcm9ib3RzLnR4dGAsXG4gICAgICAgIGAke2NsaWVudFBhdGh9Ly5odGFjY2Vzc2BcbiAgICBdLCB7IGRvdDogdHJ1ZSB9KVxuICAgICAgICAucGlwZShndWxwLmRlc3QoYCR7cGF0aHMuZGlzdH0vJHtjbGllbnRQYXRofWApKTtcbn0pO1xuXG4vKipcbiAqIHR1cm5zICdib290c3RyYXAvZm9udHMvZm9udC53b2ZmJyBpbnRvICdib290c3RyYXAvZm9udC53b2ZmJ1xuICovXG5mdW5jdGlvbiBmbGF0dGVuKCkge1xuICAgIHJldHVybiB0aHJvdWdoMi5vYmooZnVuY3Rpb24oZmlsZSwgZW5jLCBuZXh0KSB7XG4gICAgICAgIGlmKCFmaWxlLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpciA9IHBhdGguZGlybmFtZShmaWxlLnJlbGF0aXZlKS5zcGxpdChwYXRoLnNlcClbMF07XG4gICAgICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gcGF0aC5ub3JtYWxpemUocGF0aC5iYXNlbmFtZShmaWxlLnBhdGgpKTtcbiAgICAgICAgICAgICAgICBmaWxlLnBhdGggPSBwYXRoLmpvaW4oZmlsZS5iYXNlLCBwYXRoLmpvaW4oZGlyLCBmaWxlTmFtZSkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5leHQoKTtcbiAgICB9KTtcbn1cbmd1bHAudGFzaygnY29weTpmb250czpkZXYnLCAoKSA9PiB7XG4gICAgcmV0dXJuIGd1bHAuc3JjKCdub2RlX21vZHVsZXMve2Jvb3RzdHJhcCxmb250LWF3ZXNvbWV9L2ZvbnRzLyonKVxuICAgICAgICAucGlwZShmbGF0dGVuKCkpXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdChgJHtjbGllbnRQYXRofS9hc3NldHMvZm9udHNgKSk7XG59KTtcbmd1bHAudGFzaygnY29weTpmb250czpkaXN0JywgKCkgPT4ge1xuICAgIHJldHVybiBndWxwLnNyYygnbm9kZV9tb2R1bGVzL3tib290c3RyYXAsZm9udC1hd2Vzb21lfS9mb250cy8qJylcbiAgICAgICAgLnBpcGUoZmxhdHRlbigpKVxuICAgICAgICAucGlwZShndWxwLmRlc3QoYCR7cGF0aHMuZGlzdH0vJHtjbGllbnRQYXRofS9hc3NldHMvZm9udHNgKSk7XG59KTtcblxuZ3VscC50YXNrKCdjb3B5OmFzc2V0cycsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMoW3BhdGhzLmNsaWVudC5hc3NldHMsICchJyArIHBhdGhzLmNsaWVudC5pbWFnZXNdKVxuICAgICAgICAucGlwZShndWxwLmRlc3QoYCR7cGF0aHMuZGlzdH0vJHtjbGllbnRQYXRofS9hc3NldHNgKSk7XG59KTtcblxuZ3VscC50YXNrKCdjb3B5OnNlcnZlcicsICgpID0+IHtcbiAgICByZXR1cm4gZ3VscC5zcmMoW1xuICAgICAgICAncGFja2FnZS5qc29uJ1xuICAgIF0sIHtjd2RiYXNlOiB0cnVlfSlcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KHBhdGhzLmRpc3QpKTtcbn0pO1xuXG4vKioqKioqKioqKioqKioqKioqKipcbiAqIEdydW50IHBvcnRlZCB0YXNrc1xuICoqKioqKioqKioqKioqKioqKioqL1xuXG5ncnVudC5pbml0Q29uZmlnKHtcbiAgICBidWlsZGNvbnRyb2w6IHtcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgZGlyOiBwYXRocy5kaXN0LFxuICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgcHVzaDogdHJ1ZSxcbiAgICAgICAgICAgIGNvbm5lY3RDb21taXRzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdCdWlsdCAlc291cmNlTmFtZSUgZnJvbSBjb21taXQgJXNvdXJjZUNvbW1pdCUgb24gYnJhbmNoICVzb3VyY2VCcmFuY2glJ1xuICAgICAgICB9LFxuICAgICAgICBoZXJva3U6IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICByZW1vdGU6ICdoZXJva3UnLFxuICAgICAgICAgICAgICAgIGJyYW5jaDogJ21hc3RlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb3BlbnNoaWZ0OiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgcmVtb3RlOiAnb3BlbnNoaWZ0JyxcbiAgICAgICAgICAgICAgICBicmFuY2g6ICdtYXN0ZXInXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZ3J1bnQubG9hZE5wbVRhc2tzKCdncnVudC1idWlsZC1jb250cm9sJyk7XG5cbmd1bHAudGFzaygnYnVpbGRjb250cm9sOmhlcm9rdScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBncnVudC50YXNrcyhcbiAgICAgICAgWydidWlsZGNvbnRyb2w6aGVyb2t1J10sICAgIC8veW91IGNhbiBhZGQgbW9yZSBncnVudCB0YXNrcyBpbiB0aGlzIGFycmF5XG4gICAgICAgIHtncnVudGZpbGU6IGZhbHNlfSwgLy9kb24ndCBsb29rIGZvciBhIEdydW50ZmlsZSAtIHRoZXJlIGlzIG5vbmUuIDotKVxuICAgICAgICBmdW5jdGlvbigpIHtkb25lKCk7fVxuICAgICk7XG59KTtcbmd1bHAudGFzaygnYnVpbGRjb250cm9sOm9wZW5zaGlmdCcsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBncnVudC50YXNrcyhcbiAgICAgICAgWydidWlsZGNvbnRyb2w6b3BlbnNoaWZ0J10sICAgIC8veW91IGNhbiBhZGQgbW9yZSBncnVudCB0YXNrcyBpbiB0aGlzIGFycmF5XG4gICAgICAgIHtncnVudGZpbGU6IGZhbHNlfSwgLy9kb24ndCBsb29rIGZvciBhIEdydW50ZmlsZSAtIHRoZXJlIGlzIG5vbmUuIDotKVxuICAgICAgICBmdW5jdGlvbigpIHtkb25lKCk7fVxuICAgICk7XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "gulpfile.babel.js"
      ],
      "names": [
        "plugins",
        "config",
        "clientPath",
        "serverPath",
        "paths",
        "client",
        "assets",
        "images",
        "revManifest",
        "scripts",
        "styles",
        "mainStyle",
        "views",
        "mainView",
        "test",
        "e2e",
        "server",
        "json",
        "integration",
        "unit",
        "karma",
        "dist",
        "onServerLog",
        "log",
        "console",
        "util",
        "colors",
        "white",
        "yellow",
        "message",
        "checkAppReady",
        "cb",
        "options",
        "host",
        "port",
        "get",
        "on",
        "whenServerReady",
        "serverReady",
        "appReadyInterval",
        "setInterval",
        "ready",
        "clearInterval",
        "lintClientScripts",
        "pipe",
        "tslint",
        "require",
        "report",
        "emitError",
        "lintClientTestScripts",
        "lintServerScripts",
        "eslint",
        "format",
        "lintServerTestScripts",
        "configFile",
        "envs",
        "transpileServer",
        "sourcemaps",
        "init",
        "babel",
        "write",
        "mocha",
        "reporter",
        "timeout",
        "istanbul",
        "writeReports",
        "istanbulEnforcer",
        "thresholds",
        "global",
        "lines",
        "statements",
        "branches",
        "functions",
        "coverageDirectory",
        "rootDirectory",
        "task",
        "localConfig",
        "e",
        "env",
        "vars",
        "NODE_ENV",
        "src",
        "inject",
        "union",
        "read",
        "sort",
        "transform",
        "filepath",
        "newPath",
        "replace",
        "match",
        "p1",
        "offset",
        "string",
        "dest",
        "webpackDevConfig",
        "DEV",
        "entry",
        "app",
        "plumber",
        "webpackDistConfig",
        "BUILD",
        "err",
        "emit",
        "webpackTestConfig",
        "TEST",
        "webpackE2eConfig",
        "E2E",
        "typings",
        "map",
        "blob",
        "jscs",
        "dot",
        "browserSyncPort",
        "process",
        "testFiles",
        "watch",
        "instrumenter",
        "includeUntested",
        "hookRequire",
        "exit",
        "__dirname",
        "singleRun",
        "done",
        "start",
        "imagemin",
        "optipng",
        "optimizationLevel",
        "jpegtran",
        "progressive",
        "gifsicle",
        "interlaced",
        "svgo",
        "removeViewBox",
        "rev",
        "manifest",
        "base",
        "merge",
        "revReplace",
        "flatten",
        "obj",
        "file",
        "enc",
        "next",
        "isDirectory",
        "dir",
        "dirname",
        "relative",
        "split",
        "sep",
        "fileName",
        "normalize",
        "basename",
        "path",
        "join",
        "push",
        "Error",
        "cwdbase",
        "initConfig",
        "buildcontrol",
        "commit",
        "connectCommits",
        "heroku",
        "remote",
        "branch",
        "openshift",
        "loadNpmTasks",
        "tasks",
        "gruntfile"
      ],
      "mappings": "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",
      "file": "gulpfile.babel.js",
      "sourceRoot": "/root",
      "sourcesContent": [
        "// Generated on 2017-10-12 using generator-angular-fullstack 4.2.2\n'use strict';\n\nimport _ from 'lodash';\nimport del from 'del';\nimport gulp from 'gulp';\nimport grunt from 'grunt';\nimport path from 'path';\nimport through2 from 'through2';\nimport gulpLoadPlugins from 'gulp-load-plugins';\nimport http from 'http';\nimport open from 'open';\nimport lazypipe from 'lazypipe';\nimport nodemon from 'nodemon';\nimport {Server as KarmaServer} from 'karma';\nimport runSequence from 'run-sequence';\nimport {protractor, webdriver_update} from 'gulp-protractor';\nimport {Instrumenter} from 'isparta';\nimport webpack from 'webpack-stream';\nimport makeWebpackConfig from './webpack.make';\n\nvar plugins = gulpLoadPlugins();\nvar config;\n\nconst clientPath = 'client';\nconst serverPath = 'server';\nconst paths = {\n    client: {\n        assets: `${clientPath}/assets/**/*`,\n        images: `${clientPath}/assets/images/**/*`,\n        revManifest: `${clientPath}/assets/rev-manifest.json`,\n        scripts: [\n            `${clientPath}/**/!(*.spec|*.mock).ts`,\n            `!${clientPath}/{typings,test_typings}/**/*`\n        ],\n        styles: [`${clientPath}/{app,components}/**/*.scss`],\n        mainStyle: `${clientPath}/app/app.scss`,\n        views: `${clientPath}/{app,components}/**/*.html`,\n        mainView: `${clientPath}/index.html`,\n        test: [`${clientPath}/{app,components}/**/*.{spec,mock}.ts`],\n        e2e: ['e2e/**/*.spec.js']\n    },\n    server: {\n        scripts: [\n          `${serverPath}/**/!(*.spec|*.integration).js`,\n          `!${serverPath}/config/local.env.sample.js`\n        ],\n        json: [`${serverPath}/**/*.json`],\n        test: {\n          integration: [`${serverPath}/**/*.integration.js`, 'mocha.global.js'],\n          unit: [`${serverPath}/**/*.spec.js`, 'mocha.global.js']\n        }\n    },\n    karma: 'karma.conf.js',\n    dist: 'dist'\n};\n\n/********************\n * Helper functions\n ********************/\n\nfunction onServerLog(log) {\n    console.log(plugins.util.colors.white('[') +\n        plugins.util.colors.yellow('nodemon') +\n        plugins.util.colors.white('] ') +\n        log.message);\n}\n\nfunction checkAppReady(cb) {\n    var options = {\n        host: 'localhost',\n        port: config.port\n    };\n    http\n        .get(options, () => cb(true))\n        .on('error', () => cb(false));\n}\n\n// Call page until first success\nfunction whenServerReady(cb) {\n    var serverReady = false;\n    var appReadyInterval = setInterval(() =>\n        checkAppReady((ready) => {\n            if (!ready || serverReady) {\n                return;\n            }\n            clearInterval(appReadyInterval);\n            serverReady = true;\n            cb();\n        }),\n        100);\n}\n\n/********************\n * Reusable pipelines\n ********************/\n\nlet lintClientScripts = lazypipe()\n    .pipe(plugins.tslint, require(`./${clientPath}/tslint.json`))\n    .pipe(plugins.tslint.report, 'verbose', {emitError: false});\n\nconst lintClientTestScripts = lazypipe()\n    .pipe(plugins.tslint, require(`./${clientPath}/tslint.json`))\n    .pipe(plugins.tslint.report, 'verbose', {emitError: false});\n\nlet lintServerScripts = lazypipe()\n    .pipe(plugins.eslint, `${serverPath}/.eslintrc`)\n    .pipe(plugins.eslint.format);\n\nlet lintServerTestScripts = lazypipe()\n    .pipe(plugins.eslint, {\n        configFile: `${serverPath}/.eslintrc`,\n        envs: [\n            'node',\n            'es6',\n            'mocha'\n        ]\n    })\n    .pipe(plugins.eslint.format);\n\nlet transpileServer = lazypipe()\n    .pipe(plugins.sourcemaps.init)\n    .pipe(plugins.babel, {\n        plugins: [\n            'transform-class-properties',\n            'transform-runtime'\n        ]\n    })\n    .pipe(plugins.sourcemaps.write, '.');\n\nlet mocha = lazypipe()\n    .pipe(plugins.mocha, {\n        reporter: 'spec',\n        timeout: 5000,\n        require: [\n            './mocha.conf'\n        ]\n    });\n\nlet istanbul = lazypipe()\n    .pipe(plugins.istanbul.writeReports)\n    .pipe(plugins.istanbulEnforcer, {\n        thresholds: {\n            global: {\n                lines: 80,\n                statements: 80,\n                branches: 80,\n                functions: 80\n            }\n        },\n        coverageDirectory: './coverage',\n        rootDirectory : ''\n    });\n\n/********************\n * Env\n ********************/\n\ngulp.task('env:all', () => {\n    let localConfig;\n    try {\n        localConfig = require(`./${serverPath}/config/local.env`);\n    } catch (e) {\n        localConfig = {};\n    }\n    plugins.env({\n        vars: localConfig\n    });\n});\ngulp.task('env:test', () => {\n    plugins.env({\n        vars: {NODE_ENV: 'test'}\n    });\n});\ngulp.task('env:prod', () => {\n    plugins.env({\n        vars: {NODE_ENV: 'production'}\n    });\n});\n\n/********************\n * Tasks\n ********************/\n\ngulp.task('inject', cb => {\n    runSequence(['inject:scss'], cb);\n});\n\ngulp.task('inject:scss', () => {\n    return gulp.src(paths.client.mainStyle)\n        .pipe(plugins.inject(\n            gulp.src(_.union(paths.client.styles, ['!' + paths.client.mainStyle]), {read: false})\n                .pipe(plugins.sort()),\n            {\n                transform: (filepath) => {\n                    let newPath = filepath\n                        .replace(`/${clientPath}/app/`, '')\n                        .replace(`/${clientPath}/components/`, '../components/')\n                        .replace(/_(.*).scss/, (match, p1, offset, string) => p1)\n                        .replace('.scss', '');\n                    return `@import '${newPath}';`;\n                }\n            }))\n        .pipe(gulp.dest(`${clientPath}/app`));\n});\n\ngulp.task('webpack:dev', function() {\n    const webpackDevConfig = makeWebpackConfig({ DEV: true });\n    return gulp.src(webpackDevConfig.entry.app)\n        .pipe(plugins.plumber())\n        .pipe(webpack(webpackDevConfig))\n        .pipe(gulp.dest('.tmp'));\n});\n\ngulp.task('webpack:dist', function() {\n    const webpackDistConfig = makeWebpackConfig({ BUILD: true });\n    return gulp.src(webpackDistConfig.entry.app)\n        .pipe(webpack(webpackDistConfig))\n        .on('error', (err) => {\n          this.emit('end'); // Recover from errors\n        })\n        .pipe(gulp.dest(`${paths.dist}/client`));\n});\n\ngulp.task('webpack:test', function() {\n    const webpackTestConfig = makeWebpackConfig({ TEST: true });\n    return gulp.src(webpackTestConfig.entry.app)\n        .pipe(webpack(webpackTestConfig))\n        .pipe(gulp.dest('.tmp'));\n});\n\ngulp.task('webpack:e2e', function() {\n    const webpackE2eConfig = makeWebpackConfig({ E2E: true });\n    return gulp.src(webpackE2eConfig.entry.app)\n        .pipe(webpack(webpackE2eConfig))\n        .pipe(gulp.dest('.tmp'));\n});\n\n// Install DefinitelyTyped TypeScript definition files\ngulp.task('typings', () => {\n    return gulp.src(\"./typings.json\")\n        .pipe(plugins.typings());\n});\n\ngulp.task('styles', () => {\n    return gulp.src(paths.client.mainStyle)\n        .pipe(styles())\n        .pipe(gulp.dest('.tmp/app'));\n});\n\ngulp.task('transpile:server', () => {\n    return gulp.src(_.union(paths.server.scripts, paths.server.json))\n        .pipe(transpileServer())\n        .pipe(gulp.dest(`${paths.dist}/${serverPath}`));\n});\n\ngulp.task('lint:scripts', cb => runSequence(['lint:scripts:client', 'lint:scripts:server'], cb));\n\ngulp.task('lint:scripts:client', () => {\n    return gulp.src(_.union(\n        paths.client.scripts,\n        _.map(paths.client.test, blob => '!' + blob)\n    ))\n        .pipe(lintClientScripts());\n});\n\ngulp.task('lint:scripts:server', () => {\n    return gulp.src(_.union(paths.server.scripts, _.map(paths.server.test, blob => '!' + blob)))\n        .pipe(lintServerScripts());\n});\n\ngulp.task('lint:scripts:clientTest', () => {\n    return gulp.src(paths.client.test)\n        .pipe(lintClientScripts());\n});\n\ngulp.task('lint:scripts:serverTest', () => {\n    return gulp.src(paths.server.test)\n        .pipe(lintServerTestScripts());\n});\n\ngulp.task('jscs', () => {\n  return gulp.src(_.union(paths.client.scripts, paths.server.scripts))\n      .pipe(plugins.jscs())\n      .pipe(plugins.jscs.reporter());\n});\n\ngulp.task('clean:tmp', () => del(['.tmp/**/*'], {dot: true}));\n\ngulp.task('start:client', cb => {\n    whenServerReady(() => {\n        open('http://localhost:' + config.browserSyncPort);\n        cb();\n    });\n});\n\ngulp.task('start:server', () => {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'development';\n    config = require(`./${serverPath}/config/environment`);\n    nodemon(`-w ${serverPath} ${serverPath}`)\n        .on('log', onServerLog);\n});\n\ngulp.task('start:server:prod', () => {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'production';\n    config = require(`./${paths.dist}/${serverPath}/config/environment`);\n    nodemon(`-w ${paths.dist}/${serverPath} ${paths.dist}/${serverPath}`)\n        .on('log', onServerLog);\n});\n\ngulp.task('start:server:debug', () => {\n    process.env.NODE_ENV = process.env.NODE_ENV || 'development';\n    config = require(`./${serverPath}/config/environment`);\n    // nodemon(`-w ${serverPath} --debug=5858 --debug-brk ${serverPath}`)\n    nodemon(`-w ${serverPath} --inspect --debug-brk ${serverPath}`)\n        .on('log', onServerLog);\n});\n\ngulp.task('watch', () => {\n    var testFiles = _.union(paths.client.test, paths.server.test.unit, paths.server.test.integration);\n\n    plugins.watch(_.union(paths.server.scripts, testFiles))\n        .pipe(plugins.plumber())\n        .pipe(lintServerScripts());\n\n    plugins.watch(_.union(paths.server.test.unit, paths.server.test.integration))\n        .pipe(plugins.plumber())\n        .pipe(lintServerTestScripts());\n});\n\ngulp.task('serve', cb => {\n    runSequence(\n        [\n            'clean:tmp',\n            'lint:scripts',\n            'inject',\n            'copy:fonts:dev',\n            'env:all',\n            'typings'\n        ],\n        // 'webpack:dev',\n        ['start:server', 'start:client'],\n        'watch',\n        cb\n    );\n});\n\ngulp.task('serve:debug', cb => {\n    runSequence(\n        [\n            'clean:tmp',\n            'lint:scripts',\n            'inject',\n            'copy:fonts:dev',\n            'env:all',\n            'typings'\n        ],\n        'webpack:dev',\n        ['start:server:debug', 'start:client'],\n        'watch',\n        cb\n    );\n});\n\ngulp.task('serve:dist', cb => {\n    runSequence(\n        'build',\n        'env:all',\n        'env:prod',\n        ['start:server:prod', 'start:client'],\n        cb);\n});\n\ngulp.task('test', cb => {\n    return runSequence('test:server', 'test:client', cb);\n});\n\ngulp.task('test:server', cb => {\n    runSequence(\n        'env:all',\n        'env:test',\n        'mocha:unit',\n        'mocha:integration',\n        cb);\n});\n\ngulp.task('mocha:unit', () => {\n    return gulp.src(paths.server.test.unit)\n        .pipe(mocha());\n});\n\ngulp.task('mocha:integration', () => {\n    return gulp.src(paths.server.test.integration)\n        .pipe(mocha());\n});\n\ngulp.task('test:server:coverage', cb => {\n  runSequence('coverage:pre',\n              'env:all',\n              'env:test',\n              'coverage:unit',\n              'coverage:integration',\n              cb);\n});\n\ngulp.task('coverage:pre', () => {\n  return gulp.src(paths.server.scripts)\n    // Covering files\n    .pipe(plugins.istanbul({\n        instrumenter: Instrumenter, // Use the isparta instrumenter (code coverage for ES6)\n        includeUntested: true\n    }))\n    // Force `require` to return covered files\n    .pipe(plugins.istanbul.hookRequire());\n});\n\ngulp.task('coverage:unit', () => {\n    return gulp.src(paths.server.test.unit)\n        .pipe(mocha())\n        .pipe(istanbul())\n        // Creating the reports after tests ran\n});\n\ngulp.task('coverage:integration', () => {\n    return gulp.src(paths.server.test.integration)\n        .pipe(mocha())\n        .pipe(istanbul())\n        // Creating the reports after tests ran\n});\n\n// Downloads the selenium webdriver\ngulp.task('webdriver_update', webdriver_update);\n\ngulp.task('test:e2e', ['webpack:e2e', 'env:all', 'env:test', 'start:server', 'webdriver_update'], cb => {\n    gulp.src(paths.client.e2e)\n        .pipe(protractor({\n            configFile: 'protractor.conf.js',\n        }))\n        .on('error', e => { throw e })\n        .on('end', () => { process.exit() });\n});\n\ngulp.task('test:client', done => {\n    new KarmaServer({\n      configFile: `${__dirname}/${paths.karma}`,\n      singleRun: true\n    }, err => {\n        done(err);\n        process.exit(err);\n    }).start();\n});\n\n/********************\n * Build\n ********************/\n\ngulp.task('build', cb => {\n    runSequence(\n        [\n            'clean:dist',\n            'clean:tmp'\n        ],\n        'inject',\n        'transpile:server',\n        [\n            'build:images',\n            'typings'\n        ],\n        [\n            'copy:extras',\n            'copy:assets',\n            'copy:fonts:dist',\n            'copy:server',\n            'webpack:dist'\n        ],\n        'revReplaceWebpack',\n        cb);\n});\n\ngulp.task('clean:dist', () => del([`${paths.dist}/!(.git*|.openshift|Procfile)**`], {dot: true}));\n\ngulp.task('build:images', () => {\n    return gulp.src(paths.client.images)\n        .pipe(plugins.imagemin([\n            plugins.imagemin.optipng({optimizationLevel: 5}),\n            plugins.imagemin.jpegtran({progressive: true}),\n            plugins.imagemin.gifsicle({interlaced: true}),\n            plugins.imagemin.svgo({plugins: [{removeViewBox: false}]})\n        ]))\n        .pipe(plugins.rev())\n        .pipe(gulp.dest(`${paths.dist}/${clientPath}/assets/images`))\n        .pipe(plugins.rev.manifest(`${paths.dist}/${paths.client.revManifest}`, {\n            base: `${paths.dist}/${clientPath}/assets`,\n            merge: true\n        }))\n        .pipe(gulp.dest(`${paths.dist}/${clientPath}/assets`));\n});\n\ngulp.task('revReplaceWebpack', function() {\n    return gulp.src('dist/client/app.*.js')\n        .pipe(plugins.revReplace({manifest: gulp.src(`${paths.dist}/${paths.client.revManifest}`)}))\n        .pipe(gulp.dest('dist/client'));\n});\n\ngulp.task('copy:extras', () => {\n    return gulp.src([\n        `${clientPath}/favicon.ico`,\n        `${clientPath}/robots.txt`,\n        `${clientPath}/.htaccess`\n    ], { dot: true })\n        .pipe(gulp.dest(`${paths.dist}/${clientPath}`));\n});\n\n/**\n * turns 'bootstrap/fonts/font.woff' into 'bootstrap/font.woff'\n */\nfunction flatten() {\n    return through2.obj(function(file, enc, next) {\n        if(!file.isDirectory()) {\n            try {\n                let dir = path.dirname(file.relative).split(path.sep)[0];\n                let fileName = path.normalize(path.basename(file.path));\n                file.path = path.join(file.base, path.join(dir, fileName));\n                this.push(file);\n            } catch(e) {\n                this.emit('error', new Error(e));\n            }\n        }\n        next();\n    });\n}\ngulp.task('copy:fonts:dev', () => {\n    return gulp.src('node_modules/{bootstrap,font-awesome}/fonts/*')\n        .pipe(flatten())\n        .pipe(gulp.dest(`${clientPath}/assets/fonts`));\n});\ngulp.task('copy:fonts:dist', () => {\n    return gulp.src('node_modules/{bootstrap,font-awesome}/fonts/*')\n        .pipe(flatten())\n        .pipe(gulp.dest(`${paths.dist}/${clientPath}/assets/fonts`));\n});\n\ngulp.task('copy:assets', () => {\n    return gulp.src([paths.client.assets, '!' + paths.client.images])\n        .pipe(gulp.dest(`${paths.dist}/${clientPath}/assets`));\n});\n\ngulp.task('copy:server', () => {\n    return gulp.src([\n        'package.json'\n    ], {cwdbase: true})\n        .pipe(gulp.dest(paths.dist));\n});\n\n/********************\n * Grunt ported tasks\n ********************/\n\ngrunt.initConfig({\n    buildcontrol: {\n        options: {\n            dir: paths.dist,\n            commit: true,\n            push: true,\n            connectCommits: false,\n            message: 'Built %sourceName% from commit %sourceCommit% on branch %sourceBranch%'\n        },\n        heroku: {\n            options: {\n                remote: 'heroku',\n                branch: 'master'\n            }\n        },\n        openshift: {\n            options: {\n                remote: 'openshift',\n                branch: 'master'\n            }\n        }\n    }\n});\n\ngrunt.loadNpmTasks('grunt-build-control');\n\ngulp.task('buildcontrol:heroku', function(done) {\n    grunt.tasks(\n        ['buildcontrol:heroku'],    //you can add more grunt tasks in this array\n        {gruntfile: false}, //don't look for a Gruntfile - there is none. :-)\n        function() {done();}\n    );\n});\ngulp.task('buildcontrol:openshift', function(done) {\n    grunt.tasks(\n        ['buildcontrol:openshift'],    //you can add more grunt tasks in this array\n        {gruntfile: false}, //don't look for a Gruntfile - there is none. :-)\n        function() {done();}\n    );\n});\n"
      ]
    },
    "mtime": 1507831000225
  },
  "{\"filename\":\"/root/webpack.make.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/webpack.make.js",
      "filenameRelative": "/root/webpack.make.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "webpack.make.js",
      "sourceFileName": "webpack.make.js",
      "sourceRoot": "/root",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "webpack.make"
    },
    "ignored": false,
    "code": "'use strict';\n/*eslint-env node*/\n\nvar webpack = require('webpack');\nvar autoprefixer = require('autoprefixer');\nvar HtmlWebpackPlugin = require('html-webpack-plugin');\nvar HtmlWebpackHarddiskPlugin = require('html-webpack-harddisk-plugin');\nvar ExtractTextPlugin = require('extract-text-webpack-plugin');\nvar CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;\nvar fs = require('fs');\nvar path = require('path');\nvar ForkCheckerPlugin = require('awesome-typescript-loader').ForkCheckerPlugin;\n\nmodule.exports = function makeWebpackConfig(options) {\n    /**\n     * Environment type\n     * BUILD is for generating minified builds\n     * TEST is for generating test builds\n     */\n    var BUILD = !!options.BUILD;\n    var TEST = !!options.TEST;\n    var E2E = !!options.E2E;\n    var DEV = !!options.DEV;\n\n    /**\n     * Config\n     * Reference: http://webpack.github.io/docs/configuration.html\n     * This is the object where all configuration gets set\n     */\n    var config = {};\n\n    /**\n     * Entry\n     * Reference: http://webpack.github.io/docs/configuration.html#entry\n     * Should be an empty object if it's generating a test build\n     * Karma will set this when it's a test build\n     */\n    if (TEST) {\n        config.entry = {};\n    } else {\n        config.entry = {\n            app: './client/app/app.ts',\n            polyfills: './client/polyfills.ts',\n            vendor: ['angular', 'angular-animate', 'angular-aria', 'angular-cookies', 'angular-resource', 'angular-sanitize', 'angular-ui-bootstrap', 'angular-ui-router', 'lodash']\n        };\n    }\n\n    /**\n     * Output\n     * Reference: http://webpack.github.io/docs/configuration.html#output\n     * Should be an empty object if it's generating a test build\n     * Karma will handle setting it up for you when it's a test build\n     */\n    if (TEST) {\n        config.output = {};\n    } else {\n        config.output = {\n            // Absolute output directory\n            path: BUILD ? path.join(__dirname, '/dist/client/') : path.join(__dirname, '/.tmp/'),\n\n            // Output path from the view of the page\n            // Uses webpack-dev-server in development\n            publicPath: BUILD || DEV || E2E ? '/' : 'http://localhost:' + 8080 + '/',\n            //publicPath: BUILD ? '/' : 'http://localhost:' + env.port + '/',\n\n            // Filename for entry points\n            // Only adds hash in build mode\n            filename: BUILD ? '[name].[hash].js' : '[name].bundle.js',\n\n            // Filename for non-entry points\n            // Only adds hash in build mode\n            chunkFilename: BUILD ? '[name].[hash].js' : '[name].bundle.js'\n        };\n    }\n\n    config.resolve = {\n        modulesDirectories: ['node_modules'],\n        extensions: ['', '.js', '.ts']\n    };\n\n    if (TEST) {\n        config.resolve = {\n            modulesDirectories: ['node_modules'],\n            extensions: ['', '.js', '.ts']\n        };\n    }\n\n    /**\n     * Devtool\n     * Reference: http://webpack.github.io/docs/configuration.html#devtool\n     * Type of sourcemap to use per build type\n     */\n    if (TEST) {\n        config.devtool = 'inline-source-map';\n    } else if (BUILD || DEV) {\n        config.devtool = 'source-map';\n    } else {\n        config.devtool = 'eval';\n    }\n\n    /**\n     * Loaders\n     * Reference: http://webpack.github.io/docs/configuration.html#module-loaders\n     * List: http://webpack.github.io/docs/list-of-loaders.html\n     * This handles most of the magic responsible for converting modules\n     */\n\n    config.sassLoader = {\n        outputStyle: 'compressed',\n        precision: 10,\n        sourceComments: false\n    };\n\n    // Initialize module\n    config.module = {\n        preLoaders: [],\n        loaders: [{\n            // JS LOADER\n            // Reference: https://github.com/babel/babel-loader\n            // Transpile .js files using babel-loader\n            // Compiles ES6 and ES7 into ES5 code\n            test: /\\.js$/,\n            loader: 'babel',\n            include: [path.resolve(__dirname, 'client/'), path.resolve(__dirname, 'node_modules/lodash-es/')]\n        }, {\n            // TS LOADER\n            // Reference: https://github.com/s-panferov/awesome-typescript-loader\n            // Transpile .ts files using awesome-typescript-loader\n            test: /\\.ts$/,\n            loader: 'awesome-typescript-loader',\n            query: {\n                tsconfig: path.resolve(__dirname, 'tsconfig.client.json')\n            },\n            include: [path.resolve(__dirname, 'client/')]\n        }, {\n            // ASSET LOADER\n            // Reference: https://github.com/webpack/file-loader\n            // Copy png, jpg, jpeg, gif, svg, woff, woff2, ttf, eot files to output\n            // Rename the file using the asset hash\n            // Pass along the updated reference to your code\n            // You can add here any file extension you want to get copied to your output\n            test: /\\.(png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)([\\?]?.*)$/,\n            loader: 'file'\n        }, {\n\n            // HTML LOADER\n            // Reference: https://github.com/webpack/raw-loader\n            // Allow loading html through js\n            test: /\\.html$/,\n            loader: 'raw'\n        }, {\n            // CSS LOADER\n            // Reference: https://github.com/webpack/css-loader\n            // Allow loading css through js\n            //\n            // Reference: https://github.com/postcss/postcss-loader\n            // Postprocess your css with PostCSS plugins\n            test: /\\.css$/,\n            loader: !TEST\n            // Reference: https://github.com/webpack/extract-text-webpack-plugin\n            // Extract css files in production builds\n            //\n            // Reference: https://github.com/webpack/style-loader\n            // Use style-loader in development for hot-loading\n            ? ExtractTextPlugin.extract('style', 'css!postcss')\n            // Reference: https://github.com/webpack/null-loader\n            // Skip loading css in test mode\n            : 'null'\n        }, {\n            // SASS LOADER\n            // Reference: https://github.com/jtangelder/sass-loader\n            test: /\\.(scss|sass)$/,\n            loaders: ['style', 'css', 'sass'],\n            include: [path.resolve(__dirname, 'node_modules/bootstrap-sass/assets/stylesheets/*.scss'), path.resolve(__dirname, 'client/app/app.scss')]\n\n        }]\n    };\n\n    config.module.postLoaders = [{\n        test: /\\.ts$/,\n        loader: 'ng-annotate?single_quotes'\n    }];\n\n    //TODO: TS Instrumenter\n\n    /**\n     * PostCSS\n     * Reference: https://github.com/postcss/autoprefixer-core\n     * Add vendor prefixes to your css\n     */\n    config.postcss = [autoprefixer({\n        browsers: ['last 2 version']\n    })];\n\n    /**\n     * Plugins\n     * Reference: http://webpack.github.io/docs/configuration.html#plugins\n     * List: http://webpack.github.io/docs/list-of-plugins.html\n     */\n    config.plugins = [\n    /*\n     * Plugin: ForkCheckerPlugin\n     * Description: Do type checking in a separate process, so webpack don't need to wait.\n     *\n     * See: https://github.com/s-panferov/awesome-typescript-loader#forkchecker-boolean-defaultfalse\n     */\n    new ForkCheckerPlugin(),\n\n    // Reference: https://github.com/webpack/extract-text-webpack-plugin\n    // Extract css files\n    // Disabled when in test mode or not in build mode\n    new ExtractTextPlugin('[name].[hash].css', {\n        disable: !BUILD || TEST\n    })];\n\n    if (!TEST) {\n        config.plugins.push(new CommonsChunkPlugin({\n            name: 'vendor',\n\n            // filename: \"vendor.js\"\n            // (Give the chunk a different name)\n\n            minChunks: Infinity\n            // (with more entries, this ensures that no other module\n            //  goes into the vendor chunk)\n        }));\n    }\n\n    // Skip rendering index.html in test mode\n    // Reference: https://github.com/ampedandwired/html-webpack-plugin\n    // Render index.html\n    if (!TEST) {\n        var htmlConfig = {\n            template: 'client/_index.html',\n            filename: '../client/index.html',\n            alwaysWriteToDisk: true\n        };\n        config.plugins.push(new HtmlWebpackPlugin(htmlConfig), new HtmlWebpackHarddiskPlugin());\n    }\n\n    // Add build specific plugins\n    if (BUILD) {\n        config.plugins.push(\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#noerrorsplugin\n        // Only emit files when there are no errors\n        new webpack.NoErrorsPlugin(),\n\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#dedupeplugin\n        // Dedupe modules in the output\n        new webpack.optimize.DedupePlugin(),\n\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin\n        // Minify all javascript, switch loaders to minimizing mode\n        new webpack.optimize.UglifyJsPlugin({\n            mangle: false,\n            output: {\n                comments: false\n            },\n            compress: {\n                warnings: false\n            }\n        }),\n\n        // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n        // Define free global variables\n        new webpack.DefinePlugin({\n            'process.env': {\n                NODE_ENV: '\"production\"'\n            }\n        }));\n    }\n\n    if (DEV) {\n        config.plugins.push(\n        // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n        // Define free global variables\n        new webpack.DefinePlugin({\n            'process.env': {\n                NODE_ENV: '\"development\"'\n            }\n        }));\n    }\n\n    config.cache = DEV;\n\n    if (TEST) {\n        config.stats = {\n            colors: true,\n            reasons: true\n        };\n        config.debug = false;\n    }\n\n    /**\n     * Dev server configuration\n     * Reference: http://webpack.github.io/docs/configuration.html#devserver\n     * Reference: http://webpack.github.io/docs/webpack-dev-server.html\n     */\n    config.devServer = {\n        contentBase: './client/',\n        stats: {\n            modules: false,\n            cached: false,\n            colors: true,\n            chunk: false\n        }\n    };\n\n    config.node = {\n        global: 'window',\n        process: true,\n        crypto: 'empty',\n        clearImmediate: false,\n        setImmediate: false\n    };\n\n    return config;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2subWFrZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrIiwicmVxdWlyZSIsImF1dG9wcmVmaXhlciIsIkh0bWxXZWJwYWNrUGx1Z2luIiwiSHRtbFdlYnBhY2tIYXJkZGlza1BsdWdpbiIsIkV4dHJhY3RUZXh0UGx1Z2luIiwiQ29tbW9uc0NodW5rUGx1Z2luIiwib3B0aW1pemUiLCJmcyIsInBhdGgiLCJGb3JrQ2hlY2tlclBsdWdpbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJtYWtlV2VicGFja0NvbmZpZyIsIm9wdGlvbnMiLCJCVUlMRCIsIlRFU1QiLCJFMkUiLCJERVYiLCJjb25maWciLCJlbnRyeSIsImFwcCIsInBvbHlmaWxscyIsInZlbmRvciIsIm91dHB1dCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwdWJsaWNQYXRoIiwiZmlsZW5hbWUiLCJjaHVua0ZpbGVuYW1lIiwicmVzb2x2ZSIsIm1vZHVsZXNEaXJlY3RvcmllcyIsImV4dGVuc2lvbnMiLCJkZXZ0b29sIiwic2Fzc0xvYWRlciIsIm91dHB1dFN0eWxlIiwicHJlY2lzaW9uIiwic291cmNlQ29tbWVudHMiLCJwcmVMb2FkZXJzIiwibG9hZGVycyIsInRlc3QiLCJsb2FkZXIiLCJpbmNsdWRlIiwicXVlcnkiLCJ0c2NvbmZpZyIsImV4dHJhY3QiLCJwb3N0TG9hZGVycyIsInBvc3Rjc3MiLCJicm93c2VycyIsInBsdWdpbnMiLCJkaXNhYmxlIiwicHVzaCIsIm5hbWUiLCJtaW5DaHVua3MiLCJJbmZpbml0eSIsImh0bWxDb25maWciLCJ0ZW1wbGF0ZSIsImFsd2F5c1dyaXRlVG9EaXNrIiwiTm9FcnJvcnNQbHVnaW4iLCJEZWR1cGVQbHVnaW4iLCJVZ2xpZnlKc1BsdWdpbiIsIm1hbmdsZSIsImNvbW1lbnRzIiwiY29tcHJlc3MiLCJ3YXJuaW5ncyIsIkRlZmluZVBsdWdpbiIsIk5PREVfRU5WIiwiY2FjaGUiLCJzdGF0cyIsImNvbG9ycyIsInJlYXNvbnMiLCJkZWJ1ZyIsImRldlNlcnZlciIsImNvbnRlbnRCYXNlIiwibW9kdWxlcyIsImNhY2hlZCIsImNodW5rIiwibm9kZSIsImdsb2JhbCIsInByb2Nlc3MiLCJjcnlwdG8iLCJjbGVhckltbWVkaWF0ZSIsInNldEltbWVkaWF0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFDQSxJQUFJQSxVQUFVQyxRQUFRLFNBQVIsQ0FBZDtBQUNBLElBQUlDLGVBQWVELFFBQVEsY0FBUixDQUFuQjtBQUNBLElBQUlFLG9CQUFvQkYsUUFBUSxxQkFBUixDQUF4QjtBQUNBLElBQUlHLDRCQUE0QkgsUUFBUSw4QkFBUixDQUFoQztBQUNBLElBQUlJLG9CQUFvQkosUUFBUSw2QkFBUixDQUF4QjtBQUNBLElBQUlLLHFCQUFxQk4sUUFBUU8sUUFBUixDQUFpQkQsa0JBQTFDO0FBQ0EsSUFBSUUsS0FBS1AsUUFBUSxJQUFSLENBQVQ7QUFDQSxJQUFJUSxPQUFPUixRQUFRLE1BQVIsQ0FBWDtBQUNBLElBQUlTLG9CQUFvQlQsUUFBUSwyQkFBUixFQUFxQ1MsaUJBQTdEOztBQUVBQyxPQUFPQyxPQUFQLEdBQWlCLFNBQVNDLGlCQUFULENBQTJCQyxPQUEzQixFQUFvQztBQUNqRDs7Ozs7QUFLQSxRQUFJQyxRQUFRLENBQUMsQ0FBQ0QsUUFBUUMsS0FBdEI7QUFDQSxRQUFJQyxPQUFPLENBQUMsQ0FBQ0YsUUFBUUUsSUFBckI7QUFDQSxRQUFJQyxNQUFNLENBQUMsQ0FBQ0gsUUFBUUcsR0FBcEI7QUFDQSxRQUFJQyxNQUFNLENBQUMsQ0FBQ0osUUFBUUksR0FBcEI7O0FBRUE7Ozs7O0FBS0EsUUFBSUMsU0FBUyxFQUFiOztBQUVBOzs7Ozs7QUFNQSxRQUFHSCxJQUFILEVBQVM7QUFDTEcsZUFBT0MsS0FBUCxHQUFlLEVBQWY7QUFDSCxLQUZELE1BRU87QUFDSEQsZUFBT0MsS0FBUCxHQUFlO0FBQ1hDLGlCQUFLLHFCQURNO0FBRVhDLHVCQUFXLHVCQUZBO0FBR1hDLG9CQUFRLENBQ0osU0FESSxFQUVKLGlCQUZJLEVBR0osY0FISSxFQUlKLGlCQUpJLEVB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O0FBSVZDLHdCQUFnQixLQUpOO0FBS1ZDLHNCQUFjO0FBTEosS0FBZDs7QUFRQSxXQUFPL0QsTUFBUDtBQUNILENBbFZEIiwiZmlsZSI6IndlYnBhY2subWFrZS5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8qZXNsaW50LWVudiBub2RlKi9cbnZhciB3ZWJwYWNrID0gcmVxdWlyZSgnd2VicGFjaycpO1xudmFyIGF1dG9wcmVmaXhlciA9IHJlcXVpcmUoJ2F1dG9wcmVmaXhlcicpO1xudmFyIEh0bWxXZWJwYWNrUGx1Z2luID0gcmVxdWlyZSgnaHRtbC13ZWJwYWNrLXBsdWdpbicpO1xudmFyIEh0bWxXZWJwYWNrSGFyZGRpc2tQbHVnaW4gPSByZXF1aXJlKCdodG1sLXdlYnBhY2staGFyZGRpc2stcGx1Z2luJyk7XG52YXIgRXh0cmFjdFRleHRQbHVnaW4gPSByZXF1aXJlKCdleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4nKTtcbnZhciBDb21tb25zQ2h1bmtQbHVnaW4gPSB3ZWJwYWNrLm9wdGltaXplLkNvbW1vbnNDaHVua1BsdWdpbjtcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBGb3JrQ2hlY2tlclBsdWdpbiA9IHJlcXVpcmUoJ2F3ZXNvbWUtdHlwZXNjcmlwdC1sb2FkZXInKS5Gb3JrQ2hlY2tlclBsdWdpbjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYWtlV2VicGFja0NvbmZpZyhvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogRW52aXJvbm1lbnQgdHlwZVxuICAgICAqIEJVSUxEIGlzIGZvciBnZW5lcmF0aW5nIG1pbmlmaWVkIGJ1aWxkc1xuICAgICAqIFRFU1QgaXMgZm9yIGdlbmVyYXRpbmcgdGVzdCBidWlsZHNcbiAgICAgKi9cbiAgICB2YXIgQlVJTEQgPSAhIW9wdGlvbnMuQlVJTEQ7XG4gICAgdmFyIFRFU1QgPSAhIW9wdGlvbnMuVEVTVDtcbiAgICB2YXIgRTJFID0gISFvcHRpb25zLkUyRTtcbiAgICB2YXIgREVWID0gISFvcHRpb25zLkRFVjtcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ1xuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sXG4gICAgICogVGhpcyBpcyB0aGUgb2JqZWN0IHdoZXJlIGFsbCBjb25maWd1cmF0aW9uIGdldHMgc2V0XG4gICAgICovXG4gICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogRW50cnlcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2NvbmZpZ3VyYXRpb24uaHRtbCNlbnRyeVxuICAgICAqIFNob3VsZCBiZSBhbiBlbXB0eSBvYmplY3QgaWYgaXQncyBnZW5lcmF0aW5nIGEgdGVzdCBidWlsZFxuICAgICAqIEthcm1hIHdpbGwgc2V0IHRoaXMgd2hlbiBpdCdzIGEgdGVzdCBidWlsZFxuICAgICAqL1xuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLmVudHJ5ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmVudHJ5ID0ge1xuICAgICAgICAgICAgYXBwOiAnLi9jbGllbnQvYXBwL2FwcC50cycsXG4gICAgICAgICAgICBwb2x5ZmlsbHM6ICcuL2NsaWVudC9wb2x5ZmlsbHMudHMnLFxuICAgICAgICAgICAgdmVuZG9yOiBbXG4gICAgICAgICAgICAgICAgJ2FuZ3VsYXInLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWFuaW1hdGUnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWFyaWEnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWNvb2tpZXMnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXJlc291cmNlJyxcblxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXNhbml0aXplJyxcblxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXVpLWJvb3RzdHJhcCcsXG4gICAgICAgICAgICAgICAgJ2FuZ3VsYXItdWktcm91dGVyJyxcbiAgICAgICAgICAgICAgICAnbG9kYXNoJ1xuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE91dHB1dFxuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sI291dHB1dFxuICAgICAqIFNob3VsZCBiZSBhbiBlbXB0eSBvYmplY3QgaWYgaXQncyBnZW5lcmF0aW5nIGEgdGVzdCBidWlsZFxuICAgICAqIEthcm1hIHdpbGwgaGFuZGxlIHNldHRpbmcgaXQgdXAgZm9yIHlvdSB3aGVuIGl0J3MgYSB0ZXN0IGJ1aWxkXG4gICAgICovXG4gICAgaWYoVEVTVCkge1xuICAgICAgICBjb25maWcub3V0cHV0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLm91dHB1dCA9IHtcbiAgICAgICAgICAgIC8vIEFic29sdXRlIG91dHB1dCBkaXJlY3RvcnlcbiAgICAgICAgICAgIHBhdGg6IEJVSUxEID8gcGF0aC5qb2luKF9fZGlybmFtZSwgJy9kaXN0L2NsaWVudC8nKSA6IHBhdGguam9pbihfX2Rpcm5hbWUsICcvLnRtcC8nKSxcblxuICAgICAgICAgICAgLy8gT3V0cHV0IHBhdGggZnJvbSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gVXNlcyB3ZWJwYWNrLWRldi1zZXJ2ZXIgaW4gZGV2ZWxvcG1lbnRcbiAgICAgICAgICAgIHB1YmxpY1BhdGg6IEJVSUxEIHx8IERFViB8fCBFMkUgPyAnLycgOiBgaHR0cDovL2xvY2FsaG9zdDokezgwODB9L2AsXG4gICAgICAgICAgICAvL3B1YmxpY1BhdGg6IEJVSUxEID8gJy8nIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6JyArIGVudi5wb3J0ICsgJy8nLFxuXG4gICAgICAgICAgICAvLyBGaWxlbmFtZSBmb3IgZW50cnkgcG9pbnRzXG4gICAgICAgICAgICAvLyBPbmx5IGFkZHMgaGFzaCBpbiBidWlsZCBtb2RlXG4gICAgICAgICAgICBmaWxlbmFtZTogQlVJTEQgPyAnW25hbWVdLltoYXNoXS5qcycgOiAnW25hbWVdLmJ1bmRsZS5qcycsXG5cbiAgICAgICAgICAgIC8vIEZpbGVuYW1lIGZvciBub24tZW50cnkgcG9pbnRzXG4gICAgICAgICAgICAvLyBPbmx5IGFkZHMgaGFzaCBpbiBidWlsZCBtb2RlXG4gICAgICAgICAgICBjaHVua0ZpbGVuYW1lOiBCVUlMRCA/ICdbbmFtZV0uW2hhc2hdLmpzJyA6ICdbbmFtZV0uYnVuZGxlLmpzJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbmZpZy5yZXNvbHZlID0ge1xuICAgICAgICBtb2R1bGVzRGlyZWN0b3JpZXM6IFsnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgIGV4dGVuc2lvbnM6IFsnJywgJy5qcycsICcudHMnXVxuICAgIH07XG5cbiAgICBpZihURVNUKSB7XG4gICAgICAgIGNvbmZpZy5yZXNvbHZlID0ge1xuICAgICAgICAgICAgbW9kdWxlc0RpcmVjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgJ25vZGVfbW9kdWxlcydcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHRlbnNpb25zOiBbJycsICcuanMnLCAnLnRzJ11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXZ0b29sXG4gICAgICogUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9jb25maWd1cmF0aW9uLmh0bWwjZGV2dG9vbFxuICAgICAqIFR5cGUgb2Ygc291cmNlbWFwIHRvIHVzZSBwZXIgYnVpbGQgdHlwZVxuICAgICAqL1xuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnaW5saW5lLXNvdXJjZS1tYXAnO1xuICAgIH0gZWxzZSBpZihCVUlMRCB8fCBERVYpIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnc291cmNlLW1hcCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnZXZhbCc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZGVyc1xuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sI21vZHVsZS1sb2FkZXJzXG4gICAgICogTGlzdDogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1sb2FkZXJzLmh0bWxcbiAgICAgKiBUaGlzIGhhbmRsZXMgbW9zdCBvZiB0aGUgbWFnaWMgcmVzcG9uc2libGUgZm9yIGNvbnZlcnRpbmcgbW9kdWxlc1xuICAgICAqL1xuXG4gICAgY29uZmlnLnNhc3NMb2FkZXIgPSB7XG4gICAgICAgIG91dHB1dFN0eWxlOiAnY29tcHJlc3NlZCcsXG4gICAgICAgIHByZWNpc2lvbjogMTAsXG4gICAgICAgIHNvdXJjZUNvbW1lbnRzOiBmYWxzZVxuICAgIH07XG5cblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBtb2R1bGVcbiAgICBjb25maWcubW9kdWxlID0ge1xuICAgICAgICBwcmVMb2FkZXJzOiBbXSxcbiAgICAgICAgbG9hZGVyczogW3tcbiAgICAgICAgICAgIC8vIEpTIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwtbG9hZGVyXG4gICAgICAgICAgICAvLyBUcmFuc3BpbGUgLmpzIGZpbGVzIHVzaW5nIGJhYmVsLWxvYWRlclxuICAgICAgICAgICAgLy8gQ29tcGlsZXMgRVM2IGFuZCBFUzcgaW50byBFUzUgY29kZVxuICAgICAgICAgICAgdGVzdDogL1xcLmpzJC8sXG4gICAgICAgICAgICBsb2FkZXI6ICdiYWJlbCcsXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2NsaWVudC8nKSxcbiAgICAgICAgICAgICAgICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy8nKVxuICAgICAgICAgICAgXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBUUyBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL3MtcGFuZmVyb3YvYXdlc29tZS10eXBlc2NyaXB0LWxvYWRlclxuICAgICAgICAgICAgLy8gVHJhbnNwaWxlIC50cyBmaWxlcyB1c2luZyBhd2Vzb21lLXR5cGVzY3JpcHQtbG9hZGVyXG4gICAgICAgICAgICB0ZXN0OiAvXFwudHMkLyxcbiAgICAgICAgICAgIGxvYWRlcjogJ2F3ZXNvbWUtdHlwZXNjcmlwdC1sb2FkZXInLFxuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICB0c2NvbmZpZzogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ3RzY29uZmlnLmNsaWVudC5qc29uJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2NsaWVudC8nKVxuICAgICAgICAgICAgXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBBU1NFVCBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svZmlsZS1sb2FkZXJcbiAgICAgICAgICAgIC8vIENvcHkgcG5nLCBqcGcsIGpwZWcsIGdpZiwgc3ZnLCB3b2ZmLCB3b2ZmMiwgdHRmLCBlb3QgZmlsZXMgdG8gb3V0cHV0XG4gICAgICAgICAgICAvLyBSZW5hbWUgdGhlIGZpbGUgdXNpbmcgdGhlIGFzc2V0IGhhc2hcbiAgICAgICAgICAgIC8vIFBhc3MgYWxvbmcgdGhlIHVwZGF0ZWQgcmVmZXJlbmNlIHRvIHlvdXIgY29kZVxuICAgICAgICAgICAgLy8gWW91IGNhbiBhZGQgaGVyZSBhbnkgZmlsZSBleHRlbnNpb24geW91IHdhbnQgdG8gZ2V0IGNvcGllZCB0byB5b3VyIG91dHB1dFxuICAgICAgICAgICAgdGVzdDogL1xcLihwbmd8anBnfGpwZWd8Z2lmfHN2Z3x3b2ZmfHdvZmYyfHR0Znxlb3QpKFtcXD9dPy4qKSQvLFxuICAgICAgICAgICAgbG9hZGVyOiAnZmlsZSdcbiAgICAgICAgfSwge1xuXG4gICAgICAgICAgICAvLyBIVE1MIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9yYXctbG9hZGVyXG4gICAgICAgICAgICAvLyBBbGxvdyBsb2FkaW5nIGh0bWwgdGhyb3VnaCBqc1xuICAgICAgICAgICAgdGVzdDogL1xcLmh0bWwkLyxcbiAgICAgICAgICAgIGxvYWRlcjogJ3JhdydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLy8gQ1NTIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9jc3MtbG9hZGVyXG4gICAgICAgICAgICAvLyBBbGxvdyBsb2FkaW5nIGNzcyB0aHJvdWdoIGpzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vcG9zdGNzcy9wb3N0Y3NzLWxvYWRlclxuICAgICAgICAgICAgLy8gUG9zdHByb2Nlc3MgeW91ciBjc3Mgd2l0aCBQb3N0Q1NTIHBsdWdpbnNcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5jc3MkLyxcbiAgICAgICAgICAgIGxvYWRlcjogIVRFU1RcbiAgICAgICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL2V4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgY3NzIGZpbGVzIGluIHByb2R1Y3Rpb24gYnVpbGRzXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3N0eWxlLWxvYWRlclxuICAgICAgICAgICAgICAgIC8vIFVzZSBzdHlsZS1sb2FkZXIgaW4gZGV2ZWxvcG1lbnQgZm9yIGhvdC1sb2FkaW5nXG4gICAgICAgICAgICAgICAgPyBFeHRyYWN0VGV4dFBsdWdpbi5leHRyYWN0KCdzdHlsZScsICdjc3MhcG9zdGNzcycpXG4gICAgICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9udWxsLWxvYWRlclxuICAgICAgICAgICAgICAgIC8vIFNraXAgbG9hZGluZyBjc3MgaW4gdGVzdCBtb2RlXG4gICAgICAgICAgICAgICAgOiAnbnVsbCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLy8gU0FTUyBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2p0YW5nZWxkZXIvc2Fzcy1sb2FkZXJcbiAgICAgICAgICAgIHRlc3Q6IC9cXC4oc2Nzc3xzYXNzKSQvLFxuICAgICAgICAgICAgbG9hZGVyczogWydzdHlsZScsICdjc3MnLCAnc2FzcyddLFxuICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdub2RlX21vZHVsZXMvYm9vdHN0cmFwLXNhc3MvYXNzZXRzL3N0eWxlc2hlZXRzLyouc2NzcycpLFxuICAgICAgICAgICAgICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdjbGllbnQvYXBwL2FwcC5zY3NzJylcbiAgICAgICAgICAgIF1cblxuXG4gICAgICAgIH1dXG4gICAgfTtcblxuICAgIGNvbmZpZy5tb2R1bGUucG9zdExvYWRlcnMgPSBbe1xuICAgICAgICB0ZXN0OiAvXFwudHMkLyxcbiAgICAgICAgbG9hZGVyOiAnbmctYW5ub3RhdGU/c2luZ2xlX3F1b3RlcydcbiAgICB9XTtcblxuXG4gICAgLy9UT0RPOiBUUyBJbnN0cnVtZW50ZXJcblxuICAgIC8qKlxuICAgICAqIFBvc3RDU1NcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9wb3N0Y3NzL2F1dG9wcmVmaXhlci1jb3JlXG4gICAgICogQWRkIHZlbmRvciBwcmVmaXhlcyB0byB5b3VyIGNzc1xuICAgICAqL1xuICAgIGNvbmZpZy5wb3N0Y3NzID0gW1xuICAgICAgICBhdXRvcHJlZml4ZXIoe1xuICAgICAgICAgICAgYnJvd3NlcnM6IFsnbGFzdCAyIHZlcnNpb24nXVxuICAgICAgICB9KVxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBQbHVnaW5zXG4gICAgICogUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9jb25maWd1cmF0aW9uLmh0bWwjcGx1Z2luc1xuICAgICAqIExpc3Q6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2xpc3Qtb2YtcGx1Z2lucy5odG1sXG4gICAgICovXG4gICAgY29uZmlnLnBsdWdpbnMgPSBbXG4gICAgICAgIC8qXG4gICAgICAgICAqIFBsdWdpbjogRm9ya0NoZWNrZXJQbHVnaW5cbiAgICAgICAgICogRGVzY3JpcHRpb246IERvIHR5cGUgY2hlY2tpbmcgaW4gYSBzZXBhcmF0ZSBwcm9jZXNzLCBzbyB3ZWJwYWNrIGRvbid0IG5lZWQgdG8gd2FpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vcy1wYW5mZXJvdi9hd2Vzb21lLXR5cGVzY3JpcHQtbG9hZGVyI2ZvcmtjaGVja2VyLWJvb2xlYW4tZGVmYXVsdGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBuZXcgRm9ya0NoZWNrZXJQbHVnaW4oKSxcblxuICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL2V4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuICAgICAgICAvLyBFeHRyYWN0IGNzcyBmaWxlc1xuICAgICAgICAvLyBEaXNhYmxlZCB3aGVuIGluIHRlc3QgbW9kZSBvciBub3QgaW4gYnVpbGQgbW9kZVxuICAgICAgICBuZXcgRXh0cmFjdFRleHRQbHVnaW4oJ1tuYW1lXS5baGFzaF0uY3NzJywge1xuICAgICAgICAgICAgZGlzYWJsZTogIUJVSUxEIHx8IFRFU1RcbiAgICAgICAgfSlcbiAgICBdO1xuXG4gICAgaWYoIVRFU1QpIHtcbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChuZXcgQ29tbW9uc0NodW5rUGx1Z2luKHtcbiAgICAgICAgICAgIG5hbWU6ICd2ZW5kb3InLFxuXG4gICAgICAgICAgICAvLyBmaWxlbmFtZTogXCJ2ZW5kb3IuanNcIlxuICAgICAgICAgICAgLy8gKEdpdmUgdGhlIGNodW5rIGEgZGlmZmVyZW50IG5hbWUpXG5cbiAgICAgICAgICAgIG1pbkNodW5rczogSW5maW5pdHlcbiAgICAgICAgICAgIC8vICh3aXRoIG1vcmUgZW50cmllcywgdGhpcyBlbnN1cmVzIHRoYXQgbm8gb3RoZXIgbW9kdWxlXG4gICAgICAgICAgICAvLyAgZ29lcyBpbnRvIHRoZSB2ZW5kb3IgY2h1bmspXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBTa2lwIHJlbmRlcmluZyBpbmRleC5odG1sIGluIHRlc3QgbW9kZVxuICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2FtcGVkYW5kd2lyZWQvaHRtbC13ZWJwYWNrLXBsdWdpblxuICAgIC8vIFJlbmRlciBpbmRleC5odG1sXG4gICAgaWYoIVRFU1QpIHtcbiAgICAgICAgbGV0IGh0bWxDb25maWcgPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ2NsaWVudC9faW5kZXguaHRtbCcsXG4gICAgICAgICAgICBmaWxlbmFtZTogJy4uL2NsaWVudC9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIGFsd2F5c1dyaXRlVG9EaXNrOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChcbiAgICAgICAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oaHRtbENvbmZpZyksXG4gICAgICAgICAgbmV3IEh0bWxXZWJwYWNrSGFyZGRpc2tQbHVnaW4oKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIEFkZCBidWlsZCBzcGVjaWZpYyBwbHVnaW5zXG4gICAgaWYoQlVJTEQpIHtcbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1wbHVnaW5zLmh0bWwjbm9lcnJvcnNwbHVnaW5cbiAgICAgICAgICAgIC8vIE9ubHkgZW1pdCBmaWxlcyB3aGVuIHRoZXJlIGFyZSBubyBlcnJvcnNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLk5vRXJyb3JzUGx1Z2luKCksXG5cbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1wbHVnaW5zLmh0bWwjZGVkdXBlcGx1Z2luXG4gICAgICAgICAgICAvLyBEZWR1cGUgbW9kdWxlcyBpbiB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXcgd2VicGFjay5vcHRpbWl6ZS5EZWR1cGVQbHVnaW4oKSxcblxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCN1Z2xpZnlqc3BsdWdpblxuICAgICAgICAgICAgLy8gTWluaWZ5IGFsbCBqYXZhc2NyaXB0LCBzd2l0Y2ggbG9hZGVycyB0byBtaW5pbWl6aW5nIG1vZGVcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLm9wdGltaXplLlVnbGlmeUpzUGx1Z2luKHtcbiAgICAgICAgICAgICAgICBtYW5nbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgICAgICBjb21tZW50czogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXByZXNzOiB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCNkZWZpbmVwbHVnaW5cbiAgICAgICAgICAgIC8vIERlZmluZSBmcmVlIGdsb2JhbCB2YXJpYWJsZXNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbih7XG4gICAgICAgICAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICAgICAgICAgICBOT0RFX0VOVjogJ1wicHJvZHVjdGlvblwiJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYoREVWKSB7XG4gICAgICAgIGNvbmZpZy5wbHVnaW5zLnB1c2goXG4gICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCNkZWZpbmVwbHVnaW5cbiAgICAgICAgICAgIC8vIERlZmluZSBmcmVlIGdsb2JhbCB2YXJpYWJsZXNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbih7XG4gICAgICAgICAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICAgICAgICAgICBOT0RFX0VOVjogJ1wiZGV2ZWxvcG1lbnRcIidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbmZpZy5jYWNoZSA9IERFVjtcblxuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLnN0YXRzID0ge1xuICAgICAgICAgICAgY29sb3JzOiB0cnVlLFxuICAgICAgICAgICAgcmVhc29uczogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBjb25maWcuZGVidWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXYgc2VydmVyIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2NvbmZpZ3VyYXRpb24uaHRtbCNkZXZzZXJ2ZXJcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL3dlYnBhY2stZGV2LXNlcnZlci5odG1sXG4gICAgICovXG4gICAgY29uZmlnLmRldlNlcnZlciA9IHtcbiAgICAgICAgY29udGVudEJhc2U6ICcuL2NsaWVudC8nLFxuICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgbW9kdWxlczogZmFsc2UsXG4gICAgICAgICAgICBjYWNoZWQ6IGZhbHNlLFxuICAgICAgICAgICAgY29sb3JzOiB0cnVlLFxuICAgICAgICAgICAgY2h1bms6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uZmlnLm5vZGUgPSB7XG4gICAgICAgIGdsb2JhbDogJ3dpbmRvdycsXG4gICAgICAgIHByb2Nlc3M6IHRydWUsXG4gICAgICAgIGNyeXB0bzogJ2VtcHR5JyxcbiAgICAgICAgY2xlYXJJbW1lZGlhdGU6IGZhbHNlLFxuICAgICAgICBzZXRJbW1lZGlhdGU6IGZhbHNlXG4gICAgfTtcblxuICAgIHJldHVybiBjb25maWc7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "webpack.make.js"
      ],
      "names": [
        "webpack",
        "require",
        "autoprefixer",
        "HtmlWebpackPlugin",
        "HtmlWebpackHarddiskPlugin",
        "ExtractTextPlugin",
        "CommonsChunkPlugin",
        "optimize",
        "fs",
        "path",
        "ForkCheckerPlugin",
        "module",
        "exports",
        "makeWebpackConfig",
        "options",
        "BUILD",
        "TEST",
        "E2E",
        "DEV",
        "config",
        "entry",
        "app",
        "polyfills",
        "vendor",
        "output",
        "join",
        "__dirname",
        "publicPath",
        "filename",
        "chunkFilename",
        "resolve",
        "modulesDirectories",
        "extensions",
        "devtool",
        "sassLoader",
        "outputStyle",
        "precision",
        "sourceComments",
        "preLoaders",
        "loaders",
        "test",
        "loader",
        "include",
        "query",
        "tsconfig",
        "extract",
        "postLoaders",
        "postcss",
        "browsers",
        "plugins",
        "disable",
        "push",
        "name",
        "minChunks",
        "Infinity",
        "htmlConfig",
        "template",
        "alwaysWriteToDisk",
        "NoErrorsPlugin",
        "DedupePlugin",
        "UglifyJsPlugin",
        "mangle",
        "comments",
        "compress",
        "warnings",
        "DefinePlugin",
        "NODE_ENV",
        "cache",
        "stats",
        "colors",
        "reasons",
        "debug",
        "devServer",
        "contentBase",
        "modules",
        "cached",
        "chunk",
        "node",
        "global",
        "process",
        "crypto",
        "clearImmediate",
        "setImmediate"
      ],
      "mappings": "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",
      "file": "webpack.make.js",
      "sourceRoot": "/root",
      "sourcesContent": [
        "'use strict';\n/*eslint-env node*/\nvar webpack = require('webpack');\nvar autoprefixer = require('autoprefixer');\nvar HtmlWebpackPlugin = require('html-webpack-plugin');\nvar HtmlWebpackHarddiskPlugin = require('html-webpack-harddisk-plugin');\nvar ExtractTextPlugin = require('extract-text-webpack-plugin');\nvar CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;\nvar fs = require('fs');\nvar path = require('path');\nvar ForkCheckerPlugin = require('awesome-typescript-loader').ForkCheckerPlugin;\n\nmodule.exports = function makeWebpackConfig(options) {\n    /**\n     * Environment type\n     * BUILD is for generating minified builds\n     * TEST is for generating test builds\n     */\n    var BUILD = !!options.BUILD;\n    var TEST = !!options.TEST;\n    var E2E = !!options.E2E;\n    var DEV = !!options.DEV;\n\n    /**\n     * Config\n     * Reference: http://webpack.github.io/docs/configuration.html\n     * This is the object where all configuration gets set\n     */\n    var config = {};\n\n    /**\n     * Entry\n     * Reference: http://webpack.github.io/docs/configuration.html#entry\n     * Should be an empty object if it's generating a test build\n     * Karma will set this when it's a test build\n     */\n    if(TEST) {\n        config.entry = {};\n    } else {\n        config.entry = {\n            app: './client/app/app.ts',\n            polyfills: './client/polyfills.ts',\n            vendor: [\n                'angular',\n                'angular-animate',\n                'angular-aria',\n                'angular-cookies',\n                'angular-resource',\n\n                'angular-sanitize',\n\n                'angular-ui-bootstrap',\n                'angular-ui-router',\n                'lodash'\n            ]\n        };\n    }\n\n    /**\n     * Output\n     * Reference: http://webpack.github.io/docs/configuration.html#output\n     * Should be an empty object if it's generating a test build\n     * Karma will handle setting it up for you when it's a test build\n     */\n    if(TEST) {\n        config.output = {};\n    } else {\n        config.output = {\n            // Absolute output directory\n            path: BUILD ? path.join(__dirname, '/dist/client/') : path.join(__dirname, '/.tmp/'),\n\n            // Output path from the view of the page\n            // Uses webpack-dev-server in development\n            publicPath: BUILD || DEV || E2E ? '/' : `http://localhost:${8080}/`,\n            //publicPath: BUILD ? '/' : 'http://localhost:' + env.port + '/',\n\n            // Filename for entry points\n            // Only adds hash in build mode\n            filename: BUILD ? '[name].[hash].js' : '[name].bundle.js',\n\n            // Filename for non-entry points\n            // Only adds hash in build mode\n            chunkFilename: BUILD ? '[name].[hash].js' : '[name].bundle.js'\n        };\n    }\n\n    config.resolve = {\n        modulesDirectories: ['node_modules'],\n        extensions: ['', '.js', '.ts']\n    };\n\n    if(TEST) {\n        config.resolve = {\n            modulesDirectories: [\n                'node_modules'\n            ],\n            extensions: ['', '.js', '.ts']\n        };\n    }\n\n    /**\n     * Devtool\n     * Reference: http://webpack.github.io/docs/configuration.html#devtool\n     * Type of sourcemap to use per build type\n     */\n    if(TEST) {\n        config.devtool = 'inline-source-map';\n    } else if(BUILD || DEV) {\n        config.devtool = 'source-map';\n    } else {\n        config.devtool = 'eval';\n    }\n\n    /**\n     * Loaders\n     * Reference: http://webpack.github.io/docs/configuration.html#module-loaders\n     * List: http://webpack.github.io/docs/list-of-loaders.html\n     * This handles most of the magic responsible for converting modules\n     */\n\n    config.sassLoader = {\n        outputStyle: 'compressed',\n        precision: 10,\n        sourceComments: false\n    };\n\n\n\n    // Initialize module\n    config.module = {\n        preLoaders: [],\n        loaders: [{\n            // JS LOADER\n            // Reference: https://github.com/babel/babel-loader\n            // Transpile .js files using babel-loader\n            // Compiles ES6 and ES7 into ES5 code\n            test: /\\.js$/,\n            loader: 'babel',\n            include: [\n                path.resolve(__dirname, 'client/'),\n                path.resolve(__dirname, 'node_modules/lodash-es/')\n            ]\n        }, {\n            // TS LOADER\n            // Reference: https://github.com/s-panferov/awesome-typescript-loader\n            // Transpile .ts files using awesome-typescript-loader\n            test: /\\.ts$/,\n            loader: 'awesome-typescript-loader',\n            query: {\n                tsconfig: path.resolve(__dirname, 'tsconfig.client.json')\n            },\n            include: [\n                path.resolve(__dirname, 'client/')\n            ]\n        }, {\n            // ASSET LOADER\n            // Reference: https://github.com/webpack/file-loader\n            // Copy png, jpg, jpeg, gif, svg, woff, woff2, ttf, eot files to output\n            // Rename the file using the asset hash\n            // Pass along the updated reference to your code\n            // You can add here any file extension you want to get copied to your output\n            test: /\\.(png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)([\\?]?.*)$/,\n            loader: 'file'\n        }, {\n\n            // HTML LOADER\n            // Reference: https://github.com/webpack/raw-loader\n            // Allow loading html through js\n            test: /\\.html$/,\n            loader: 'raw'\n        }, {\n            // CSS LOADER\n            // Reference: https://github.com/webpack/css-loader\n            // Allow loading css through js\n            //\n            // Reference: https://github.com/postcss/postcss-loader\n            // Postprocess your css with PostCSS plugins\n            test: /\\.css$/,\n            loader: !TEST\n                // Reference: https://github.com/webpack/extract-text-webpack-plugin\n                // Extract css files in production builds\n                //\n                // Reference: https://github.com/webpack/style-loader\n                // Use style-loader in development for hot-loading\n                ? ExtractTextPlugin.extract('style', 'css!postcss')\n                // Reference: https://github.com/webpack/null-loader\n                // Skip loading css in test mode\n                : 'null'\n        }, {\n            // SASS LOADER\n            // Reference: https://github.com/jtangelder/sass-loader\n            test: /\\.(scss|sass)$/,\n            loaders: ['style', 'css', 'sass'],\n            include: [\n                path.resolve(__dirname, 'node_modules/bootstrap-sass/assets/stylesheets/*.scss'),\n                path.resolve(__dirname, 'client/app/app.scss')\n            ]\n\n\n        }]\n    };\n\n    config.module.postLoaders = [{\n        test: /\\.ts$/,\n        loader: 'ng-annotate?single_quotes'\n    }];\n\n\n    //TODO: TS Instrumenter\n\n    /**\n     * PostCSS\n     * Reference: https://github.com/postcss/autoprefixer-core\n     * Add vendor prefixes to your css\n     */\n    config.postcss = [\n        autoprefixer({\n            browsers: ['last 2 version']\n        })\n    ];\n\n    /**\n     * Plugins\n     * Reference: http://webpack.github.io/docs/configuration.html#plugins\n     * List: http://webpack.github.io/docs/list-of-plugins.html\n     */\n    config.plugins = [\n        /*\n         * Plugin: ForkCheckerPlugin\n         * Description: Do type checking in a separate process, so webpack don't need to wait.\n         *\n         * See: https://github.com/s-panferov/awesome-typescript-loader#forkchecker-boolean-defaultfalse\n         */\n        new ForkCheckerPlugin(),\n\n        // Reference: https://github.com/webpack/extract-text-webpack-plugin\n        // Extract css files\n        // Disabled when in test mode or not in build mode\n        new ExtractTextPlugin('[name].[hash].css', {\n            disable: !BUILD || TEST\n        })\n    ];\n\n    if(!TEST) {\n        config.plugins.push(new CommonsChunkPlugin({\n            name: 'vendor',\n\n            // filename: \"vendor.js\"\n            // (Give the chunk a different name)\n\n            minChunks: Infinity\n            // (with more entries, this ensures that no other module\n            //  goes into the vendor chunk)\n        }));\n    }\n\n    // Skip rendering index.html in test mode\n    // Reference: https://github.com/ampedandwired/html-webpack-plugin\n    // Render index.html\n    if(!TEST) {\n        let htmlConfig = {\n            template: 'client/_index.html',\n            filename: '../client/index.html',\n            alwaysWriteToDisk: true\n        }\n        config.plugins.push(\n          new HtmlWebpackPlugin(htmlConfig),\n          new HtmlWebpackHarddiskPlugin()\n        );\n    }\n\n    // Add build specific plugins\n    if(BUILD) {\n        config.plugins.push(\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#noerrorsplugin\n            // Only emit files when there are no errors\n            new webpack.NoErrorsPlugin(),\n\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#dedupeplugin\n            // Dedupe modules in the output\n            new webpack.optimize.DedupePlugin(),\n\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin\n            // Minify all javascript, switch loaders to minimizing mode\n            new webpack.optimize.UglifyJsPlugin({\n                mangle: false,\n                output: {\n                    comments: false\n                },\n                compress: {\n                    warnings: false\n                }\n            }),\n\n            // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n            // Define free global variables\n            new webpack.DefinePlugin({\n                'process.env': {\n                    NODE_ENV: '\"production\"'\n                }\n            })\n        );\n    }\n\n    if(DEV) {\n        config.plugins.push(\n            // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n            // Define free global variables\n            new webpack.DefinePlugin({\n                'process.env': {\n                    NODE_ENV: '\"development\"'\n                }\n            })\n        );\n    }\n\n    config.cache = DEV;\n\n    if(TEST) {\n        config.stats = {\n            colors: true,\n            reasons: true\n        };\n        config.debug = false;\n    }\n\n    /**\n     * Dev server configuration\n     * Reference: http://webpack.github.io/docs/configuration.html#devserver\n     * Reference: http://webpack.github.io/docs/webpack-dev-server.html\n     */\n    config.devServer = {\n        contentBase: './client/',\n        stats: {\n            modules: false,\n            cached: false,\n            colors: true,\n            chunk: false\n        }\n    };\n\n    config.node = {\n        global: 'window',\n        process: true,\n        crypto: 'empty',\n        clearImmediate: false,\n        setImmediate: false\n    };\n\n    return config;\n};\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "./config/environment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "http",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "http"
              }
            ]
          },
          {
            "source": "./config/seed",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "seedDatabaseIfNeeded"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/app.js",
      "filenameRelative": "/root/server/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/root/server",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "/**\n * Main application file\n */\n\n'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _environment = require('./config/environment');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _seed = require('./config/seed');\n\nvar _seed2 = _interopRequireDefault(_seed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_mongoose2.default.Promise = require('bluebird');\n\n\n// Connect to MongoDB\n_mongoose2.default.connect(_environment2.default.mongo.uri, _environment2.default.mongo.options);\n_mongoose2.default.connection.on('error', function (err) {\n  console.error('MongoDB connection error: ' + err);\n  process.exit(-1); // eslint-disable-line no-process-exit\n});\n\n// Setup server\nvar app = (0, _express2.default)();\nvar server = _http2.default.createServer(app);\nrequire('./config/express').default(app);\nrequire('./routes').default(app);\n\n// Start server\nfunction startServer() {\n  app.angularFullstack = server.listen(_environment2.default.port, _environment2.default.ip, function () {\n    console.log('Express server listening on %d, in %s mode', _environment2.default.port, app.get('env'));\n  });\n}\n\n(0, _seed2.default)();\nsetImmediate(startServer);\n\n// Expose app\nexports = module.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJQcm9taXNlIiwicmVxdWlyZSIsImNvbm5lY3QiLCJtb25nbyIsInVyaSIsIm9wdGlvbnMiLCJjb25uZWN0aW9uIiwib24iLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9jZXNzIiwiZXhpdCIsImFwcCIsInNlcnZlciIsImNyZWF0ZVNlcnZlciIsImRlZmF1bHQiLCJzdGFydFNlcnZlciIsImFuZ3VsYXJGdWxsc3RhY2siLCJsaXN0ZW4iLCJwb3J0IiwiaXAiLCJsb2ciLCJnZXQiLCJzZXRJbW1lZGlhdGUiLCJleHBvcnRzIiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUlBOztBQUVBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUhBLG1CQUFTQSxPQUFULEdBQW1CQyxRQUFRLFVBQVIsQ0FBbkI7OztBQUtBO0FBQ0EsbUJBQVNDLE9BQVQsQ0FBaUIsc0JBQU9DLEtBQVAsQ0FBYUMsR0FBOUIsRUFBbUMsc0JBQU9ELEtBQVAsQ0FBYUUsT0FBaEQ7QUFDQSxtQkFBU0MsVUFBVCxDQUFvQkMsRUFBcEIsQ0FBdUIsT0FBdkIsRUFBZ0MsVUFBU0MsR0FBVCxFQUFjO0FBQzVDQyxVQUFRQyxLQUFSLGdDQUEyQ0YsR0FBM0M7QUFDQUcsVUFBUUMsSUFBUixDQUFhLENBQUMsQ0FBZCxFQUY0QyxDQUUxQjtBQUNuQixDQUhEOztBQUtBO0FBQ0EsSUFBSUMsTUFBTSx3QkFBVjtBQUNBLElBQUlDLFNBQVMsZUFBS0MsWUFBTCxDQUFrQkYsR0FBbEIsQ0FBYjtBQUNBWixRQUFRLGtCQUFSLEVBQTRCZSxPQUE1QixDQUFvQ0gsR0FBcEM7QUFDQVosUUFBUSxVQUFSLEVBQW9CZSxPQUFwQixDQUE0QkgsR0FBNUI7O0FBRUE7QUFDQSxTQUFTSSxXQUFULEdBQXVCO0FBQ3JCSixNQUFJSyxnQkFBSixHQUF1QkosT0FBT0ssTUFBUCxDQUFjLHNCQUFPQyxJQUFyQixFQUEyQixzQkFBT0MsRUFBbEMsRUFBc0MsWUFBVztBQUN0RVosWUFBUWEsR0FBUixDQUFZLDRDQUFaLEVBQTBELHNCQUFPRixJQUFqRSxFQUF1RVAsSUFBSVUsR0FBSixDQUFRLEtBQVIsQ0FBdkU7QUFDRCxHQUZzQixDQUF2QjtBQUdEOztBQUVEO0FBQ0FDLGFBQWFQLFdBQWI7O0FBRUE7QUFDQVEsVUFBVUMsT0FBT0QsT0FBUCxHQUFpQlosR0FBM0IiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlciIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFpbiBhcHBsaWNhdGlvbiBmaWxlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5tb25nb29zZS5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcvZW52aXJvbm1lbnQnO1xuaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgc2VlZERhdGFiYXNlSWZOZWVkZWQgZnJvbSAnLi9jb25maWcvc2VlZCc7XG5cbi8vIENvbm5lY3QgdG8gTW9uZ29EQlxubW9uZ29vc2UuY29ubmVjdChjb25maWcubW9uZ28udXJpLCBjb25maWcubW9uZ28ub3B0aW9ucyk7XG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycikge1xuICBjb25zb2xlLmVycm9yKGBNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyfWApO1xuICBwcm9jZXNzLmV4aXQoLTEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxufSk7XG5cbi8vIFNldHVwIHNlcnZlclxudmFyIGFwcCA9IGV4cHJlc3MoKTtcbnZhciBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xucmVxdWlyZSgnLi9jb25maWcvZXhwcmVzcycpLmRlZmF1bHQoYXBwKTtcbnJlcXVpcmUoJy4vcm91dGVzJykuZGVmYXVsdChhcHApO1xuXG4vLyBTdGFydCBzZXJ2ZXJcbmZ1bmN0aW9uIHN0YXJ0U2VydmVyKCkge1xuICBhcHAuYW5ndWxhckZ1bGxzdGFjayA9IHNlcnZlci5saXN0ZW4oY29uZmlnLnBvcnQsIGNvbmZpZy5pcCwgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ0V4cHJlc3Mgc2VydmVyIGxpc3RlbmluZyBvbiAlZCwgaW4gJXMgbW9kZScsIGNvbmZpZy5wb3J0LCBhcHAuZ2V0KCdlbnYnKSk7XG4gIH0pO1xufVxuXG5zZWVkRGF0YWJhc2VJZk5lZWRlZCgpO1xuc2V0SW1tZWRpYXRlKHN0YXJ0U2VydmVyKTtcblxuLy8gRXhwb3NlIGFwcFxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gYXBwO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "Promise",
        "require",
        "connect",
        "mongo",
        "uri",
        "options",
        "connection",
        "on",
        "err",
        "console",
        "error",
        "process",
        "exit",
        "app",
        "server",
        "createServer",
        "default",
        "startServer",
        "angularFullstack",
        "listen",
        "port",
        "ip",
        "log",
        "get",
        "setImmediate",
        "exports",
        "module"
      ],
      "mappings": "AAAA;;;;AAIA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAHA,mBAASA,OAAT,GAAmBC,QAAQ,UAAR,CAAnB;;;AAKA;AACA,mBAASC,OAAT,CAAiB,sBAAOC,KAAP,CAAaC,GAA9B,EAAmC,sBAAOD,KAAP,CAAaE,OAAhD;AACA,mBAASC,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgC,UAASC,GAAT,EAAc;AAC5CC,UAAQC,KAAR,gCAA2CF,GAA3C;AACAG,UAAQC,IAAR,CAAa,CAAC,CAAd,EAF4C,CAE1B;AACnB,CAHD;;AAKA;AACA,IAAIC,MAAM,wBAAV;AACA,IAAIC,SAAS,eAAKC,YAAL,CAAkBF,GAAlB,CAAb;AACAZ,QAAQ,kBAAR,EAA4Be,OAA5B,CAAoCH,GAApC;AACAZ,QAAQ,UAAR,EAAoBe,OAApB,CAA4BH,GAA5B;;AAEA;AACA,SAASI,WAAT,GAAuB;AACrBJ,MAAIK,gBAAJ,GAAuBJ,OAAOK,MAAP,CAAc,sBAAOC,IAArB,EAA2B,sBAAOC,EAAlC,EAAsC,YAAW;AACtEZ,YAAQa,GAAR,CAAY,4CAAZ,EAA0D,sBAAOF,IAAjE,EAAuEP,IAAIU,GAAJ,CAAQ,KAAR,CAAvE;AACD,GAFsB,CAAvB;AAGD;;AAED;AACAC,aAAaP,WAAb;;AAEA;AACAQ,UAAUC,OAAOD,OAAP,GAAiBZ,GAA3B",
      "file": "app.js",
      "sourceRoot": "/root/server",
      "sourcesContent": [
        "/**\n * Main application file\n */\n\n'use strict';\n\nimport express from 'express';\nimport mongoose from 'mongoose';\nmongoose.Promise = require('bluebird');\nimport config from './config/environment';\nimport http from 'http';\nimport seedDatabaseIfNeeded from './config/seed';\n\n// Connect to MongoDB\nmongoose.connect(config.mongo.uri, config.mongo.options);\nmongoose.connection.on('error', function(err) {\n  console.error(`MongoDB connection error: ${err}`);\n  process.exit(-1); // eslint-disable-line no-process-exit\n});\n\n// Setup server\nvar app = express();\nvar server = http.createServer(app);\nrequire('./config/express').default(app);\nrequire('./routes').default(app);\n\n// Start server\nfunction startServer() {\n  app.angularFullstack = server.listen(config.port, config.ip, function() {\n    console.log('Express server listening on %d, in %s mode', config.port, app.get('env'));\n  });\n}\n\nseedDatabaseIfNeeded();\nsetImmediate(startServer);\n\n// Expose app\nexports = module.exports = app;\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/config/environment/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/config/environment\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/config/environment/index.js",
      "filenameRelative": "/root/server/config/environment/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/config/environment",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/config/environment",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n/*eslint no-process-env:0*/\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*function requiredProcessEnv(name) {\n  if(!process.env[name]) {\n    throw new Error('You must set the ' + name + ' environment variable');\n  }\n  return process.env[name];\n}*/\n\n// All configurations will extend these options\n// ============================================\nvar all = {\n  env: process.env.NODE_ENV,\n\n  // Root path of server\n  root: _path2.default.normalize(__dirname + '/../../..'),\n\n  // Browser-sync port\n  browserSyncPort: process.env.BROWSER_SYNC_PORT || 3000,\n\n  // Server port\n  port: process.env.PORT || 9000,\n\n  // Server IP\n  ip: process.env.IP || '0.0.0.0',\n\n  // Should we populate the DB with sample data?\n  seedDB: false,\n\n  // Secret for session, you will want to change this and make it an environment variable\n  secrets: {\n    session: 'freetio-secret'\n  },\n\n  // MongoDB connection options\n  mongo: {\n    options: {\n      db: {\n        safe: true\n      }\n    }\n  },\n\n  facebook: {\n    clientID: process.env.FACEBOOK_ID || 'id',\n    clientSecret: process.env.FACEBOOK_SECRET || 'secret',\n    callbackURL: (process.env.DOMAIN || '') + '/auth/facebook/callback'\n  },\n\n  twitter: {\n    clientID: process.env.TWITTER_ID || 'id',\n    clientSecret: process.env.TWITTER_SECRET || 'secret',\n    callbackURL: (process.env.DOMAIN || '') + '/auth/twitter/callback'\n  },\n\n  google: {\n    clientID: process.env.GOOGLE_ID || 'id',\n    clientSecret: process.env.GOOGLE_SECRET || 'secret',\n    callbackURL: (process.env.DOMAIN || '') + '/auth/google/callback'\n  }\n};\n\n// Export the config object based on the NODE_ENV\n// ==============================================\nmodule.exports = _lodash2.default.merge(all, require('./shared'), require('./' + process.env.NODE_ENV + '.js') || {});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFsbCIsImVudiIsInByb2Nlc3MiLCJOT0RFX0VOViIsInJvb3QiLCJub3JtYWxpemUiLCJfX2Rpcm5hbWUiLCJicm93c2VyU3luY1BvcnQiLCJCUk9XU0VSX1NZTkNfUE9SVCIsInBvcnQiLCJQT1JUIiwiaXAiLCJJUCIsInNlZWREQiIsInNlY3JldHMiLCJzZXNzaW9uIiwibW9uZ28iLCJvcHRpb25zIiwiZGIiLCJzYWZlIiwiZmFjZWJvb2siLCJjbGllbnRJRCIsIkZBQ0VCT09LX0lEIiwiY2xpZW50U2VjcmV0IiwiRkFDRUJPT0tfU0VDUkVUIiwiY2FsbGJhY2tVUkwiLCJET01BSU4iLCJ0d2l0dGVyIiwiVFdJVFRFUl9JRCIsIlRXSVRURVJfU0VDUkVUIiwiZ29vZ2xlIiwiR09PR0xFX0lEIiwiR09PR0xFX1NFQ1JFVCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtZXJnZSIsInJlcXVpcmUiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBRUE7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0EsSUFBSUEsTUFBTTtBQUNSQyxPQUFLQyxRQUFRRCxHQUFSLENBQVlFLFFBRFQ7O0FBR1I7QUFDQUMsUUFBTSxlQUFLQyxTQUFMLENBQWtCQyxTQUFsQixlQUpFOztBQU1SO0FBQ0FDLG1CQUFpQkwsUUFBUUQsR0FBUixDQUFZTyxpQkFBWixJQUFpQyxJQVAxQzs7QUFTUjtBQUNBQyxRQUFNUCxRQUFRRCxHQUFSLENBQVlTLElBQVosSUFBb0IsSUFWbEI7O0FBWVI7QUFDQUMsTUFBSVQsUUFBUUQsR0FBUixDQUFZVyxFQUFaLElBQWtCLFNBYmQ7O0FBZVI7QUFDQUMsVUFBUSxLQWhCQTs7QUFrQlI7QUFDQUMsV0FBUztBQUNQQyxhQUFTO0FBREYsR0FuQkQ7O0FBdUJSO0FBQ0FDLFNBQU87QUFDTEMsYUFBUztBQUNQQyxVQUFJO0FBQ0ZDLGNBQU07QUFESjtBQURHO0FBREosR0F4QkM7O0FBZ0NSQyxZQUFVO0FBQ1JDLGNBQVVuQixRQUFRRCxHQUFSLENBQVlxQixXQUFaLElBQTJCLElBRDdCO0FBRVJDLGtCQUFjckIsUUFBUUQsR0FBUixDQUFZdUIsZUFBWixJQUErQixRQUZyQztBQUdSQyxrQkFBZ0J2QixRQUFRRCxHQUFSLENBQVl5QixNQUFaLElBQXNCLEVBQXRDO0FBSFEsR0FoQ0Y7O0FBc0NSQyxXQUFTO0FBQ1BOLGNBQVVuQixRQUFRRCxHQUFSLENBQVkyQixVQUFaLElBQTBCLElBRDdCO0FBRVBMLGtCQUFjckIsUUFBUUQsR0FBUixDQUFZNEIsY0FBWixJQUE4QixRQUZyQztBQUdQSixrQkFBZ0J2QixRQUFRRCxHQUFSLENBQVl5QixNQUFaLElBQXNCLEVBQXRDO0FBSE8sR0F0Q0Q7O0FBNENSSSxVQUFRO0FBQ05ULGNBQVVuQixRQUFRRCxHQUFSLENBQVk4QixTQUFaLElBQXlCLElBRDdCO0FBRU5SLGtCQUFjckIsUUFBUUQsR0FBUixDQUFZK0IsYUFBWixJQUE2QixRQUZyQztBQUdOUCxrQkFBZ0J2QixRQUFRRCxHQUFSLENBQVl5QixNQUFaLElBQXNCLEVBQXRDO0FBSE07QUE1Q0EsQ0FBVjs7QUFtREE7QUFDQTtBQUNBTyxPQUFPQyxPQUFQLEdBQWlCLGlCQUFFQyxLQUFGLENBQ2ZuQyxHQURlLEVBRWZvQyxRQUFRLFVBQVIsQ0FGZSxFQUdmQSxlQUFhbEMsUUFBUUQsR0FBUixDQUFZRSxRQUF6QixhQUEyQyxFQUg1QixDQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvY29uZmlnL2Vudmlyb25tZW50Iiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuLyplc2xpbnQgbm8tcHJvY2Vzcy1lbnY6MCovXG5cbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuLypmdW5jdGlvbiByZXF1aXJlZFByb2Nlc3NFbnYobmFtZSkge1xuICBpZighcHJvY2Vzcy5lbnZbbmFtZV0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNldCB0aGUgJyArIG5hbWUgKyAnIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG4gIH1cbiAgcmV0dXJuIHByb2Nlc3MuZW52W25hbWVdO1xufSovXG5cbi8vIEFsbCBjb25maWd1cmF0aW9ucyB3aWxsIGV4dGVuZCB0aGVzZSBvcHRpb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxudmFyIGFsbCA9IHtcbiAgZW52OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcblxuICAvLyBSb290IHBhdGggb2Ygc2VydmVyXG4gIHJvb3Q6IHBhdGgubm9ybWFsaXplKGAke19fZGlybmFtZX0vLi4vLi4vLi5gKSxcblxuICAvLyBCcm93c2VyLXN5bmMgcG9ydFxuICBicm93c2VyU3luY1BvcnQ6IHByb2Nlc3MuZW52LkJST1dTRVJfU1lOQ19QT1JUIHx8IDMwMDAsXG5cbiAgLy8gU2VydmVyIHBvcnRcbiAgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCB8fCA5MDAwLFxuXG4gIC8vIFNlcnZlciBJUFxuICBpcDogcHJvY2Vzcy5lbnYuSVAgfHwgJzAuMC4wLjAnLFxuXG4gIC8vIFNob3VsZCB3ZSBwb3B1bGF0ZSB0aGUgREIgd2l0aCBzYW1wbGUgZGF0YT9cbiAgc2VlZERCOiBmYWxzZSxcblxuICAvLyBTZWNyZXQgZm9yIHNlc3Npb24sIHlvdSB3aWxsIHdhbnQgdG8gY2hhbmdlIHRoaXMgYW5kIG1ha2UgaXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGVcbiAgc2VjcmV0czoge1xuICAgIHNlc3Npb246ICdmcmVldGlvLXNlY3JldCdcbiAgfSxcblxuICAvLyBNb25nb0RCIGNvbm5lY3Rpb24gb3B0aW9uc1xuICBtb25nbzoge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIGRiOiB7XG4gICAgICAgIHNhZmU6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgZmFjZWJvb2s6IHtcbiAgICBjbGllbnRJRDogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfSUQgfHwgJ2lkJyxcbiAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX1NFQ1JFVCB8fCAnc2VjcmV0JyxcbiAgICBjYWxsYmFja1VSTDogYCR7cHJvY2Vzcy5lbnYuRE9NQUlOIHx8ICcnfS9hdXRoL2ZhY2Vib29rL2NhbGxiYWNrYFxuICB9LFxuXG4gIHR3aXR0ZXI6IHtcbiAgICBjbGllbnRJRDogcHJvY2Vzcy5lbnYuVFdJVFRFUl9JRCB8fCAnaWQnLFxuICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuVFdJVFRFUl9TRUNSRVQgfHwgJ3NlY3JldCcsXG4gICAgY2FsbGJhY2tVUkw6IGAke3Byb2Nlc3MuZW52LkRPTUFJTiB8fCAnJ30vYXV0aC90d2l0dGVyL2NhbGxiYWNrYFxuICB9LFxuXG4gIGdvb2dsZToge1xuICAgIGNsaWVudElEOiBwcm9jZXNzLmVudi5HT09HTEVfSUQgfHwgJ2lkJyxcbiAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9TRUNSRVQgfHwgJ3NlY3JldCcsXG4gICAgY2FsbGJhY2tVUkw6IGAke3Byb2Nlc3MuZW52LkRPTUFJTiB8fCAnJ30vYXV0aC9nb29nbGUvY2FsbGJhY2tgXG4gIH1cbn07XG5cbi8vIEV4cG9ydCB0aGUgY29uZmlnIG9iamVjdCBiYXNlZCBvbiB0aGUgTk9ERV9FTlZcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbm1vZHVsZS5leHBvcnRzID0gXy5tZXJnZShcbiAgYWxsLFxuICByZXF1aXJlKCcuL3NoYXJlZCcpLFxuICByZXF1aXJlKGAuLyR7cHJvY2Vzcy5lbnYuTk9ERV9FTlZ9LmpzYCkgfHwge30pO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "all",
        "env",
        "process",
        "NODE_ENV",
        "root",
        "normalize",
        "__dirname",
        "browserSyncPort",
        "BROWSER_SYNC_PORT",
        "port",
        "PORT",
        "ip",
        "IP",
        "seedDB",
        "secrets",
        "session",
        "mongo",
        "options",
        "db",
        "safe",
        "facebook",
        "clientID",
        "FACEBOOK_ID",
        "clientSecret",
        "FACEBOOK_SECRET",
        "callbackURL",
        "DOMAIN",
        "twitter",
        "TWITTER_ID",
        "TWITTER_SECRET",
        "google",
        "GOOGLE_ID",
        "GOOGLE_SECRET",
        "module",
        "exports",
        "merge",
        "require"
      ],
      "mappings": "AAAA;AACA;;AAEA;;;;AACA;;;;;;AAEA;;;;;;;AAOA;AACA;AACA,IAAIA,MAAM;AACRC,OAAKC,QAAQD,GAAR,CAAYE,QADT;;AAGR;AACAC,QAAM,eAAKC,SAAL,CAAkBC,SAAlB,eAJE;;AAMR;AACAC,mBAAiBL,QAAQD,GAAR,CAAYO,iBAAZ,IAAiC,IAP1C;;AASR;AACAC,QAAMP,QAAQD,GAAR,CAAYS,IAAZ,IAAoB,IAVlB;;AAYR;AACAC,MAAIT,QAAQD,GAAR,CAAYW,EAAZ,IAAkB,SAbd;;AAeR;AACAC,UAAQ,KAhBA;;AAkBR;AACAC,WAAS;AACPC,aAAS;AADF,GAnBD;;AAuBR;AACAC,SAAO;AACLC,aAAS;AACPC,UAAI;AACFC,cAAM;AADJ;AADG;AADJ,GAxBC;;AAgCRC,YAAU;AACRC,cAAUnB,QAAQD,GAAR,CAAYqB,WAAZ,IAA2B,IAD7B;AAERC,kBAAcrB,QAAQD,GAAR,CAAYuB,eAAZ,IAA+B,QAFrC;AAGRC,kBAAgBvB,QAAQD,GAAR,CAAYyB,MAAZ,IAAsB,EAAtC;AAHQ,GAhCF;;AAsCRC,WAAS;AACPN,cAAUnB,QAAQD,GAAR,CAAY2B,UAAZ,IAA0B,IAD7B;AAEPL,kBAAcrB,QAAQD,GAAR,CAAY4B,cAAZ,IAA8B,QAFrC;AAGPJ,kBAAgBvB,QAAQD,GAAR,CAAYyB,MAAZ,IAAsB,EAAtC;AAHO,GAtCD;;AA4CRI,UAAQ;AACNT,cAAUnB,QAAQD,GAAR,CAAY8B,SAAZ,IAAyB,IAD7B;AAENR,kBAAcrB,QAAQD,GAAR,CAAY+B,aAAZ,IAA6B,QAFrC;AAGNP,kBAAgBvB,QAAQD,GAAR,CAAYyB,MAAZ,IAAsB,EAAtC;AAHM;AA5CA,CAAV;;AAmDA;AACA;AACAO,OAAOC,OAAP,GAAiB,iBAAEC,KAAF,CACfnC,GADe,EAEfoC,QAAQ,UAAR,CAFe,EAGfA,eAAalC,QAAQD,GAAR,CAAYE,QAAzB,aAA2C,EAH5B,CAAjB",
      "file": "index.js",
      "sourceRoot": "/root/server/config/environment",
      "sourcesContent": [
        "'use strict';\n/*eslint no-process-env:0*/\n\nimport path from 'path';\nimport _ from 'lodash';\n\n/*function requiredProcessEnv(name) {\n  if(!process.env[name]) {\n    throw new Error('You must set the ' + name + ' environment variable');\n  }\n  return process.env[name];\n}*/\n\n// All configurations will extend these options\n// ============================================\nvar all = {\n  env: process.env.NODE_ENV,\n\n  // Root path of server\n  root: path.normalize(`${__dirname}/../../..`),\n\n  // Browser-sync port\n  browserSyncPort: process.env.BROWSER_SYNC_PORT || 3000,\n\n  // Server port\n  port: process.env.PORT || 9000,\n\n  // Server IP\n  ip: process.env.IP || '0.0.0.0',\n\n  // Should we populate the DB with sample data?\n  seedDB: false,\n\n  // Secret for session, you will want to change this and make it an environment variable\n  secrets: {\n    session: 'freetio-secret'\n  },\n\n  // MongoDB connection options\n  mongo: {\n    options: {\n      db: {\n        safe: true\n      }\n    }\n  },\n\n  facebook: {\n    clientID: process.env.FACEBOOK_ID || 'id',\n    clientSecret: process.env.FACEBOOK_SECRET || 'secret',\n    callbackURL: `${process.env.DOMAIN || ''}/auth/facebook/callback`\n  },\n\n  twitter: {\n    clientID: process.env.TWITTER_ID || 'id',\n    clientSecret: process.env.TWITTER_SECRET || 'secret',\n    callbackURL: `${process.env.DOMAIN || ''}/auth/twitter/callback`\n  },\n\n  google: {\n    clientID: process.env.GOOGLE_ID || 'id',\n    clientSecret: process.env.GOOGLE_SECRET || 'secret',\n    callbackURL: `${process.env.DOMAIN || ''}/auth/google/callback`\n  }\n};\n\n// Export the config object based on the NODE_ENV\n// ==============================================\nmodule.exports = _.merge(\n  all,\n  require('./shared'),\n  require(`./${process.env.NODE_ENV}.js`) || {});\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/config/environment/shared.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/config/environment\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/config/environment/shared.js",
      "filenameRelative": "/root/server/config/environment/shared.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "shared.js",
      "sourceFileName": "shared.js",
      "sourceRoot": "/root/server/config/environment",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/config/environment",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "shared"
    },
    "ignored": false,
    "code": "'use strict';\n\nexports = module.exports = {\n  // List of user roles\n  userRoles: ['guest', 'user', 'admin']\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlZC5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwibW9kdWxlIiwidXNlclJvbGVzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsVUFBVUMsT0FBT0QsT0FBUCxHQUFpQjtBQUN6QjtBQUNBRSxhQUFXLENBQUMsT0FBRCxFQUFVLE1BQVYsRUFBa0IsT0FBbEI7QUFGYyxDQUEzQiIsImZpbGUiOiJzaGFyZWQuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2NvbmZpZy9lbnZpcm9ubWVudCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0ge1xuICAvLyBMaXN0IG9mIHVzZXIgcm9sZXNcbiAgdXNlclJvbGVzOiBbJ2d1ZXN0JywgJ3VzZXInLCAnYWRtaW4nXVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "shared.js"
      ],
      "names": [
        "exports",
        "module",
        "userRoles"
      ],
      "mappings": "AAAA;;AAEAA,UAAUC,OAAOD,OAAP,GAAiB;AACzB;AACAE,aAAW,CAAC,OAAD,EAAU,MAAV,EAAkB,OAAlB;AAFc,CAA3B",
      "file": "shared.js",
      "sourceRoot": "/root/server/config/environment",
      "sourcesContent": [
        "'use strict';\n\nexports = module.exports = {\n  // List of user roles\n  userRoles: ['guest', 'user', 'admin']\n};\n"
      ]
    },
    "mtime": 1507831002473
  },
  "{\"filename\":\"/root/server/config/environment/development.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/config/environment\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/config/environment/development.js",
      "filenameRelative": "/root/server/config/environment/development.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "development.js",
      "sourceFileName": "development.js",
      "sourceRoot": "/root/server/config/environment",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/config/environment",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "development"
    },
    "ignored": false,
    "code": "'use strict';\n/*eslint no-process-env:0*/\n\n// Development specific configuration\n// ==================================\n\nmodule.exports = {\n\n  // MongoDB connection options\n  mongo: {\n    uri: 'mongodb://localhost/freetio-dev'\n  },\n\n  // Seed database on startup\n  seedDB: true\n\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRldmVsb3BtZW50LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJtb25nbyIsInVyaSIsInNlZWREQiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUNBQSxPQUFPQyxPQUFQLEdBQWlCOztBQUVmO0FBQ0FDLFNBQU87QUFDTEMsU0FBSztBQURBLEdBSFE7O0FBT2Y7QUFDQUMsVUFBUTs7QUFSTyxDQUFqQiIsImZpbGUiOiJkZXZlbG9wbWVudC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvY29uZmlnL2Vudmlyb25tZW50Iiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuLyplc2xpbnQgbm8tcHJvY2Vzcy1lbnY6MCovXG5cbi8vIERldmVsb3BtZW50IHNwZWNpZmljIGNvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8vIE1vbmdvREIgY29ubmVjdGlvbiBvcHRpb25zXG4gIG1vbmdvOiB7XG4gICAgdXJpOiAnbW9uZ29kYjovL2xvY2FsaG9zdC9mcmVldGlvLWRldidcbiAgfSxcblxuICAvLyBTZWVkIGRhdGFiYXNlIG9uIHN0YXJ0dXBcbiAgc2VlZERCOiB0cnVlXG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "development.js"
      ],
      "names": [
        "module",
        "exports",
        "mongo",
        "uri",
        "seedDB"
      ],
      "mappings": "AAAA;AACA;;AAEA;AACA;;AACAA,OAAOC,OAAP,GAAiB;;AAEf;AACAC,SAAO;AACLC,SAAK;AADA,GAHQ;;AAOf;AACAC,UAAQ;;AARO,CAAjB",
      "file": "development.js",
      "sourceRoot": "/root/server/config/environment",
      "sourcesContent": [
        "'use strict';\n/*eslint no-process-env:0*/\n\n// Development specific configuration\n// ==================================\nmodule.exports = {\n\n  // MongoDB connection options\n  mongo: {\n    uri: 'mongodb://localhost/freetio-dev'\n  },\n\n  // Seed database on startup\n  seedDB: true\n\n};\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/config/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/config\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../api/user/user.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "User"
              }
            ]
          },
          {
            "source": "./environment/",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "seedDatabaseIfNeeded"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "seedDatabaseIfNeeded",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/config/seed.js",
      "filenameRelative": "/root/server/config/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/root/server/config",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/config",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "/**\n * Populate DB with sample data on server start\n * to disable, edit config/environment/index.js, and set `seedDB: false`\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = seedDatabaseIfNeeded;\n\nvar _user = require('../api/user/user.model');\n\nvar _user2 = _interopRequireDefault(_user);\n\nvar _environment = require('./environment/');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction seedDatabaseIfNeeded() {\n  if (_environment2.default.seedDB) {\n    _user2.default.find({}).remove().then(function () {\n      _user2.default.create({\n        provider: 'local',\n        name: 'Test User',\n        email: 'test@example.com',\n        password: 'test'\n      }, {\n        provider: 'local',\n        role: 'admin',\n        name: 'Admin',\n        email: 'admin@example.com',\n        password: 'admin'\n      }).then(function () {\n        return console.log('finished populating users');\n      }).catch(function (err) {\n        return console.log('error populating users', err);\n      });\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsic2VlZERhdGFiYXNlSWZOZWVkZWQiLCJzZWVkREIiLCJmaW5kIiwicmVtb3ZlIiwidGhlbiIsImNyZWF0ZSIsInByb3ZpZGVyIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7QUFLQTs7Ozs7a0JBSXdCQSxvQjs7QUFIeEI7Ozs7QUFDQTs7Ozs7O0FBRWUsU0FBU0Esb0JBQVQsR0FBZ0M7QUFDN0MsTUFBRyxzQkFBT0MsTUFBVixFQUFrQjtBQUNoQixtQkFBS0MsSUFBTCxDQUFVLEVBQVYsRUFBY0MsTUFBZCxHQUNHQyxJQURILENBQ1EsWUFBTTtBQUNWLHFCQUFLQyxNQUFMLENBQVk7QUFDVkMsa0JBQVUsT0FEQTtBQUVWQyxjQUFNLFdBRkk7QUFHVkMsZUFBTyxrQkFIRztBQUlWQyxrQkFBVTtBQUpBLE9BQVosRUFLRztBQUNESCxrQkFBVSxPQURUO0FBRURJLGNBQU0sT0FGTDtBQUdESCxjQUFNLE9BSEw7QUFJREMsZUFBTyxtQkFKTjtBQUtEQyxrQkFBVTtBQUxULE9BTEgsRUFZQ0wsSUFaRCxDQVlNO0FBQUEsZUFBTU8sUUFBUUMsR0FBUixDQUFZLDJCQUFaLENBQU47QUFBQSxPQVpOLEVBYUNDLEtBYkQsQ0FhTztBQUFBLGVBQU9GLFFBQVFDLEdBQVIsQ0FBWSx3QkFBWixFQUFzQ0UsR0FBdEMsQ0FBUDtBQUFBLE9BYlA7QUFjRCxLQWhCSDtBQWlCRDtBQUNGIiwiZmlsZSI6InNlZWQuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2NvbmZpZyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUG9wdWxhdGUgREIgd2l0aCBzYW1wbGUgZGF0YSBvbiBzZXJ2ZXIgc3RhcnRcbiAqIHRvIGRpc2FibGUsIGVkaXQgY29uZmlnL2Vudmlyb25tZW50L2luZGV4LmpzLCBhbmQgc2V0IGBzZWVkREI6IGZhbHNlYFxuICovXG5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBVc2VyIGZyb20gJy4uL2FwaS91c2VyL3VzZXIubW9kZWwnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2Vudmlyb25tZW50Lyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNlZWREYXRhYmFzZUlmTmVlZGVkKCkge1xuICBpZihjb25maWcuc2VlZERCKSB7XG4gICAgVXNlci5maW5kKHt9KS5yZW1vdmUoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBVc2VyLmNyZWF0ZSh7XG4gICAgICAgICAgcHJvdmlkZXI6ICdsb2NhbCcsXG4gICAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3Rlc3QnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBwcm92aWRlcjogJ2xvY2FsJyxcbiAgICAgICAgICByb2xlOiAnYWRtaW4nLFxuICAgICAgICAgIG5hbWU6ICdBZG1pbicsXG4gICAgICAgICAgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICdhZG1pbidcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ2ZpbmlzaGVkIHBvcHVsYXRpbmcgdXNlcnMnKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZygnZXJyb3IgcG9wdWxhdGluZyB1c2VycycsIGVycikpO1xuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "seedDatabaseIfNeeded",
        "seedDB",
        "find",
        "remove",
        "then",
        "create",
        "provider",
        "name",
        "email",
        "password",
        "role",
        "console",
        "log",
        "catch",
        "err"
      ],
      "mappings": "AAAA;;;;;AAKA;;;;;kBAIwBA,oB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,oBAAT,GAAgC;AAC7C,MAAG,sBAAOC,MAAV,EAAkB;AAChB,mBAAKC,IAAL,CAAU,EAAV,EAAcC,MAAd,GACGC,IADH,CACQ,YAAM;AACV,qBAAKC,MAAL,CAAY;AACVC,kBAAU,OADA;AAEVC,cAAM,WAFI;AAGVC,eAAO,kBAHG;AAIVC,kBAAU;AAJA,OAAZ,EAKG;AACDH,kBAAU,OADT;AAEDI,cAAM,OAFL;AAGDH,cAAM,OAHL;AAIDC,eAAO,mBAJN;AAKDC,kBAAU;AALT,OALH,EAYCL,IAZD,CAYM;AAAA,eAAMO,QAAQC,GAAR,CAAY,2BAAZ,CAAN;AAAA,OAZN,EAaCC,KAbD,CAaO;AAAA,eAAOF,QAAQC,GAAR,CAAY,wBAAZ,EAAsCE,GAAtC,CAAP;AAAA,OAbP;AAcD,KAhBH;AAiBD;AACF",
      "file": "seed.js",
      "sourceRoot": "/root/server/config",
      "sourcesContent": [
        "/**\n * Populate DB with sample data on server start\n * to disable, edit config/environment/index.js, and set `seedDB: false`\n */\n\n'use strict';\nimport User from '../api/user/user.model';\nimport config from './environment/';\n\nexport default function seedDatabaseIfNeeded() {\n  if(config.seedDB) {\n    User.find({}).remove()\n      .then(() => {\n        User.create({\n          provider: 'local',\n          name: 'Test User',\n          email: 'test@example.com',\n          password: 'test'\n        }, {\n          provider: 'local',\n          role: 'admin',\n          name: 'Admin',\n          email: 'admin@example.com',\n          password: 'admin'\n        })\n        .then(() => console.log('finished populating users'))\n        .catch(err => console.log('error populating users', err));\n      });\n  }\n}\n"
      ]
    },
    "mtime": 1508176803935
  },
  "{\"filename\":\"/root/server/api/thing/thing.model.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/thing\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "./thing.events",
            "imported": [
              "registerEvents"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerEvents",
                "local": "registerEvents"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/thing/thing.model.js",
      "filenameRelative": "/root/server/api/thing/thing.model.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "thing.model.js",
      "sourceFileName": "thing.model.js",
      "sourceRoot": "/root/server/api/thing",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/thing",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "thing.model"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _thing = require('./thing.events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ThingSchema = new _mongoose2.default.Schema({\n  name: String,\n  info: String,\n  active: Boolean\n});\n\n(0, _thing.registerEvents)(ThingSchema);\nexports.default = _mongoose2.default.model('Thing', ThingSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoaW5nLm1vZGVsLmpzIl0sIm5hbWVzIjpbIlRoaW5nU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsImluZm8iLCJhY3RpdmUiLCJCb29sZWFuIiwibW9kZWwiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFFQTs7OztBQUNBOzs7O0FBRUEsSUFBSUEsY0FBYyxJQUFJLG1CQUFTQyxNQUFiLENBQW9CO0FBQ3BDQyxRQUFNQyxNQUQ4QjtBQUVwQ0MsUUFBTUQsTUFGOEI7QUFHcENFLFVBQVFDO0FBSDRCLENBQXBCLENBQWxCOztBQU1BLDJCQUFlTixXQUFmO2tCQUNlLG1CQUFTTyxLQUFULENBQWUsT0FBZixFQUF3QlAsV0FBeEIsQyIsImZpbGUiOiJ0aGluZy5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXBpL3RoaW5nIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHtyZWdpc3RlckV2ZW50c30gZnJvbSAnLi90aGluZy5ldmVudHMnO1xuXG52YXIgVGhpbmdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZTogU3RyaW5nLFxuICBpbmZvOiBTdHJpbmcsXG4gIGFjdGl2ZTogQm9vbGVhblxufSk7XG5cbnJlZ2lzdGVyRXZlbnRzKFRoaW5nU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVsKCdUaGluZycsIFRoaW5nU2NoZW1hKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "thing.model.js"
      ],
      "names": [
        "ThingSchema",
        "Schema",
        "name",
        "String",
        "info",
        "active",
        "Boolean",
        "model"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AAEA,IAAIA,cAAc,IAAI,mBAASC,MAAb,CAAoB;AACpCC,QAAMC,MAD8B;AAEpCC,QAAMD,MAF8B;AAGpCE,UAAQC;AAH4B,CAApB,CAAlB;;AAMA,2BAAeN,WAAf;kBACe,mBAASO,KAAT,CAAe,OAAf,EAAwBP,WAAxB,C",
      "file": "thing.model.js",
      "sourceRoot": "/root/server/api/thing",
      "sourcesContent": [
        "'use strict';\n\nimport mongoose from 'mongoose';\nimport {registerEvents} from './thing.events';\n\nvar ThingSchema = new mongoose.Schema({\n  name: String,\n  info: String,\n  active: Boolean\n});\n\nregisterEvents(ThingSchema);\nexport default mongoose.model('Thing', ThingSchema);\n"
      ]
    },
    "mtime": 1507831002477
  },
  "{\"filename\":\"/root/server/api/thing/thing.events.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/thing\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerEvents"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerEvents",
              "exported": "registerEvents"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/thing/thing.events.js",
      "filenameRelative": "/root/server/api/thing/thing.events.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "thing.events.js",
      "sourceFileName": "thing.events.js",
      "sourceRoot": "/root/server/api/thing",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/thing",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "thing.events"
    },
    "ignored": false,
    "code": "/**\n * Thing model events\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerEvents = undefined;\n\nvar _events = require('events');\n\nvar ThingEvents = new _events.EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nThingEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(Thing) {\n  for (var e in events) {\n    var event = events[e];\n    Thing.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function (doc) {\n    ThingEvents.emit(event + ':' + doc._id, doc);\n    ThingEvents.emit(event, doc);\n  };\n}\n\nexports.registerEvents = registerEvents;\nexports.default = ThingEvents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoaW5nLmV2ZW50cy5qcyJdLCJuYW1lcyI6WyJUaGluZ0V2ZW50cyIsInNldE1heExpc3RlbmVycyIsImV2ZW50cyIsInNhdmUiLCJyZW1vdmUiLCJyZWdpc3RlckV2ZW50cyIsIlRoaW5nIiwiZSIsImV2ZW50IiwicG9zdCIsImVtaXRFdmVudCIsImRvYyIsImVtaXQiLCJfaWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBSUE7Ozs7Ozs7QUFFQTs7QUFDQSxJQUFJQSxjQUFjLDBCQUFsQjs7QUFFQTtBQUNBQSxZQUFZQyxlQUFaLENBQTRCLENBQTVCOztBQUVBO0FBQ0EsSUFBSUMsU0FBUztBQUNYQyxRQUFNLE1BREs7QUFFWEMsVUFBUTtBQUZHLENBQWI7O0FBS0E7QUFDQSxTQUFTQyxjQUFULENBQXdCQyxLQUF4QixFQUErQjtBQUM3QixPQUFJLElBQUlDLENBQVIsSUFBYUwsTUFBYixFQUFxQjtBQUNuQixRQUFJTSxRQUFRTixPQUFPSyxDQUFQLENBQVo7QUFDQUQsVUFBTUcsSUFBTixDQUFXRixDQUFYLEVBQWNHLFVBQVVGLEtBQVYsQ0FBZDtBQUNEO0FBQ0Y7O0FBRUQsU0FBU0UsU0FBVCxDQUFtQkYsS0FBbkIsRUFBMEI7QUFDeEIsU0FBTyxVQUFTRyxHQUFULEVBQWM7QUFDbkJYLGdCQUFZWSxJQUFaLENBQW9CSixLQUFwQixTQUE2QkcsSUFBSUUsR0FBakMsRUFBd0NGLEdBQXhDO0FBQ0FYLGdCQUFZWSxJQUFaLENBQWlCSixLQUFqQixFQUF3QkcsR0FBeEI7QUFDRCxHQUhEO0FBSUQ7O1FBRU9OLGMsR0FBQUEsYztrQkFDT0wsVyIsImZpbGUiOiJ0aGluZy5ldmVudHMuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2FwaS90aGluZyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpbmcgbW9kZWwgZXZlbnRzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge0V2ZW50RW1pdHRlcn0gZnJvbSAnZXZlbnRzJztcbnZhciBUaGluZ0V2ZW50cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuLy8gU2V0IG1heCBldmVudCBsaXN0ZW5lcnMgKDAgPT0gdW5saW1pdGVkKVxuVGhpbmdFdmVudHMuc2V0TWF4TGlzdGVuZXJzKDApO1xuXG4vLyBNb2RlbCBldmVudHNcbnZhciBldmVudHMgPSB7XG4gIHNhdmU6ICdzYXZlJyxcbiAgcmVtb3ZlOiAncmVtb3ZlJ1xufTtcblxuLy8gUmVnaXN0ZXIgdGhlIGV2ZW50IGVtaXR0ZXIgdG8gdGhlIG1vZGVsIGV2ZW50c1xuZnVuY3Rpb24gcmVnaXN0ZXJFdmVudHMoVGhpbmcpIHtcbiAgZm9yKHZhciBlIGluIGV2ZW50cykge1xuICAgIGxldCBldmVudCA9IGV2ZW50c1tlXTtcbiAgICBUaGluZy5wb3N0KGUsIGVtaXRFdmVudChldmVudCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRFdmVudChldmVudCkge1xuICByZXR1cm4gZnVuY3Rpb24oZG9jKSB7XG4gICAgVGhpbmdFdmVudHMuZW1pdChgJHtldmVudH06JHtkb2MuX2lkfWAsIGRvYyk7XG4gICAgVGhpbmdFdmVudHMuZW1pdChldmVudCwgZG9jKTtcbiAgfTtcbn1cblxuZXhwb3J0IHtyZWdpc3RlckV2ZW50c307XG5leHBvcnQgZGVmYXVsdCBUaGluZ0V2ZW50cztcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "thing.events.js"
      ],
      "names": [
        "ThingEvents",
        "setMaxListeners",
        "events",
        "save",
        "remove",
        "registerEvents",
        "Thing",
        "e",
        "event",
        "post",
        "emitEvent",
        "doc",
        "emit",
        "_id"
      ],
      "mappings": "AAAA;;;;AAIA;;;;;;;AAEA;;AACA,IAAIA,cAAc,0BAAlB;;AAEA;AACAA,YAAYC,eAAZ,CAA4B,CAA5B;;AAEA;AACA,IAAIC,SAAS;AACXC,QAAM,MADK;AAEXC,UAAQ;AAFG,CAAb;;AAKA;AACA,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAC7B,OAAI,IAAIC,CAAR,IAAaL,MAAb,EAAqB;AACnB,QAAIM,QAAQN,OAAOK,CAAP,CAAZ;AACAD,UAAMG,IAAN,CAAWF,CAAX,EAAcG,UAAUF,KAAV,CAAd;AACD;AACF;;AAED,SAASE,SAAT,CAAmBF,KAAnB,EAA0B;AACxB,SAAO,UAASG,GAAT,EAAc;AACnBX,gBAAYY,IAAZ,CAAoBJ,KAApB,SAA6BG,IAAIE,GAAjC,EAAwCF,GAAxC;AACAX,gBAAYY,IAAZ,CAAiBJ,KAAjB,EAAwBG,GAAxB;AACD,GAHD;AAID;;QAEON,c,GAAAA,c;kBACOL,W",
      "file": "thing.events.js",
      "sourceRoot": "/root/server/api/thing",
      "sourcesContent": [
        "/**\n * Thing model events\n */\n\n'use strict';\n\nimport {EventEmitter} from 'events';\nvar ThingEvents = new EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nThingEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(Thing) {\n  for(var e in events) {\n    let event = events[e];\n    Thing.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function(doc) {\n    ThingEvents.emit(`${event}:${doc._id}`, doc);\n    ThingEvents.emit(event, doc);\n  };\n}\n\nexport {registerEvents};\nexport default ThingEvents;\n"
      ]
    },
    "mtime": 1507831002477
  },
  "{\"filename\":\"/root/server/api/user/user.model.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/user\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "crypto",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "crypto"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default",
              "Schema"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              },
              {
                "kind": "named",
                "imported": "Schema",
                "local": "Schema"
              }
            ]
          },
          {
            "source": "./user.events",
            "imported": [
              "registerEvents"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerEvents",
                "local": "registerEvents"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/user/user.model.js",
      "filenameRelative": "/root/server/api/user/user.model.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "user.model.js",
      "sourceFileName": "user.model.js",
      "sourceRoot": "/root/server/api/user",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/user",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "user.model"
    },
    "ignored": false,
    "code": "'use strict';\n/*eslint no-invalid-this:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _crypto = require('crypto');\n\nvar _crypto2 = _interopRequireDefault(_crypto);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _user = require('./user.events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_mongoose2.default.Promise = require('bluebird');\n\nvar authTypes = ['github', 'twitter', 'facebook', 'google'];\n\nvar UserSchema = new _mongoose.Schema({\n  name: String,\n  email: {\n    type: String,\n    lowercase: true,\n    required: function required() {\n      if (authTypes.indexOf(this.provider) === -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  role: {\n    type: String,\n    default: 'user'\n  },\n  password: {\n    type: String,\n    required: function required() {\n      if (authTypes.indexOf(this.provider) === -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  provider: String,\n  salt: String,\n  facebook: {},\n  twitter: {},\n  google: {},\n  github: {}\n});\n\n/**\n * Virtuals\n */\n\n// Public profile information\nUserSchema.virtual('profile').get(function () {\n  return {\n    name: this.name,\n    role: this.role\n  };\n});\n\n// Non-sensitive info we'll be putting in the token\nUserSchema.virtual('token').get(function () {\n  return {\n    _id: this._id,\n    role: this.role\n  };\n});\n\n/**\n * Validations\n */\n\n// Validate empty email\nUserSchema.path('email').validate(function (email) {\n  if (authTypes.indexOf(this.provider) !== -1) {\n    return true;\n  }\n  return email.length;\n}, 'Email cannot be blank');\n\n// Validate empty password\nUserSchema.path('password').validate(function (password) {\n  if (authTypes.indexOf(this.provider) !== -1) {\n    return true;\n  }\n  return password.length;\n}, 'Password cannot be blank');\n\n// Validate email is not taken\nUserSchema.path('email').validate(function (value) {\n  var _this = this;\n\n  if (authTypes.indexOf(this.provider) !== -1) {\n    return true;\n  }\n\n  return this.constructor.findOne({ email: value }).exec().then(function (user) {\n    if (user) {\n      if (_this.id === user.id) {\n        return true;\n      }\n      return false;\n    }\n    return true;\n  }).catch(function (err) {\n    throw err;\n  });\n}, 'The specified email address is already in use.');\n\nvar validatePresenceOf = function validatePresenceOf(value) {\n  return value && value.length;\n};\n\n/**\n * Pre-save hook\n */\nUserSchema.pre('save', function (next) {\n  var _this2 = this;\n\n  // Handle new/update passwords\n  if (!this.isModified('password')) {\n    return next();\n  }\n\n  if (!validatePresenceOf(this.password)) {\n    if (authTypes.indexOf(this.provider) === -1) {\n      return next(new Error('Invalid password'));\n    } else {\n      return next();\n    }\n  }\n\n  // Make salt with a callback\n  this.makeSalt(function (saltErr, salt) {\n    if (saltErr) {\n      return next(saltErr);\n    }\n    _this2.salt = salt;\n    _this2.encryptPassword(_this2.password, function (encryptErr, hashedPassword) {\n      if (encryptErr) {\n        return next(encryptErr);\n      }\n      _this2.password = hashedPassword;\n      return next();\n    });\n  });\n});\n\n/**\n * Methods\n */\nUserSchema.methods = {\n  /**\n   * Authenticate - check if the passwords are the same\n   *\n   * @param {String} password\n   * @param {Function} callback\n   * @return {Boolean}\n   * @api public\n   */\n  authenticate: function authenticate(password, callback) {\n    var _this3 = this;\n\n    if (!callback) {\n      return this.password === this.encryptPassword(password);\n    }\n\n    this.encryptPassword(password, function (err, pwdGen) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (_this3.password === pwdGen) {\n        return callback(null, true);\n      } else {\n        return callback(null, false);\n      }\n    });\n  },\n\n\n  /**\n   * Make salt\n   *\n   * @param {Number} [byteSize] - Optional salt byte size, default to 16\n   * @param {Function} callback\n   * @return {String}\n   * @api public\n   */\n  makeSalt: function makeSalt() {\n    var byteSize = void 0;\n    var callback = void 0;\n    var defaultByteSize = 16;\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'function') {\n      callback = arguments.length <= 0 ? undefined : arguments[0];\n      byteSize = defaultByteSize;\n    } else if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'function') {\n      callback = arguments.length <= 1 ? undefined : arguments[1];\n    } else {\n      throw new Error('Missing Callback');\n    }\n\n    if (!byteSize) {\n      byteSize = defaultByteSize;\n    }\n\n    return _crypto2.default.randomBytes(byteSize, function (err, salt) {\n      if (err) {\n        return callback(err);\n      } else {\n        return callback(null, salt.toString('base64'));\n      }\n    });\n  },\n\n\n  /**\n   * Encrypt password\n   *\n   * @param {String} password\n   * @param {Function} callback\n   * @return {String}\n   * @api public\n   */\n  encryptPassword: function encryptPassword(password, callback) {\n    if (!password || !this.salt) {\n      if (!callback) {\n        return null;\n      } else {\n        return callback('Missing password or salt');\n      }\n    }\n\n    var defaultIterations = 10000;\n    var defaultKeyLength = 64;\n    var salt = new Buffer(this.salt, 'base64');\n\n    if (!callback) {\n      // eslint-disable-next-line no-sync\n      return _crypto2.default.pbkdf2Sync(password, salt, defaultIterations, defaultKeyLength, 'sha1').toString('base64');\n    }\n\n    return _crypto2.default.pbkdf2(password, salt, defaultIterations, defaultKeyLength, 'sha1', function (err, key) {\n      if (err) {\n        return callback(err);\n      } else {\n        return callback(null, key.toString('base64'));\n      }\n    });\n  }\n};\n\n(0, _user.registerEvents)(UserSchema);\nexports.default = _mongoose2.default.model('User', UserSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsiUHJvbWlzZSIsInJlcXVpcmUiLCJhdXRoVHlwZXMiLCJVc2VyU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsImVtYWlsIiwidHlwZSIsImxvd2VyY2FzZSIsInJlcXVpcmVkIiwiaW5kZXhPZiIsInByb3ZpZGVyIiwicm9sZSIsImRlZmF1bHQiLCJwYXNzd29yZCIsInNhbHQiLCJmYWNlYm9vayIsInR3aXR0ZXIiLCJnb29nbGUiLCJnaXRodWIiLCJ2aXJ0dWFsIiwiZ2V0IiwiX2lkIiwicGF0aCIsInZhbGlkYXRlIiwibGVuZ3RoIiwidmFsdWUiLCJjb25zdHJ1Y3RvciIsImZpbmRPbmUiLCJleGVjIiwidGhlbiIsInVzZXIiLCJpZCIsImNhdGNoIiwiZXJyIiwidmFsaWRhdGVQcmVzZW5jZU9mIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJFcnJvciIsIm1ha2VTYWx0Iiwic2FsdEVyciIsImVuY3J5cHRQYXNzd29yZCIsImVuY3J5cHRFcnIiLCJoYXNoZWRQYXNzd29yZCIsIm1ldGhvZHMiLCJhdXRoZW50aWNhdGUiLCJjYWxsYmFjayIsInB3ZEdlbiIsImJ5dGVTaXplIiwiZGVmYXVsdEJ5dGVTaXplIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImRlZmF1bHRJdGVyYXRpb25zIiwiZGVmYXVsdEtleUxlbmd0aCIsIkJ1ZmZlciIsInBia2RmMlN5bmMiLCJwYmtkZjIiLCJrZXkiLCJtb2RlbCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7Ozs7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7O0FBRkEsbUJBQVNBLE9BQVQsR0FBbUJDLFFBQVEsVUFBUixDQUFuQjs7QUFJQSxJQUFNQyxZQUFZLENBQUMsUUFBRCxFQUFXLFNBQVgsRUFBc0IsVUFBdEIsRUFBa0MsUUFBbEMsQ0FBbEI7O0FBRUEsSUFBSUMsYUFBYSxxQkFBVztBQUMxQkMsUUFBTUMsTUFEb0I7QUFFMUJDLFNBQU87QUFDTEMsVUFBTUYsTUFE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QVA7QUFDRCxPQUZELE1BRU87QUFDTCxlQUFPQSxTQUFTLDBCQUFULENBQVA7QUFDRDtBQUNGOztBQUVELFFBQUlNLG9CQUFvQixLQUF4QjtBQUNBLFFBQUlDLG1CQUFtQixFQUF2QjtBQUNBLFFBQUl2QyxPQUFPLElBQUl3QyxNQUFKLENBQVcsS0FBS3hDLElBQWhCLEVBQXNCLFFBQXRCLENBQVg7O0FBRUEsUUFBRyxDQUFDZ0MsUUFBSixFQUFjO0FBQ1o7QUFDQSxhQUFPLGlCQUFPUyxVQUFQLENBQWtCMUMsUUFBbEIsRUFBNEJDLElBQTVCLEVBQWtDc0MsaUJBQWxDLEVBQ0hDLGdCQURHLEVBQ2UsTUFEZixFQUVKRixRQUZJLENBRUssUUFGTCxDQUFQO0FBR0Q7O0FBRUQsV0FBTyxpQkFBT0ssTUFBUCxDQUFjM0MsUUFBZCxFQUF3QkMsSUFBeEIsRUFBOEJzQyxpQkFBOUIsRUFBaURDLGdCQUFqRCxFQUNMLE1BREssRUFDRyxVQUFDcEIsR0FBRCxFQUFNd0IsR0FBTixFQUFjO0FBQ3BCLFVBQUd4QixHQUFILEVBQVE7QUFDTixlQUFPYSxTQUFTYixHQUFULENBQVA7QUFDRCxPQUZELE1BRU87QUFDTCxlQUFPYSxTQUFTLElBQVQsRUFBZVcsSUFBSU4sUUFBSixDQUFhLFFBQWIsQ0FBZixDQUFQO0FBQ0Q7QUFDRixLQVBJLENBQVA7QUFRRDtBQWxHa0IsQ0FBckI7O0FBcUdBLDBCQUFlakQsVUFBZjtrQkFDZSxtQkFBU3dELEtBQVQsQ0FBZSxNQUFmLEVBQXVCeEQsVUFBdkIsQyIsImZpbGUiOiJ1c2VyLm1vZGVsLmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hcGkvdXNlciIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8qZXNsaW50IG5vLWludmFsaWQtdGhpczowKi9cbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbm1vbmdvb3NlLlByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuaW1wb3J0IG1vbmdvb3NlLCB7U2NoZW1hfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQge3JlZ2lzdGVyRXZlbnRzfSBmcm9tICcuL3VzZXIuZXZlbnRzJztcblxuY29uc3QgYXV0aFR5cGVzID0gWydnaXRodWInLCAndHdpdHRlcicsICdmYWNlYm9vaycsICdnb29nbGUnXTtcblxudmFyIFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbmFtZTogU3RyaW5nLFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgcmVxdWlyZWQoKSB7XG4gICAgICBpZihhdXRoVHlwZXMuaW5kZXhPZih0aGlzLnByb3ZpZGVyKSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICd1c2VyJ1xuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZCgpIHtcbiAgICAgIGlmKGF1dGhUeXBlcy5pbmRleE9mKHRoaXMucHJvdmlkZXIpID09PSAtMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHByb3ZpZGVyOiBTdHJpbmcsXG4gIHNhbHQ6IFN0cmluZyxcbiAgZmFjZWJvb2s6IHt9LFxuICB0d2l0dGVyOiB7fSxcbiAgZ29vZ2xlOiB7fSxcbiAgZ2l0aHViOiB7fVxufSk7XG5cbi8qKlxuICogVmlydHVhbHNcbiAqL1xuXG4vLyBQdWJsaWMgcHJvZmlsZSBpbmZvcm1hdGlvblxuVXNlclNjaGVtYVxuICAudmlydHVhbCgncHJvZmlsZScpXG4gIC5nZXQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIHJvbGU6IHRoaXMucm9sZVxuICAgIH07XG4gIH0pO1xuXG4vLyBOb24tc2Vuc2l0aXZlIGluZm8gd2UnbGwgYmUgcHV0dGluZyBpbiB0aGUgdG9rZW5cblVzZXJTY2hlbWFcbiAgLnZpcnR1YWwoJ3Rva2VuJylcbiAgLmdldChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX2lkOiB0aGlzLl9pZCxcbiAgICAgIHJvbGU6IHRoaXMucm9sZVxuICAgIH07XG4gIH0pO1xuXG4vKipcbiAqIFZhbGlkYXRpb25zXG4gKi9cblxuLy8gVmFsaWRhdGUgZW1wdHkgZW1haWxcblVzZXJTY2hlbWFcbiAgLnBhdGgoJ2VtYWlsJylcbiAgLnZhbGlkYXRlKGZ1bmN0aW9uKGVtYWlsKSB7XG4gICAgaWYoYXV0aFR5cGVzLmluZGV4T2YodGhpcy5wcm92aWRlcikgIT09IC0xKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGVtYWlsLmxlbmd0aDtcbiAgfSwgJ0VtYWlsIGNhbm5vdCBiZSBibGFuaycpO1xuXG4vLyBWYWxpZGF0ZSBlbXB0eSBwYXNzd29yZFxuVXNlclNjaGVtYVxuICAucGF0aCgncGFzc3dvcmQnKVxuICAudmFsaWRhdGUoZnVuY3Rpb24ocGFzc3dvcmQpIHtcbiAgICBpZihhdXRoVHlwZXMuaW5kZXhPZih0aGlzLnByb3ZpZGVyKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcGFzc3dvcmQubGVuZ3RoO1xuICB9LCAnUGFzc3dvcmQgY2Fubm90IGJlIGJsYW5rJyk7XG5cbi8vIFZhbGlkYXRlIGVtYWlsIGlzIG5vdCB0YWtlblxuVXNlclNjaGVtYVxuICAucGF0aCgnZW1haWwnKVxuICAudmFsaWRhdGUoZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZihhdXRoVHlwZXMuaW5kZXhPZih0aGlzLnByb3ZpZGVyKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmZpbmRPbmUoeyBlbWFpbDogdmFsdWUgfSkuZXhlYygpXG4gICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgaWYodXNlcikge1xuICAgICAgICAgIGlmKHRoaXMuaWQgPT09IHVzZXIuaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9KTtcbiAgfSwgJ1RoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZS4nKTtcblxudmFyIHZhbGlkYXRlUHJlc2VuY2VPZiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGg7XG59O1xuXG4vKipcbiAqIFByZS1zYXZlIGhvb2tcbiAqL1xuVXNlclNjaGVtYVxuICAucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xuICAgIC8vIEhhbmRsZSBuZXcvdXBkYXRlIHBhc3N3b3Jkc1xuICAgIGlmKCF0aGlzLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfVxuXG4gICAgaWYoIXZhbGlkYXRlUHJlc2VuY2VPZih0aGlzLnBhc3N3b3JkKSkge1xuICAgICAgaWYoYXV0aFR5cGVzLmluZGV4T2YodGhpcy5wcm92aWRlcikgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignSW52YWxpZCBwYXNzd29yZCcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzYWx0IHdpdGggYSBjYWxsYmFja1xuICAgIHRoaXMubWFrZVNhbHQoKHNhbHRFcnIsIHNhbHQpID0+IHtcbiAgICAgIGlmKHNhbHRFcnIpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoc2FsdEVycik7XG4gICAgICB9XG4gICAgICB0aGlzLnNhbHQgPSBzYWx0O1xuICAgICAgdGhpcy5lbmNyeXB0UGFzc3dvcmQodGhpcy5wYXNzd29yZCwgKGVuY3J5cHRFcnIsIGhhc2hlZFBhc3N3b3JkKSA9PiB7XG4gICAgICAgIGlmKGVuY3J5cHRFcnIpIHtcbiAgICAgICAgICByZXR1cm4gbmV4dChlbmNyeXB0RXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhc3N3b3JkID0gaGFzaGVkUGFzc3dvcmQ7XG4gICAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbi8qKlxuICogTWV0aG9kc1xuICovXG5Vc2VyU2NoZW1hLm1ldGhvZHMgPSB7XG4gIC8qKlxuICAgKiBBdXRoZW50aWNhdGUgLSBjaGVjayBpZiB0aGUgcGFzc3dvcmRzIGFyZSB0aGUgc2FtZVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFzc3dvcmRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGF1dGhlbnRpY2F0ZShwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICBpZighY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnBhc3N3b3JkID09PSB0aGlzLmVuY3J5cHRQYXNzd29yZChwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbmNyeXB0UGFzc3dvcmQocGFzc3dvcmQsIChlcnIsIHB3ZEdlbikgPT4ge1xuICAgICAgaWYoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZih0aGlzLnBhc3N3b3JkID09PSBwd2RHZW4pIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogTWFrZSBzYWx0XG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbYnl0ZVNpemVdIC0gT3B0aW9uYWwgc2FsdCBieXRlIHNpemUsIGRlZmF1bHQgdG8gMTZcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKiBAYXBpIHB1YmxpY1xuICAgKi9cbiAgbWFrZVNhbHQoLi4uYXJncykge1xuICAgIGxldCBieXRlU2l6ZTtcbiAgICBsZXQgY2FsbGJhY2s7XG4gICAgbGV0IGRlZmF1bHRCeXRlU2l6ZSA9IDE2O1xuXG4gICAgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJnc1swXTtcbiAgICAgIGJ5dGVTaXplID0gZGVmYXVsdEJ5dGVTaXplO1xuICAgIH0gZWxzZSBpZih0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBhcmdzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgQ2FsbGJhY2snKTtcbiAgICB9XG5cbiAgICBpZighYnl0ZVNpemUpIHtcbiAgICAgIGJ5dGVTaXplID0gZGVmYXVsdEJ5dGVTaXplO1xuICAgIH1cblxuICAgIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMoYnl0ZVNpemUsIChlcnIsIHNhbHQpID0+IHtcbiAgICAgIGlmKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzYWx0LnRvU3RyaW5nKCdiYXNlNjQnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVuY3J5cHQgcGFzc3dvcmRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICogQGFwaSBwdWJsaWNcbiAgICovXG4gIGVuY3J5cHRQYXNzd29yZChwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICBpZighcGFzc3dvcmQgfHwgIXRoaXMuc2FsdCkge1xuICAgICAgaWYoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCdNaXNzaW5nIHBhc3N3b3JkIG9yIHNhbHQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdEl0ZXJhdGlvbnMgPSAxMDAwMDtcbiAgICB2YXIgZGVmYXVsdEtleUxlbmd0aCA9IDY0O1xuICAgIHZhciBzYWx0ID0gbmV3IEJ1ZmZlcih0aGlzLnNhbHQsICdiYXNlNjQnKTtcblxuICAgIGlmKCFjYWxsYmFjaykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXN5bmNcbiAgICAgIHJldHVybiBjcnlwdG8ucGJrZGYyU3luYyhwYXNzd29yZCwgc2FsdCwgZGVmYXVsdEl0ZXJhdGlvbnMsXG4gICAgICAgICAgZGVmYXVsdEtleUxlbmd0aCwgJ3NoYTEnKVxuICAgICAgICAudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cblxuICAgIHJldHVybiBjcnlwdG8ucGJrZGYyKHBhc3N3b3JkLCBzYWx0LCBkZWZhdWx0SXRlcmF0aW9ucywgZGVmYXVsdEtleUxlbmd0aCxcbiAgICAgICdzaGExJywgKGVyciwga2V5KSA9PiB7XG4gICAgICAgIGlmKGVycikge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBrZXkudG9TdHJpbmcoJ2Jhc2U2NCcpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cbn07XG5cbnJlZ2lzdGVyRXZlbnRzKFVzZXJTY2hlbWEpO1xuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "user.model.js"
      ],
      "names": [
        "Promise",
        "require",
        "authTypes",
        "UserSchema",
        "name",
        "String",
        "email",
        "type",
        "lowercase",
        "required",
        "indexOf",
        "provider",
        "role",
        "default",
        "password",
        "salt",
        "facebook",
        "twitter",
        "google",
        "github",
        "virtual",
        "get",
        "_id",
        "path",
        "validate",
        "length",
        "value",
        "constructor",
        "findOne",
        "exec",
        "then",
        "user",
        "id",
        "catch",
        "err",
        "validatePresenceOf",
        "pre",
        "next",
        "isModified",
        "Error",
        "makeSalt",
        "saltErr",
        "encryptPassword",
        "encryptErr",
        "hashedPassword",
        "methods",
        "authenticate",
        "callback",
        "pwdGen",
        "byteSize",
        "defaultByteSize",
        "randomBytes",
        "toString",
        "defaultIterations",
        "defaultKeyLength",
        "Buffer",
        "pbkdf2Sync",
        "pbkdf2",
        "key",
        "model"
      ],
      "mappings": "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",
      "file": "user.model.js",
      "sourceRoot": "/root/server/api/user",
      "sourcesContent": [
        "'use strict';\n/*eslint no-invalid-this:0*/\nimport crypto from 'crypto';\nmongoose.Promise = require('bluebird');\nimport mongoose, {Schema} from 'mongoose';\nimport {registerEvents} from './user.events';\n\nconst authTypes = ['github', 'twitter', 'facebook', 'google'];\n\nvar UserSchema = new Schema({\n  name: String,\n  email: {\n    type: String,\n    lowercase: true,\n    required() {\n      if(authTypes.indexOf(this.provider) === -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  role: {\n    type: String,\n    default: 'user'\n  },\n  password: {\n    type: String,\n    required() {\n      if(authTypes.indexOf(this.provider) === -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  provider: String,\n  salt: String,\n  facebook: {},\n  twitter: {},\n  google: {},\n  github: {}\n});\n\n/**\n * Virtuals\n */\n\n// Public profile information\nUserSchema\n  .virtual('profile')\n  .get(function() {\n    return {\n      name: this.name,\n      role: this.role\n    };\n  });\n\n// Non-sensitive info we'll be putting in the token\nUserSchema\n  .virtual('token')\n  .get(function() {\n    return {\n      _id: this._id,\n      role: this.role\n    };\n  });\n\n/**\n * Validations\n */\n\n// Validate empty email\nUserSchema\n  .path('email')\n  .validate(function(email) {\n    if(authTypes.indexOf(this.provider) !== -1) {\n      return true;\n    }\n    return email.length;\n  }, 'Email cannot be blank');\n\n// Validate empty password\nUserSchema\n  .path('password')\n  .validate(function(password) {\n    if(authTypes.indexOf(this.provider) !== -1) {\n      return true;\n    }\n    return password.length;\n  }, 'Password cannot be blank');\n\n// Validate email is not taken\nUserSchema\n  .path('email')\n  .validate(function(value) {\n    if(authTypes.indexOf(this.provider) !== -1) {\n      return true;\n    }\n\n    return this.constructor.findOne({ email: value }).exec()\n      .then(user => {\n        if(user) {\n          if(this.id === user.id) {\n            return true;\n          }\n          return false;\n        }\n        return true;\n      })\n      .catch(function(err) {\n        throw err;\n      });\n  }, 'The specified email address is already in use.');\n\nvar validatePresenceOf = function(value) {\n  return value && value.length;\n};\n\n/**\n * Pre-save hook\n */\nUserSchema\n  .pre('save', function(next) {\n    // Handle new/update passwords\n    if(!this.isModified('password')) {\n      return next();\n    }\n\n    if(!validatePresenceOf(this.password)) {\n      if(authTypes.indexOf(this.provider) === -1) {\n        return next(new Error('Invalid password'));\n      } else {\n        return next();\n      }\n    }\n\n    // Make salt with a callback\n    this.makeSalt((saltErr, salt) => {\n      if(saltErr) {\n        return next(saltErr);\n      }\n      this.salt = salt;\n      this.encryptPassword(this.password, (encryptErr, hashedPassword) => {\n        if(encryptErr) {\n          return next(encryptErr);\n        }\n        this.password = hashedPassword;\n        return next();\n      });\n    });\n  });\n\n/**\n * Methods\n */\nUserSchema.methods = {\n  /**\n   * Authenticate - check if the passwords are the same\n   *\n   * @param {String} password\n   * @param {Function} callback\n   * @return {Boolean}\n   * @api public\n   */\n  authenticate(password, callback) {\n    if(!callback) {\n      return this.password === this.encryptPassword(password);\n    }\n\n    this.encryptPassword(password, (err, pwdGen) => {\n      if(err) {\n        return callback(err);\n      }\n\n      if(this.password === pwdGen) {\n        return callback(null, true);\n      } else {\n        return callback(null, false);\n      }\n    });\n  },\n\n  /**\n   * Make salt\n   *\n   * @param {Number} [byteSize] - Optional salt byte size, default to 16\n   * @param {Function} callback\n   * @return {String}\n   * @api public\n   */\n  makeSalt(...args) {\n    let byteSize;\n    let callback;\n    let defaultByteSize = 16;\n\n    if(typeof args[0] === 'function') {\n      callback = args[0];\n      byteSize = defaultByteSize;\n    } else if(typeof args[1] === 'function') {\n      callback = args[1];\n    } else {\n      throw new Error('Missing Callback');\n    }\n\n    if(!byteSize) {\n      byteSize = defaultByteSize;\n    }\n\n    return crypto.randomBytes(byteSize, (err, salt) => {\n      if(err) {\n        return callback(err);\n      } else {\n        return callback(null, salt.toString('base64'));\n      }\n    });\n  },\n\n  /**\n   * Encrypt password\n   *\n   * @param {String} password\n   * @param {Function} callback\n   * @return {String}\n   * @api public\n   */\n  encryptPassword(password, callback) {\n    if(!password || !this.salt) {\n      if(!callback) {\n        return null;\n      } else {\n        return callback('Missing password or salt');\n      }\n    }\n\n    var defaultIterations = 10000;\n    var defaultKeyLength = 64;\n    var salt = new Buffer(this.salt, 'base64');\n\n    if(!callback) {\n      // eslint-disable-next-line no-sync\n      return crypto.pbkdf2Sync(password, salt, defaultIterations,\n          defaultKeyLength, 'sha1')\n        .toString('base64');\n    }\n\n    return crypto.pbkdf2(password, salt, defaultIterations, defaultKeyLength,\n      'sha1', (err, key) => {\n        if(err) {\n          return callback(err);\n        } else {\n          return callback(null, key.toString('base64'));\n        }\n      });\n  }\n};\n\nregisterEvents(UserSchema);\nexport default mongoose.model('User', UserSchema);\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/api/user/user.events.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/user\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerEvents"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerEvents",
              "exported": "registerEvents"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/user/user.events.js",
      "filenameRelative": "/root/server/api/user/user.events.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "user.events.js",
      "sourceFileName": "user.events.js",
      "sourceRoot": "/root/server/api/user",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/user",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "user.events"
    },
    "ignored": false,
    "code": "/**\n * User model events\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerEvents = undefined;\n\nvar _events = require('events');\n\nvar UserEvents = new _events.EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nUserEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(User) {\n  for (var e in events) {\n    var event = events[e];\n    User.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function (doc) {\n    UserEvents.emit(event + ':' + doc._id, doc);\n    UserEvents.emit(event, doc);\n  };\n}\n\nexports.registerEvents = registerEvents;\nexports.default = UserEvents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuZXZlbnRzLmpzIl0sIm5hbWVzIjpbIlVzZXJFdmVudHMiLCJzZXRNYXhMaXN0ZW5lcnMiLCJldmVudHMiLCJzYXZlIiwicmVtb3ZlIiwicmVnaXN0ZXJFdmVudHMiLCJVc2VyIiwiZSIsImV2ZW50IiwicG9zdCIsImVtaXRFdmVudCIsImRvYyIsImVtaXQiLCJfaWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBSUE7Ozs7Ozs7QUFFQTs7QUFDQSxJQUFJQSxhQUFhLDBCQUFqQjs7QUFFQTtBQUNBQSxXQUFXQyxlQUFYLENBQTJCLENBQTNCOztBQUVBO0FBQ0EsSUFBSUMsU0FBUztBQUNYQyxRQUFNLE1BREs7QUFFWEMsVUFBUTtBQUZHLENBQWI7O0FBS0E7QUFDQSxTQUFTQyxjQUFULENBQXdCQyxJQUF4QixFQUE4QjtBQUM1QixPQUFJLElBQUlDLENBQVIsSUFBYUwsTUFBYixFQUFxQjtBQUNuQixRQUFJTSxRQUFRTixPQUFPSyxDQUFQLENBQVo7QUFDQUQsU0FBS0csSUFBTCxDQUFVRixDQUFWLEVBQWFHLFVBQVVGLEtBQVYsQ0FBYjtBQUNEO0FBQ0Y7O0FBRUQsU0FBU0UsU0FBVCxDQUFtQkYsS0FBbkIsRUFBMEI7QUFDeEIsU0FBTyxVQUFTRyxHQUFULEVBQWM7QUFDbkJYLGVBQVdZLElBQVgsQ0FBbUJKLEtBQW5CLFNBQTRCRyxJQUFJRSxHQUFoQyxFQUF1Q0YsR0FBdkM7QUFDQVgsZUFBV1ksSUFBWCxDQUFnQkosS0FBaEIsRUFBdUJHLEdBQXZCO0FBQ0QsR0FIRDtBQUlEOztRQUVPTixjLEdBQUFBLGM7a0JBQ09MLFUiLCJmaWxlIjoidXNlci5ldmVudHMuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2FwaS91c2VyIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVc2VyIG1vZGVsIGV2ZW50c1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gJ2V2ZW50cyc7XG52YXIgVXNlckV2ZW50cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuLy8gU2V0IG1heCBldmVudCBsaXN0ZW5lcnMgKDAgPT0gdW5saW1pdGVkKVxuVXNlckV2ZW50cy5zZXRNYXhMaXN0ZW5lcnMoMCk7XG5cbi8vIE1vZGVsIGV2ZW50c1xudmFyIGV2ZW50cyA9IHtcbiAgc2F2ZTogJ3NhdmUnLFxuICByZW1vdmU6ICdyZW1vdmUnXG59O1xuXG4vLyBSZWdpc3RlciB0aGUgZXZlbnQgZW1pdHRlciB0byB0aGUgbW9kZWwgZXZlbnRzXG5mdW5jdGlvbiByZWdpc3RlckV2ZW50cyhVc2VyKSB7XG4gIGZvcih2YXIgZSBpbiBldmVudHMpIHtcbiAgICBsZXQgZXZlbnQgPSBldmVudHNbZV07XG4gICAgVXNlci5wb3N0KGUsIGVtaXRFdmVudChldmVudCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRFdmVudChldmVudCkge1xuICByZXR1cm4gZnVuY3Rpb24oZG9jKSB7XG4gICAgVXNlckV2ZW50cy5lbWl0KGAke2V2ZW50fToke2RvYy5faWR9YCwgZG9jKTtcbiAgICBVc2VyRXZlbnRzLmVtaXQoZXZlbnQsIGRvYyk7XG4gIH07XG59XG5cbmV4cG9ydCB7cmVnaXN0ZXJFdmVudHN9O1xuZXhwb3J0IGRlZmF1bHQgVXNlckV2ZW50cztcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "user.events.js"
      ],
      "names": [
        "UserEvents",
        "setMaxListeners",
        "events",
        "save",
        "remove",
        "registerEvents",
        "User",
        "e",
        "event",
        "post",
        "emitEvent",
        "doc",
        "emit",
        "_id"
      ],
      "mappings": "AAAA;;;;AAIA;;;;;;;AAEA;;AACA,IAAIA,aAAa,0BAAjB;;AAEA;AACAA,WAAWC,eAAX,CAA2B,CAA3B;;AAEA;AACA,IAAIC,SAAS;AACXC,QAAM,MADK;AAEXC,UAAQ;AAFG,CAAb;;AAKA;AACA,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,OAAI,IAAIC,CAAR,IAAaL,MAAb,EAAqB;AACnB,QAAIM,QAAQN,OAAOK,CAAP,CAAZ;AACAD,SAAKG,IAAL,CAAUF,CAAV,EAAaG,UAAUF,KAAV,CAAb;AACD;AACF;;AAED,SAASE,SAAT,CAAmBF,KAAnB,EAA0B;AACxB,SAAO,UAASG,GAAT,EAAc;AACnBX,eAAWY,IAAX,CAAmBJ,KAAnB,SAA4BG,IAAIE,GAAhC,EAAuCF,GAAvC;AACAX,eAAWY,IAAX,CAAgBJ,KAAhB,EAAuBG,GAAvB;AACD,GAHD;AAID;;QAEON,c,GAAAA,c;kBACOL,U",
      "file": "user.events.js",
      "sourceRoot": "/root/server/api/user",
      "sourcesContent": [
        "/**\n * User model events\n */\n\n'use strict';\n\nimport {EventEmitter} from 'events';\nvar UserEvents = new EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nUserEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(User) {\n  for(var e in events) {\n    let event = events[e];\n    User.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function(doc) {\n    UserEvents.emit(`${event}:${doc._id}`, doc);\n    UserEvents.emit(event, doc);\n  };\n}\n\nexport {registerEvents};\nexport default UserEvents;\n"
      ]
    },
    "mtime": 1507831001789
  },
  "{\"filename\":\"/root/server/config/express.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/config\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "serve-favicon",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "favicon"
              }
            ]
          },
          {
            "source": "morgan",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "morgan"
              }
            ]
          },
          {
            "source": "shrink-ray",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "shrinkRay"
              }
            ]
          },
          {
            "source": "body-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bodyParser"
              }
            ]
          },
          {
            "source": "method-override",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "methodOverride"
              }
            ]
          },
          {
            "source": "cookie-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cookieParser"
              }
            ]
          },
          {
            "source": "errorhandler",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "errorHandler"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "lusca",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "lusca"
              }
            ]
          },
          {
            "source": "./environment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "express-session",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "session"
              }
            ]
          },
          {
            "source": "connect-mongo",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "connectMongo"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "app"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "app",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/config/express.js",
      "filenameRelative": "/root/server/config/express.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "express.js",
      "sourceFileName": "express.js",
      "sourceRoot": "/root/server/config",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/config",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "express"
    },
    "ignored": false,
    "code": "/**\n * Express configuration\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (app) {\n  var env = app.get('env');\n\n  if (env === 'development' || env === 'test') {\n    app.use(_express2.default.static(_path2.default.join(_environment2.default.root, '.tmp')));\n  }\n\n  if (env === 'production') {\n    app.use((0, _serveFavicon2.default)(_path2.default.join(_environment2.default.root, 'client', 'favicon.ico')));\n  }\n\n  app.set('appPath', _path2.default.join(_environment2.default.root, 'client'));\n  app.use(_express2.default.static(app.get('appPath')));\n  app.use((0, _morgan2.default)('dev'));\n\n  app.set('views', _environment2.default.root + '/server/views');\n  app.engine('html', require('ejs').renderFile);\n  app.set('view engine', 'html');\n  app.use((0, _shrinkRay2.default)());\n  app.use(_bodyParser2.default.urlencoded({ extended: false }));\n  app.use(_bodyParser2.default.json());\n  app.use((0, _methodOverride2.default)());\n  app.use((0, _cookieParser2.default)());\n  app.use(_passport2.default.initialize());\n\n  // Persist sessions with MongoStore / sequelizeStore\n  // We need to enable sessions for passport-twitter because it's an\n  // oauth 1.0 strategy, and Lusca depends on sessions\n  app.use((0, _expressSession2.default)({\n    secret: _environment2.default.secrets.session,\n    saveUninitialized: true,\n    resave: false,\n    store: new MongoStore({\n      mongooseConnection: _mongoose2.default.connection,\n      db: 'freetio'\n    })\n  }));\n\n  /**\n   * Lusca - express server security\n   * https://github.com/krakenjs/lusca\n   */\n  if (env !== 'test' && !process.env.SAUCE_USERNAME) {\n    app.use((0, _lusca2.default)({\n      csrf: {\n        angular: true\n      },\n      xframe: 'SAMEORIGIN',\n      hsts: {\n        maxAge: 31536000, //1 year, in seconds\n        includeSubDomains: true,\n        preload: true\n      },\n      xssProtection: true\n    }));\n  }\n\n  if (env === 'development') {\n    var webpackDevMiddleware = require('webpack-dev-middleware');\n    var stripAnsi = require('strip-ansi');\n    var webpack = require('webpack');\n    var makeWebpackConfig = require('../../webpack.make');\n    var webpackConfig = makeWebpackConfig({ DEV: true });\n    var compiler = webpack(webpackConfig);\n    var browserSync = require('browser-sync').create();\n\n    /**\n     * Run Browsersync and use middleware for Hot Module Replacement\n     */\n    browserSync.init({\n      open: false,\n      logFileChanges: false,\n      proxy: 'localhost:' + _environment2.default.port,\n      ws: true,\n      middleware: [webpackDevMiddleware(compiler, {\n        noInfo: false,\n        stats: {\n          colors: true,\n          timings: true,\n          chunks: false\n        }\n      })],\n      port: _environment2.default.browserSyncPort,\n      plugins: ['bs-fullscreen-message']\n    });\n\n    /**\n     * Reload all devices when bundle is complete\n     * or send a fullscreen error message to the browser instead\n     */\n    compiler.plugin('done', function (stats) {\n      console.log('webpack done hook');\n      if (stats.hasErrors() || stats.hasWarnings()) {\n        return browserSync.sockets.emit('fullscreen:message', {\n          title: 'Webpack Error:',\n          body: stripAnsi(stats.toString()),\n          timeout: 100000\n        });\n      }\n      browserSync.reload();\n    });\n  }\n\n  if (env === 'development' || env === 'test') {\n    app.use((0, _errorhandler2.default)()); // Error handler - has to be last\n  }\n};\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _serveFavicon = require('serve-favicon');\n\nvar _serveFavicon2 = _interopRequireDefault(_serveFavicon);\n\nvar _morgan = require('morgan');\n\nvar _morgan2 = _interopRequireDefault(_morgan);\n\nvar _shrinkRay = require('shrink-ray');\n\nvar _shrinkRay2 = _interopRequireDefault(_shrinkRay);\n\nvar _bodyParser = require('body-parser');\n\nvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\nvar _methodOverride = require('method-override');\n\nvar _methodOverride2 = _interopRequireDefault(_methodOverride);\n\nvar _cookieParser = require('cookie-parser');\n\nvar _cookieParser2 = _interopRequireDefault(_cookieParser);\n\nvar _errorhandler = require('errorhandler');\n\nvar _errorhandler2 = _interopRequireDefault(_errorhandler);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lusca = require('lusca');\n\nvar _lusca2 = _interopRequireDefault(_lusca);\n\nvar _environment = require('./environment');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _expressSession = require('express-session');\n\nvar _expressSession2 = _interopRequireDefault(_expressSession);\n\nvar _connectMongo = require('connect-mongo');\n\nvar _connectMongo2 = _interopRequireDefault(_connectMongo);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MongoStore = (0, _connectMongo2.default)(_expressSession2.default);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cHJlc3MuanMiXSwibmFtZXMiOlsiYXBwIiwiZW52IiwiZ2V0IiwidXNlIiwic3RhdGljIiwiam9pbiIsInJvb3QiLCJzZXQiLCJlbmdpbmUiLCJyZXF1aXJlIiwicmVuZGVyRmlsZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJpbml0aWFsaXplIiwic2VjcmV0Iiwic2VjcmV0cyIsInNlc3Npb24iLCJzYXZlVW5pbml0aWFsaXplZCIsInJlc2F2ZSIsInN0b3JlIiwiTW9uZ29TdG9yZSIsIm1vbmdvb3NlQ29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJkYiIsInByb2Nlc3MiLCJTQVVDRV9VU0VSTkFNRSIsImNzcmYiLCJhbmd1bGFyIiwieGZyYW1lIiwiaHN0cyIsIm1heEFnZSIsImluY2x1ZGVTdWJEb21haW5zIiwicHJlbG9hZCIsInhzc1Byb3RlY3Rpb24iLCJ3ZWJwYWNrRGV2TWlkZGxld2FyZSIsInN0cmlwQW5zaSIsIndlYnBhY2siLCJtYWtlV2VicGFja0NvbmZpZyIsIndlYnBhY2tDb25maWciLCJERVYiLCJjb21waWxlciIsImJyb3dzZXJTeW5jIiwiY3JlYXRlIiwiaW5pdCIsIm9wZW4iLCJsb2dGaWxlQ2hhbmdlcyIsInByb3h5IiwicG9ydCIsIndzIiwibWlkZGxld2FyZSIsIm5vSW5mbyIsInN0YXRzIiwiY29sb3JzIiwidGltaW5ncyIsImNodW5rcyIsImJyb3dzZXJTeW5jUG9ydCIsInBsdWdpbnMiLCJwbHVnaW4iLCJjb25zb2xlIiwibG9nIiwiaGFzRXJyb3JzIiwiaGFzV2FybmluZ3MiLCJzb2NrZXRzIiwiZW1pdCIsInRpdGxlIiwiYm9keSIsInRvU3RyaW5nIiwidGltZW91dCIsInJlbG9hZCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFJQTs7Ozs7O2tCQW1CZSxVQUFTQSxHQUFULEVBQWM7QUFDM0IsTUFBSUMsTUFBTUQsSUFBSUUsR0FBSixDQUFRLEtBQVIsQ0FBVjs7QUFFQSxNQUFHRCxRQUFRLGFBQVIs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QkFBUTtBQUhIO0FBRnNCLE9BQS9CLENBRFUsQ0FMRztBQWVmUCxZQUFNLHNCQUFPUSxlQWZFO0FBZ0JmQyxlQUFTLENBQUMsdUJBQUQ7QUFoQk0sS0FBakI7O0FBbUJBOzs7O0FBSUFoQixhQUFTaUIsTUFBVCxDQUFnQixNQUFoQixFQUF3QixVQUFTTixLQUFULEVBQWdCO0FBQ3RDTyxjQUFRQyxHQUFSLENBQVksbUJBQVo7QUFDQSxVQUFHUixNQUFNUyxTQUFOLE1BQXFCVCxNQUFNVSxXQUFOLEVBQXhCLEVBQTZDO0FBQzNDLGVBQU9wQixZQUFZcUIsT0FBWixDQUFvQkMsSUFBcEIsQ0FBeUIsb0JBQXpCLEVBQStDO0FBQ3BEQyxpQkFBTyxnQkFENkM7QUFFcERDLGdCQUFNOUIsVUFBVWdCLE1BQU1lLFFBQU4sRUFBVixDQUY4QztBQUdwREMsbUJBQVM7QUFIMkMsU0FBL0MsQ0FBUDtBQUtEO0FBQ0QxQixrQkFBWTJCLE1BQVo7QUFDRCxLQVZEO0FBV0Q7O0FBRUQsTUFBR3BFLFFBQVEsYUFBUixJQUF5QkEsUUFBUSxNQUFwQyxFQUE0QztBQUMxQ0QsUUFBSUcsR0FBSixDQUFRLDZCQUFSLEVBRDBDLENBQ2pCO0FBQzFCO0FBQ0YsQzs7QUE5SEQ7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFDQSxJQUFJa0IsYUFBYSxxREFBakIiLCJmaWxlIjoiZXhwcmVzcy5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvY29uZmlnIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFeHByZXNzIGNvbmZpZ3VyYXRpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGZhdmljb24gZnJvbSAnc2VydmUtZmF2aWNvbic7XG5pbXBvcnQgbW9yZ2FuIGZyb20gJ21vcmdhbic7XG5pbXBvcnQgc2hyaW5rUmF5IGZyb20gJ3Nocmluay1yYXknO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IG1ldGhvZE92ZXJyaWRlIGZyb20gJ21ldGhvZC1vdmVycmlkZSc7XG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xuaW1wb3J0IGVycm9ySGFuZGxlciBmcm9tICdlcnJvcmhhbmRsZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgbHVzY2EgZnJvbSAnbHVzY2EnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2Vudmlyb25tZW50JztcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5pbXBvcnQgc2Vzc2lvbiBmcm9tICdleHByZXNzLXNlc3Npb24nO1xuaW1wb3J0IGNvbm5lY3RNb25nbyBmcm9tICdjb25uZWN0LW1vbmdvJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG52YXIgTW9uZ29TdG9yZSA9IGNvbm5lY3RNb25nbyhzZXNzaW9uKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYXBwKSB7XG4gIHZhciBlbnYgPSBhcHAuZ2V0KCdlbnYnKTtcblxuICBpZihlbnYgPT09ICdkZXZlbG9wbWVudCcgfHwgZW52ID09PSAndGVzdCcpIHtcbiAgICBhcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihjb25maWcucm9vdCwgJy50bXAnKSkpO1xuICB9XG5cbiAgaWYoZW52ID09PSAncHJvZHVjdGlvbicpIHtcbiAgICBhcHAudXNlKGZhdmljb24ocGF0aC5qb2luKGNvbmZpZy5yb290LCAnY2xpZW50JywgJ2Zhdmljb24uaWNvJykpKTtcbiAgfVxuXG4gIGFwcC5zZXQoJ2FwcFBhdGgnLCBwYXRoLmpvaW4oY29uZmlnLnJvb3QsICdjbGllbnQnKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMoYXBwLmdldCgnYXBwUGF0aCcpKSk7XG4gIGFwcC51c2UobW9yZ2FuKCdkZXYnKSk7XG5cbiAgYXBwLnNldCgndmlld3MnLCBgJHtjb25maWcucm9vdH0vc2VydmVyL3ZpZXdzYCk7XG4gIGFwcC5lbmdpbmUoJ2h0bWwnLCByZXF1aXJlKCdlanMnKS5yZW5kZXJGaWxlKTtcbiAgYXBwLnNldCgndmlldyBlbmdpbmUnLCAnaHRtbCcpO1xuICBhcHAudXNlKHNocmlua1JheSgpKTtcbiAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbiAgYXBwLnVzZShtZXRob2RPdmVycmlkZSgpKTtcbiAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gIGFwcC51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcblxuXG4gIC8vIFBlcnNpc3Qgc2Vzc2lvbnMgd2l0aCBNb25nb1N0b3JlIC8gc2VxdWVsaXplU3RvcmVcbiAgLy8gV2UgbmVlZCB0byBlbmFibGUgc2Vzc2lvbnMgZm9yIHBhc3Nwb3J0LXR3aXR0ZXIgYmVjYXVzZSBpdCdzIGFuXG4gIC8vIG9hdXRoIDEuMCBzdHJhdGVneSwgYW5kIEx1c2NhIGRlcGVuZHMgb24gc2Vzc2lvbnNcbiAgYXBwLnVzZShzZXNzaW9uKHtcbiAgICBzZWNyZXQ6IGNvbmZpZy5zZWNyZXRzLnNlc3Npb24sXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgcmVzYXZlOiBmYWxzZSxcbiAgICBzdG9yZTogbmV3IE1vbmdvU3RvcmUoe1xuICAgICAgbW9uZ29vc2VDb25uZWN0aW9uOiBtb25nb29zZS5jb25uZWN0aW9uLFxuICAgICAgZGI6ICdmcmVldGlvJ1xuICAgIH0pXG4gIH0pKTtcblxuICAvKipcbiAgICogTHVzY2EgLSBleHByZXNzIHNlcnZlciBzZWN1cml0eVxuICAgKiBodHRwczovL2dpdGh1Yi5jb20va3Jha2VuanMvbHVzY2FcbiAgICovXG4gIGlmKGVudiAhPT0gJ3Rlc3QnICYmICFwcm9jZXNzLmVudi5TQVVDRV9VU0VSTkFNRSkge1xuICAgIGFwcC51c2UobHVzY2Eoe1xuICAgICAgY3NyZjoge1xuICAgICAgICBhbmd1bGFyOiB0cnVlXG4gICAgICB9LFxuICAgICAgeGZyYW1lOiAnU0FNRU9SSUdJTicsXG4gICAgICBoc3RzOiB7XG4gICAgICAgIG1heEFnZTogMzE1MzYwMDAsIC8vMSB5ZWFyLCBpbiBzZWNvbmRzXG4gICAgICAgIGluY2x1ZGVTdWJEb21haW5zOiB0cnVlLFxuICAgICAgICBwcmVsb2FkOiB0cnVlXG4gICAgICB9LFxuICAgICAgeHNzUHJvdGVjdGlvbjogdHJ1ZVxuICAgIH0pKTtcbiAgfVxuXG4gIGlmKGVudiA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgIGNvbnN0IHdlYnBhY2tEZXZNaWRkbGV3YXJlID0gcmVxdWlyZSgnd2VicGFjay1kZXYtbWlkZGxld2FyZScpO1xuICAgIGNvbnN0IHN0cmlwQW5zaSA9IHJlcXVpcmUoJ3N0cmlwLWFuc2knKTtcbiAgICBjb25zdCB3ZWJwYWNrID0gcmVxdWlyZSgnd2VicGFjaycpO1xuICAgIGNvbnN0IG1ha2VXZWJwYWNrQ29uZmlnID0gcmVxdWlyZSgnLi4vLi4vd2VicGFjay5tYWtlJyk7XG4gICAgY29uc3Qgd2VicGFja0NvbmZpZyA9IG1ha2VXZWJwYWNrQ29uZmlnKHsgREVWOiB0cnVlIH0pO1xuICAgIGNvbnN0IGNvbXBpbGVyID0gd2VicGFjayh3ZWJwYWNrQ29uZmlnKTtcbiAgICBjb25zdCBicm93c2VyU3luYyA9IHJlcXVpcmUoJ2Jyb3dzZXItc3luYycpLmNyZWF0ZSgpO1xuXG4gICAgLyoqXG4gICAgICogUnVuIEJyb3dzZXJzeW5jIGFuZCB1c2UgbWlkZGxld2FyZSBmb3IgSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuICAgICAqL1xuICAgIGJyb3dzZXJTeW5jLmluaXQoe1xuICAgICAgb3BlbjogZmFsc2UsXG4gICAgICBsb2dGaWxlQ2hhbmdlczogZmFsc2UsXG4gICAgICBwcm94eTogYGxvY2FsaG9zdDoke2NvbmZpZy5wb3J0fWAsXG4gICAgICB3czogdHJ1ZSxcbiAgICAgIG1pZGRsZXdhcmU6IFtcbiAgICAgICAgd2VicGFja0Rldk1pZGRsZXdhcmUoY29tcGlsZXIsIHtcbiAgICAgICAgICBub0luZm86IGZhbHNlLFxuICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICBjb2xvcnM6IHRydWUsXG4gICAgICAgICAgICB0aW1pbmdzOiB0cnVlLFxuICAgICAgICAgICAgY2h1bmtzOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIF0sXG4gICAgICBwb3J0OiBjb25maWcuYnJvd3NlclN5bmNQb3J0LFxuICAgICAgcGx1Z2luczogWydicy1mdWxsc2NyZWVuLW1lc3NhZ2UnXVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVsb2FkIGFsbCBkZXZpY2VzIHdoZW4gYnVuZGxlIGlzIGNvbXBsZXRlXG4gICAgICogb3Igc2VuZCBhIGZ1bGxzY3JlZW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgYnJvd3NlciBpbnN0ZWFkXG4gICAgICovXG4gICAgY29tcGlsZXIucGx1Z2luKCdkb25lJywgZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd3ZWJwYWNrIGRvbmUgaG9vaycpO1xuICAgICAgaWYoc3RhdHMuaGFzRXJyb3JzKCkgfHwgc3RhdHMuaGFzV2FybmluZ3MoKSkge1xuICAgICAgICByZXR1cm4gYnJvd3NlclN5bmMuc29ja2V0cy5lbWl0KCdmdWxsc2NyZWVuOm1lc3NhZ2UnLCB7XG4gICAgICAgICAgdGl0bGU6ICdXZWJwYWNrIEVycm9yOicsXG4gICAgICAgICAgYm9keTogc3RyaXBBbnNpKHN0YXRzLnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwMFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGJyb3dzZXJTeW5jLnJlbG9hZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYoZW52ID09PSAnZGV2ZWxvcG1lbnQnIHx8IGVudiA9PT0gJ3Rlc3QnKSB7XG4gICAgYXBwLnVzZShlcnJvckhhbmRsZXIoKSk7IC8vIEVycm9yIGhhbmRsZXIgLSBoYXMgdG8gYmUgbGFzdFxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "express.js"
      ],
      "names": [
        "app",
        "env",
        "get",
        "use",
        "static",
        "join",
        "root",
        "set",
        "engine",
        "require",
        "renderFile",
        "urlencoded",
        "extended",
        "json",
        "initialize",
        "secret",
        "secrets",
        "session",
        "saveUninitialized",
        "resave",
        "store",
        "MongoStore",
        "mongooseConnection",
        "connection",
        "db",
        "process",
        "SAUCE_USERNAME",
        "csrf",
        "angular",
        "xframe",
        "hsts",
        "maxAge",
        "includeSubDomains",
        "preload",
        "xssProtection",
        "webpackDevMiddleware",
        "stripAnsi",
        "webpack",
        "makeWebpackConfig",
        "webpackConfig",
        "DEV",
        "compiler",
        "browserSync",
        "create",
        "init",
        "open",
        "logFileChanges",
        "proxy",
        "port",
        "ws",
        "middleware",
        "noInfo",
        "stats",
        "colors",
        "timings",
        "chunks",
        "browserSyncPort",
        "plugins",
        "plugin",
        "console",
        "log",
        "hasErrors",
        "hasWarnings",
        "sockets",
        "emit",
        "title",
        "body",
        "toString",
        "timeout",
        "reload"
      ],
      "mappings": "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",
      "file": "express.js",
      "sourceRoot": "/root/server/config",
      "sourcesContent": [
        "/**\n * Express configuration\n */\n\n'use strict';\n\nimport express from 'express';\nimport favicon from 'serve-favicon';\nimport morgan from 'morgan';\nimport shrinkRay from 'shrink-ray';\nimport bodyParser from 'body-parser';\nimport methodOverride from 'method-override';\nimport cookieParser from 'cookie-parser';\nimport errorHandler from 'errorhandler';\nimport path from 'path';\nimport lusca from 'lusca';\nimport config from './environment';\nimport passport from 'passport';\nimport session from 'express-session';\nimport connectMongo from 'connect-mongo';\nimport mongoose from 'mongoose';\nvar MongoStore = connectMongo(session);\n\nexport default function(app) {\n  var env = app.get('env');\n\n  if(env === 'development' || env === 'test') {\n    app.use(express.static(path.join(config.root, '.tmp')));\n  }\n\n  if(env === 'production') {\n    app.use(favicon(path.join(config.root, 'client', 'favicon.ico')));\n  }\n\n  app.set('appPath', path.join(config.root, 'client'));\n  app.use(express.static(app.get('appPath')));\n  app.use(morgan('dev'));\n\n  app.set('views', `${config.root}/server/views`);\n  app.engine('html', require('ejs').renderFile);\n  app.set('view engine', 'html');\n  app.use(shrinkRay());\n  app.use(bodyParser.urlencoded({ extended: false }));\n  app.use(bodyParser.json());\n  app.use(methodOverride());\n  app.use(cookieParser());\n  app.use(passport.initialize());\n\n\n  // Persist sessions with MongoStore / sequelizeStore\n  // We need to enable sessions for passport-twitter because it's an\n  // oauth 1.0 strategy, and Lusca depends on sessions\n  app.use(session({\n    secret: config.secrets.session,\n    saveUninitialized: true,\n    resave: false,\n    store: new MongoStore({\n      mongooseConnection: mongoose.connection,\n      db: 'freetio'\n    })\n  }));\n\n  /**\n   * Lusca - express server security\n   * https://github.com/krakenjs/lusca\n   */\n  if(env !== 'test' && !process.env.SAUCE_USERNAME) {\n    app.use(lusca({\n      csrf: {\n        angular: true\n      },\n      xframe: 'SAMEORIGIN',\n      hsts: {\n        maxAge: 31536000, //1 year, in seconds\n        includeSubDomains: true,\n        preload: true\n      },\n      xssProtection: true\n    }));\n  }\n\n  if(env === 'development') {\n    const webpackDevMiddleware = require('webpack-dev-middleware');\n    const stripAnsi = require('strip-ansi');\n    const webpack = require('webpack');\n    const makeWebpackConfig = require('../../webpack.make');\n    const webpackConfig = makeWebpackConfig({ DEV: true });\n    const compiler = webpack(webpackConfig);\n    const browserSync = require('browser-sync').create();\n\n    /**\n     * Run Browsersync and use middleware for Hot Module Replacement\n     */\n    browserSync.init({\n      open: false,\n      logFileChanges: false,\n      proxy: `localhost:${config.port}`,\n      ws: true,\n      middleware: [\n        webpackDevMiddleware(compiler, {\n          noInfo: false,\n          stats: {\n            colors: true,\n            timings: true,\n            chunks: false\n          }\n        })\n      ],\n      port: config.browserSyncPort,\n      plugins: ['bs-fullscreen-message']\n    });\n\n    /**\n     * Reload all devices when bundle is complete\n     * or send a fullscreen error message to the browser instead\n     */\n    compiler.plugin('done', function(stats) {\n      console.log('webpack done hook');\n      if(stats.hasErrors() || stats.hasWarnings()) {\n        return browserSync.sockets.emit('fullscreen:message', {\n          title: 'Webpack Error:',\n          body: stripAnsi(stats.toString()),\n          timeout: 100000\n        });\n      }\n      browserSync.reload();\n    });\n  }\n\n  if(env === 'development' || env === 'test') {\n    app.use(errorHandler()); // Error handler - has to be last\n  }\n}\n"
      ]
    },
    "mtime": 1507831002473
  },
  "{\"filename\":\"/root/webpack.make.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/webpack.make.js",
      "filenameRelative": "/root/webpack.make.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "webpack.make.js",
      "sourceFileName": "webpack.make.js",
      "sourceRoot": "/root",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "webpack.make"
    },
    "ignored": false,
    "code": "'use strict';\n/*eslint-env node*/\n\nvar webpack = require('webpack');\nvar autoprefixer = require('autoprefixer');\nvar HtmlWebpackPlugin = require('html-webpack-plugin');\nvar HtmlWebpackHarddiskPlugin = require('html-webpack-harddisk-plugin');\nvar ExtractTextPlugin = require('extract-text-webpack-plugin');\nvar CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;\nvar fs = require('fs');\nvar path = require('path');\nvar ForkCheckerPlugin = require('awesome-typescript-loader').ForkCheckerPlugin;\n\nmodule.exports = function makeWebpackConfig(options) {\n    /**\n     * Environment type\n     * BUILD is for generating minified builds\n     * TEST is for generating test builds\n     */\n    var BUILD = !!options.BUILD;\n    var TEST = !!options.TEST;\n    var E2E = !!options.E2E;\n    var DEV = !!options.DEV;\n\n    /**\n     * Config\n     * Reference: http://webpack.github.io/docs/configuration.html\n     * This is the object where all configuration gets set\n     */\n    var config = {};\n\n    /**\n     * Entry\n     * Reference: http://webpack.github.io/docs/configuration.html#entry\n     * Should be an empty object if it's generating a test build\n     * Karma will set this when it's a test build\n     */\n    if (TEST) {\n        config.entry = {};\n    } else {\n        config.entry = {\n            app: './client/app/app.ts',\n            polyfills: './client/polyfills.ts',\n            vendor: ['angular', 'angular-animate', 'angular-aria', 'angular-cookies', 'angular-resource', 'angular-sanitize', 'angular-ui-bootstrap', 'angular-ui-router', 'lodash']\n        };\n    }\n\n    /**\n     * Output\n     * Reference: http://webpack.github.io/docs/configuration.html#output\n     * Should be an empty object if it's generating a test build\n     * Karma will handle setting it up for you when it's a test build\n     */\n    if (TEST) {\n        config.output = {};\n    } else {\n        config.output = {\n            // Absolute output directory\n            path: BUILD ? path.join(__dirname, '/dist/client/') : path.join(__dirname, '/.tmp/'),\n\n            // Output path from the view of the page\n            // Uses webpack-dev-server in development\n            publicPath: BUILD || DEV || E2E ? '/' : 'http://localhost:' + 8080 + '/',\n            //publicPath: BUILD ? '/' : 'http://localhost:' + env.port + '/',\n\n            // Filename for entry points\n            // Only adds hash in build mode\n            filename: BUILD ? '[name].[hash].js' : '[name].bundle.js',\n\n            // Filename for non-entry points\n            // Only adds hash in build mode\n            chunkFilename: BUILD ? '[name].[hash].js' : '[name].bundle.js'\n        };\n    }\n\n    config.resolve = {\n        modulesDirectories: ['node_modules'],\n        extensions: ['', '.js', '.ts']\n    };\n\n    if (TEST) {\n        config.resolve = {\n            modulesDirectories: ['node_modules'],\n            extensions: ['', '.js', '.ts']\n        };\n    }\n\n    /**\n     * Devtool\n     * Reference: http://webpack.github.io/docs/configuration.html#devtool\n     * Type of sourcemap to use per build type\n     */\n    if (TEST) {\n        config.devtool = 'inline-source-map';\n    } else if (BUILD || DEV) {\n        config.devtool = 'source-map';\n    } else {\n        config.devtool = 'eval';\n    }\n\n    /**\n     * Loaders\n     * Reference: http://webpack.github.io/docs/configuration.html#module-loaders\n     * List: http://webpack.github.io/docs/list-of-loaders.html\n     * This handles most of the magic responsible for converting modules\n     */\n\n    config.sassLoader = {\n        outputStyle: 'compressed',\n        precision: 10,\n        sourceComments: false\n    };\n\n    // Initialize module\n    config.module = {\n        preLoaders: [],\n        loaders: [{\n            // JS LOADER\n            // Reference: https://github.com/babel/babel-loader\n            // Transpile .js files using babel-loader\n            // Compiles ES6 and ES7 into ES5 code\n            test: /\\.js$/,\n            loader: 'babel',\n            include: [path.resolve(__dirname, 'client/'), path.resolve(__dirname, 'node_modules/lodash-es/')]\n        }, {\n            // TS LOADER\n            // Reference: https://github.com/s-panferov/awesome-typescript-loader\n            // Transpile .ts files using awesome-typescript-loader\n            test: /\\.ts$/,\n            loader: 'awesome-typescript-loader',\n            query: {\n                tsconfig: path.resolve(__dirname, 'tsconfig.client.json')\n            },\n            include: [path.resolve(__dirname, 'client/')]\n        }, {\n            // ASSET LOADER\n            // Reference: https://github.com/webpack/file-loader\n            // Copy png, jpg, jpeg, gif, svg, woff, woff2, ttf, eot files to output\n            // Rename the file using the asset hash\n            // Pass along the updated reference to your code\n            // You can add here any file extension you want to get copied to your output\n            test: /\\.(png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)([\\?]?.*)$/,\n            loader: 'file'\n        }, {\n\n            // HTML LOADER\n            // Reference: https://github.com/webpack/raw-loader\n            // Allow loading html through js\n            test: /\\.html$/,\n            loader: 'raw'\n        }, {\n            // CSS LOADER\n            // Reference: https://github.com/webpack/css-loader\n            // Allow loading css through js\n            //\n            // Reference: https://github.com/postcss/postcss-loader\n            // Postprocess your css with PostCSS plugins\n            test: /\\.css$/,\n            loader: !TEST\n            // Reference: https://github.com/webpack/extract-text-webpack-plugin\n            // Extract css files in production builds\n            //\n            // Reference: https://github.com/webpack/style-loader\n            // Use style-loader in development for hot-loading\n            ? ExtractTextPlugin.extract('style', 'css!postcss')\n            // Reference: https://github.com/webpack/null-loader\n            // Skip loading css in test mode\n            : 'null'\n        }, {\n            // SASS LOADER\n            // Reference: https://github.com/jtangelder/sass-loader\n            test: /\\.(scss|sass)$/,\n            loaders: ['style', 'css', 'sass'],\n            include: [path.resolve(__dirname, 'node_modules/bootstrap-sass/assets/stylesheets/*.scss'), path.resolve(__dirname, 'client/app/app.scss')]\n\n        }]\n    };\n\n    config.module.postLoaders = [{\n        test: /\\.ts$/,\n        loader: 'ng-annotate?single_quotes'\n    }];\n\n    //TODO: TS Instrumenter\n\n    /**\n     * PostCSS\n     * Reference: https://github.com/postcss/autoprefixer-core\n     * Add vendor prefixes to your css\n     */\n    config.postcss = [autoprefixer({\n        browsers: ['last 2 version']\n    })];\n\n    /**\n     * Plugins\n     * Reference: http://webpack.github.io/docs/configuration.html#plugins\n     * List: http://webpack.github.io/docs/list-of-plugins.html\n     */\n    config.plugins = [\n    /*\n     * Plugin: ForkCheckerPlugin\n     * Description: Do type checking in a separate process, so webpack don't need to wait.\n     *\n     * See: https://github.com/s-panferov/awesome-typescript-loader#forkchecker-boolean-defaultfalse\n     */\n    new ForkCheckerPlugin(),\n\n    // Reference: https://github.com/webpack/extract-text-webpack-plugin\n    // Extract css files\n    // Disabled when in test mode or not in build mode\n    new ExtractTextPlugin('[name].[hash].css', {\n        disable: !BUILD || TEST\n    })];\n\n    if (!TEST) {\n        config.plugins.push(new CommonsChunkPlugin({\n            name: 'vendor',\n\n            // filename: \"vendor.js\"\n            // (Give the chunk a different name)\n\n            minChunks: Infinity\n            // (with more entries, this ensures that no other module\n            //  goes into the vendor chunk)\n        }));\n    }\n\n    // Skip rendering index.html in test mode\n    // Reference: https://github.com/ampedandwired/html-webpack-plugin\n    // Render index.html\n    if (!TEST) {\n        var htmlConfig = {\n            template: 'client/_index.html',\n            filename: '../client/index.html',\n            alwaysWriteToDisk: true\n        };\n        config.plugins.push(new HtmlWebpackPlugin(htmlConfig), new HtmlWebpackHarddiskPlugin());\n    }\n\n    // Add build specific plugins\n    if (BUILD) {\n        config.plugins.push(\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#noerrorsplugin\n        // Only emit files when there are no errors\n        new webpack.NoErrorsPlugin(),\n\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#dedupeplugin\n        // Dedupe modules in the output\n        new webpack.optimize.DedupePlugin(),\n\n        // Reference: http://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin\n        // Minify all javascript, switch loaders to minimizing mode\n        new webpack.optimize.UglifyJsPlugin({\n            mangle: false,\n            output: {\n                comments: false\n            },\n            compress: {\n                warnings: false\n            }\n        }),\n\n        // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n        // Define free global variables\n        new webpack.DefinePlugin({\n            'process.env': {\n                NODE_ENV: '\"production\"'\n            }\n        }));\n    }\n\n    if (DEV) {\n        config.plugins.push(\n        // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n        // Define free global variables\n        new webpack.DefinePlugin({\n            'process.env': {\n                NODE_ENV: '\"development\"'\n            }\n        }));\n    }\n\n    config.cache = DEV;\n\n    if (TEST) {\n        config.stats = {\n            colors: true,\n            reasons: true\n        };\n        config.debug = false;\n    }\n\n    /**\n     * Dev server configuration\n     * Reference: http://webpack.github.io/docs/configuration.html#devserver\n     * Reference: http://webpack.github.io/docs/webpack-dev-server.html\n     */\n    config.devServer = {\n        contentBase: './client/',\n        stats: {\n            modules: false,\n            cached: false,\n            colors: true,\n            chunk: false\n        }\n    };\n\n    config.node = {\n        global: 'window',\n        process: true,\n        crypto: 'empty',\n        clearImmediate: false,\n        setImmediate: false\n    };\n\n    return config;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2subWFrZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrIiwicmVxdWlyZSIsImF1dG9wcmVmaXhlciIsIkh0bWxXZWJwYWNrUGx1Z2luIiwiSHRtbFdlYnBhY2tIYXJkZGlza1BsdWdpbiIsIkV4dHJhY3RUZXh0UGx1Z2luIiwiQ29tbW9uc0NodW5rUGx1Z2luIiwib3B0aW1pemUiLCJmcyIsInBhdGgiLCJGb3JrQ2hlY2tlclBsdWdpbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJtYWtlV2VicGFja0NvbmZpZyIsIm9wdGlvbnMiLCJCVUlMRCIsIlRFU1QiLCJFMkUiLCJERVYiLCJjb25maWciLCJlbnRyeSIsImFwcCIsInBvbHlmaWxscyIsInZlbmRvciIsIm91dHB1dCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwdWJsaWNQYXRoIiwiZmlsZW5hbWUiLCJjaHVua0ZpbGVuYW1lIiwicmVzb2x2ZSIsIm1vZHVsZXNEaXJlY3RvcmllcyIsImV4dGVuc2lvbnMiLCJkZXZ0b29sIiwic2Fzc0xvYWRlciIsIm91dHB1dFN0eWxlIiwicHJlY2lzaW9uIiwic291cmNlQ29tbWVudHMiLCJwcmVMb2FkZXJzIiwibG9hZGVycyIsInRlc3QiLCJsb2FkZXIiLCJpbmNsdWRlIiwicXVlcnkiLCJ0c2NvbmZpZyIsImV4dHJhY3QiLCJwb3N0TG9hZGVycyIsInBvc3Rjc3MiLCJicm93c2VycyIsInBsdWdpbnMiLCJkaXNhYmxlIiwicHVzaCIsIm5hbWUiLCJtaW5DaHVua3MiLCJJbmZpbml0eSIsImh0bWxDb25maWciLCJ0ZW1wbGF0ZSIsImFsd2F5c1dyaXRlVG9EaXNrIiwiTm9FcnJvcnNQbHVnaW4iLCJEZWR1cGVQbHVnaW4iLCJVZ2xpZnlKc1BsdWdpbiIsIm1hbmdsZSIsImNvbW1lbnRzIiwiY29tcHJlc3MiLCJ3YXJuaW5ncyIsIkRlZmluZVBsdWdpbiIsIk5PREVfRU5WIiwiY2FjaGUiLCJzdGF0cyIsImNvbG9ycyIsInJlYXNvbnMiLCJkZWJ1ZyIsImRldlNlcnZlciIsImNvbnRlbnRCYXNlIiwibW9kdWxlcyIsImNhY2hlZCIsImNodW5rIiwibm9kZSIsImdsb2JhbCIsInByb2Nlc3MiLCJjcnlwdG8iLCJjbGVhckltbWVkaWF0ZSIsInNldEltbWVkaWF0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFDQSxJQUFJQSxVQUFVQyxRQUFRLFNBQVIsQ0FBZDtBQUNBLElBQUlDLGVBQWVELFFBQVEsY0FBUixDQUFuQjtBQUNBLElBQUlFLG9CQUFvQkYsUUFBUSxxQkFBUixDQUF4QjtBQUNBLElBQUlHLDRCQUE0QkgsUUFBUSw4QkFBUixDQUFoQztBQUNBLElBQUlJLG9CQUFvQkosUUFBUSw2QkFBUixDQUF4QjtBQUNBLElBQUlLLHFCQUFxQk4sUUFBUU8sUUFBUixDQUFpQkQsa0JBQTFDO0FBQ0EsSUFBSUUsS0FBS1AsUUFBUSxJQUFSLENBQVQ7QUFDQSxJQUFJUSxPQUFPUixRQUFRLE1BQVIsQ0FBWDtBQUNBLElBQUlTLG9CQUFvQlQsUUFBUSwyQkFBUixFQUFxQ1MsaUJBQTdEOztBQUVBQyxPQUFPQyxPQUFQLEdBQWlCLFNBQVNDLGlCQUFULENBQTJCQyxPQUEzQixFQUFvQztBQUNqRDs7Ozs7QUFLQSxRQUFJQyxRQUFRLENBQUMsQ0FBQ0QsUUFBUUMsS0FBdEI7QUFDQSxRQUFJQyxPQUFPLENBQUMsQ0FBQ0YsUUFBUUUsSUFBckI7QUFDQSxRQUFJQyxNQUFNLENBQUMsQ0FBQ0gsUUFBUUcsR0FBcEI7QUFDQSxRQUFJQyxNQUFNLENBQUMsQ0FBQ0osUUFBUUksR0FBcEI7O0FBRUE7Ozs7O0FBS0EsUUFBSUMsU0FBUyxFQUFiOztBQUVBOzs7Ozs7QUFNQSxRQUFHSCxJQUFILEVBQVM7QUFDTEcsZUFBT0MsS0FBUCxHQUFlLEVBQWY7QUFDSCxLQUZELE1BRU87QUFDSEQsZUFBT0MsS0FBUCxHQUFlO0FBQ1hDLGlCQUFLLHFCQURNO0FBRVhDLHVCQUFXLHVCQUZBO0FBR1hDLG9CQUFRLENBQ0osU0FESSxFQUVKLGlCQUZJLEVBR0osY0FISSxFQUlKLGlCQUpJLEVB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O0FBSVZDLHdCQUFnQixLQUpOO0FBS1ZDLHNCQUFjO0FBTEosS0FBZDs7QUFRQSxXQUFPL0QsTUFBUDtBQUNILENBbFZEIiwiZmlsZSI6IndlYnBhY2subWFrZS5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8qZXNsaW50LWVudiBub2RlKi9cbnZhciB3ZWJwYWNrID0gcmVxdWlyZSgnd2VicGFjaycpO1xudmFyIGF1dG9wcmVmaXhlciA9IHJlcXVpcmUoJ2F1dG9wcmVmaXhlcicpO1xudmFyIEh0bWxXZWJwYWNrUGx1Z2luID0gcmVxdWlyZSgnaHRtbC13ZWJwYWNrLXBsdWdpbicpO1xudmFyIEh0bWxXZWJwYWNrSGFyZGRpc2tQbHVnaW4gPSByZXF1aXJlKCdodG1sLXdlYnBhY2staGFyZGRpc2stcGx1Z2luJyk7XG52YXIgRXh0cmFjdFRleHRQbHVnaW4gPSByZXF1aXJlKCdleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4nKTtcbnZhciBDb21tb25zQ2h1bmtQbHVnaW4gPSB3ZWJwYWNrLm9wdGltaXplLkNvbW1vbnNDaHVua1BsdWdpbjtcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBGb3JrQ2hlY2tlclBsdWdpbiA9IHJlcXVpcmUoJ2F3ZXNvbWUtdHlwZXNjcmlwdC1sb2FkZXInKS5Gb3JrQ2hlY2tlclBsdWdpbjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYWtlV2VicGFja0NvbmZpZyhvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogRW52aXJvbm1lbnQgdHlwZVxuICAgICAqIEJVSUxEIGlzIGZvciBnZW5lcmF0aW5nIG1pbmlmaWVkIGJ1aWxkc1xuICAgICAqIFRFU1QgaXMgZm9yIGdlbmVyYXRpbmcgdGVzdCBidWlsZHNcbiAgICAgKi9cbiAgICB2YXIgQlVJTEQgPSAhIW9wdGlvbnMuQlVJTEQ7XG4gICAgdmFyIFRFU1QgPSAhIW9wdGlvbnMuVEVTVDtcbiAgICB2YXIgRTJFID0gISFvcHRpb25zLkUyRTtcbiAgICB2YXIgREVWID0gISFvcHRpb25zLkRFVjtcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ1xuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sXG4gICAgICogVGhpcyBpcyB0aGUgb2JqZWN0IHdoZXJlIGFsbCBjb25maWd1cmF0aW9uIGdldHMgc2V0XG4gICAgICovXG4gICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogRW50cnlcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2NvbmZpZ3VyYXRpb24uaHRtbCNlbnRyeVxuICAgICAqIFNob3VsZCBiZSBhbiBlbXB0eSBvYmplY3QgaWYgaXQncyBnZW5lcmF0aW5nIGEgdGVzdCBidWlsZFxuICAgICAqIEthcm1hIHdpbGwgc2V0IHRoaXMgd2hlbiBpdCdzIGEgdGVzdCBidWlsZFxuICAgICAqL1xuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLmVudHJ5ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmVudHJ5ID0ge1xuICAgICAgICAgICAgYXBwOiAnLi9jbGllbnQvYXBwL2FwcC50cycsXG4gICAgICAgICAgICBwb2x5ZmlsbHM6ICcuL2NsaWVudC9wb2x5ZmlsbHMudHMnLFxuICAgICAgICAgICAgdmVuZG9yOiBbXG4gICAgICAgICAgICAgICAgJ2FuZ3VsYXInLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWFuaW1hdGUnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWFyaWEnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLWNvb2tpZXMnLFxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXJlc291cmNlJyxcblxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXNhbml0aXplJyxcblxuICAgICAgICAgICAgICAgICdhbmd1bGFyLXVpLWJvb3RzdHJhcCcsXG4gICAgICAgICAgICAgICAgJ2FuZ3VsYXItdWktcm91dGVyJyxcbiAgICAgICAgICAgICAgICAnbG9kYXNoJ1xuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE91dHB1dFxuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sI291dHB1dFxuICAgICAqIFNob3VsZCBiZSBhbiBlbXB0eSBvYmplY3QgaWYgaXQncyBnZW5lcmF0aW5nIGEgdGVzdCBidWlsZFxuICAgICAqIEthcm1hIHdpbGwgaGFuZGxlIHNldHRpbmcgaXQgdXAgZm9yIHlvdSB3aGVuIGl0J3MgYSB0ZXN0IGJ1aWxkXG4gICAgICovXG4gICAgaWYoVEVTVCkge1xuICAgICAgICBjb25maWcub3V0cHV0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLm91dHB1dCA9IHtcbiAgICAgICAgICAgIC8vIEFic29sdXRlIG91dHB1dCBkaXJlY3RvcnlcbiAgICAgICAgICAgIHBhdGg6IEJVSUxEID8gcGF0aC5qb2luKF9fZGlybmFtZSwgJy9kaXN0L2NsaWVudC8nKSA6IHBhdGguam9pbihfX2Rpcm5hbWUsICcvLnRtcC8nKSxcblxuICAgICAgICAgICAgLy8gT3V0cHV0IHBhdGggZnJvbSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gVXNlcyB3ZWJwYWNrLWRldi1zZXJ2ZXIgaW4gZGV2ZWxvcG1lbnRcbiAgICAgICAgICAgIHB1YmxpY1BhdGg6IEJVSUxEIHx8IERFViB8fCBFMkUgPyAnLycgOiBgaHR0cDovL2xvY2FsaG9zdDokezgwODB9L2AsXG4gICAgICAgICAgICAvL3B1YmxpY1BhdGg6IEJVSUxEID8gJy8nIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6JyArIGVudi5wb3J0ICsgJy8nLFxuXG4gICAgICAgICAgICAvLyBGaWxlbmFtZSBmb3IgZW50cnkgcG9pbnRzXG4gICAgICAgICAgICAvLyBPbmx5IGFkZHMgaGFzaCBpbiBidWlsZCBtb2RlXG4gICAgICAgICAgICBmaWxlbmFtZTogQlVJTEQgPyAnW25hbWVdLltoYXNoXS5qcycgOiAnW25hbWVdLmJ1bmRsZS5qcycsXG5cbiAgICAgICAgICAgIC8vIEZpbGVuYW1lIGZvciBub24tZW50cnkgcG9pbnRzXG4gICAgICAgICAgICAvLyBPbmx5IGFkZHMgaGFzaCBpbiBidWlsZCBtb2RlXG4gICAgICAgICAgICBjaHVua0ZpbGVuYW1lOiBCVUlMRCA/ICdbbmFtZV0uW2hhc2hdLmpzJyA6ICdbbmFtZV0uYnVuZGxlLmpzJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbmZpZy5yZXNvbHZlID0ge1xuICAgICAgICBtb2R1bGVzRGlyZWN0b3JpZXM6IFsnbm9kZV9tb2R1bGVzJ10sXG4gICAgICAgIGV4dGVuc2lvbnM6IFsnJywgJy5qcycsICcudHMnXVxuICAgIH07XG5cbiAgICBpZihURVNUKSB7XG4gICAgICAgIGNvbmZpZy5yZXNvbHZlID0ge1xuICAgICAgICAgICAgbW9kdWxlc0RpcmVjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgJ25vZGVfbW9kdWxlcydcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBleHRlbnNpb25zOiBbJycsICcuanMnLCAnLnRzJ11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXZ0b29sXG4gICAgICogUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9jb25maWd1cmF0aW9uLmh0bWwjZGV2dG9vbFxuICAgICAqIFR5cGUgb2Ygc291cmNlbWFwIHRvIHVzZSBwZXIgYnVpbGQgdHlwZVxuICAgICAqL1xuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnaW5saW5lLXNvdXJjZS1tYXAnO1xuICAgIH0gZWxzZSBpZihCVUlMRCB8fCBERVYpIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnc291cmNlLW1hcCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmRldnRvb2wgPSAnZXZhbCc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZGVyc1xuICAgICAqIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvY29uZmlndXJhdGlvbi5odG1sI21vZHVsZS1sb2FkZXJzXG4gICAgICogTGlzdDogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1sb2FkZXJzLmh0bWxcbiAgICAgKiBUaGlzIGhhbmRsZXMgbW9zdCBvZiB0aGUgbWFnaWMgcmVzcG9uc2libGUgZm9yIGNvbnZlcnRpbmcgbW9kdWxlc1xuICAgICAqL1xuXG4gICAgY29uZmlnLnNhc3NMb2FkZXIgPSB7XG4gICAgICAgIG91dHB1dFN0eWxlOiAnY29tcHJlc3NlZCcsXG4gICAgICAgIHByZWNpc2lvbjogMTAsXG4gICAgICAgIHNvdXJjZUNvbW1lbnRzOiBmYWxzZVxuICAgIH07XG5cblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBtb2R1bGVcbiAgICBjb25maWcubW9kdWxlID0ge1xuICAgICAgICBwcmVMb2FkZXJzOiBbXSxcbiAgICAgICAgbG9hZGVyczogW3tcbiAgICAgICAgICAgIC8vIEpTIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwtbG9hZGVyXG4gICAgICAgICAgICAvLyBUcmFuc3BpbGUgLmpzIGZpbGVzIHVzaW5nIGJhYmVsLWxvYWRlclxuICAgICAgICAgICAgLy8gQ29tcGlsZXMgRVM2IGFuZCBFUzcgaW50byBFUzUgY29kZVxuICAgICAgICAgICAgdGVzdDogL1xcLmpzJC8sXG4gICAgICAgICAgICBsb2FkZXI6ICdiYWJlbCcsXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2NsaWVudC8nKSxcbiAgICAgICAgICAgICAgICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnbm9kZV9tb2R1bGVzL2xvZGFzaC1lcy8nKVxuICAgICAgICAgICAgXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBUUyBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL3MtcGFuZmVyb3YvYXdlc29tZS10eXBlc2NyaXB0LWxvYWRlclxuICAgICAgICAgICAgLy8gVHJhbnNwaWxlIC50cyBmaWxlcyB1c2luZyBhd2Vzb21lLXR5cGVzY3JpcHQtbG9hZGVyXG4gICAgICAgICAgICB0ZXN0OiAvXFwudHMkLyxcbiAgICAgICAgICAgIGxvYWRlcjogJ2F3ZXNvbWUtdHlwZXNjcmlwdC1sb2FkZXInLFxuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICB0c2NvbmZpZzogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ3RzY29uZmlnLmNsaWVudC5qc29uJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2NsaWVudC8nKVxuICAgICAgICAgICAgXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBBU1NFVCBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svZmlsZS1sb2FkZXJcbiAgICAgICAgICAgIC8vIENvcHkgcG5nLCBqcGcsIGpwZWcsIGdpZiwgc3ZnLCB3b2ZmLCB3b2ZmMiwgdHRmLCBlb3QgZmlsZXMgdG8gb3V0cHV0XG4gICAgICAgICAgICAvLyBSZW5hbWUgdGhlIGZpbGUgdXNpbmcgdGhlIGFzc2V0IGhhc2hcbiAgICAgICAgICAgIC8vIFBhc3MgYWxvbmcgdGhlIHVwZGF0ZWQgcmVmZXJlbmNlIHRvIHlvdXIgY29kZVxuICAgICAgICAgICAgLy8gWW91IGNhbiBhZGQgaGVyZSBhbnkgZmlsZSBleHRlbnNpb24geW91IHdhbnQgdG8gZ2V0IGNvcGllZCB0byB5b3VyIG91dHB1dFxuICAgICAgICAgICAgdGVzdDogL1xcLihwbmd8anBnfGpwZWd8Z2lmfHN2Z3x3b2ZmfHdvZmYyfHR0Znxlb3QpKFtcXD9dPy4qKSQvLFxuICAgICAgICAgICAgbG9hZGVyOiAnZmlsZSdcbiAgICAgICAgfSwge1xuXG4gICAgICAgICAgICAvLyBIVE1MIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9yYXctbG9hZGVyXG4gICAgICAgICAgICAvLyBBbGxvdyBsb2FkaW5nIGh0bWwgdGhyb3VnaCBqc1xuICAgICAgICAgICAgdGVzdDogL1xcLmh0bWwkLyxcbiAgICAgICAgICAgIGxvYWRlcjogJ3JhdydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLy8gQ1NTIExPQURFUlxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9jc3MtbG9hZGVyXG4gICAgICAgICAgICAvLyBBbGxvdyBsb2FkaW5nIGNzcyB0aHJvdWdoIGpzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vcG9zdGNzcy9wb3N0Y3NzLWxvYWRlclxuICAgICAgICAgICAgLy8gUG9zdHByb2Nlc3MgeW91ciBjc3Mgd2l0aCBQb3N0Q1NTIHBsdWdpbnNcbiAgICAgICAgICAgIHRlc3Q6IC9cXC5jc3MkLyxcbiAgICAgICAgICAgIGxvYWRlcjogIVRFU1RcbiAgICAgICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL2V4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgY3NzIGZpbGVzIGluIHByb2R1Y3Rpb24gYnVpbGRzXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3N0eWxlLWxvYWRlclxuICAgICAgICAgICAgICAgIC8vIFVzZSBzdHlsZS1sb2FkZXIgaW4gZGV2ZWxvcG1lbnQgZm9yIGhvdC1sb2FkaW5nXG4gICAgICAgICAgICAgICAgPyBFeHRyYWN0VGV4dFBsdWdpbi5leHRyYWN0KCdzdHlsZScsICdjc3MhcG9zdGNzcycpXG4gICAgICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay9udWxsLWxvYWRlclxuICAgICAgICAgICAgICAgIC8vIFNraXAgbG9hZGluZyBjc3MgaW4gdGVzdCBtb2RlXG4gICAgICAgICAgICAgICAgOiAnbnVsbCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLy8gU0FTUyBMT0FERVJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2p0YW5nZWxkZXIvc2Fzcy1sb2FkZXJcbiAgICAgICAgICAgIHRlc3Q6IC9cXC4oc2Nzc3xzYXNzKSQvLFxuICAgICAgICAgICAgbG9hZGVyczogWydzdHlsZScsICdjc3MnLCAnc2FzcyddLFxuICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdub2RlX21vZHVsZXMvYm9vdHN0cmFwLXNhc3MvYXNzZXRzL3N0eWxlc2hlZXRzLyouc2NzcycpLFxuICAgICAgICAgICAgICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdjbGllbnQvYXBwL2FwcC5zY3NzJylcbiAgICAgICAgICAgIF1cblxuXG4gICAgICAgIH1dXG4gICAgfTtcblxuICAgIGNvbmZpZy5tb2R1bGUucG9zdExvYWRlcnMgPSBbe1xuICAgICAgICB0ZXN0OiAvXFwudHMkLyxcbiAgICAgICAgbG9hZGVyOiAnbmctYW5ub3RhdGU/c2luZ2xlX3F1b3RlcydcbiAgICB9XTtcblxuXG4gICAgLy9UT0RPOiBUUyBJbnN0cnVtZW50ZXJcblxuICAgIC8qKlxuICAgICAqIFBvc3RDU1NcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9wb3N0Y3NzL2F1dG9wcmVmaXhlci1jb3JlXG4gICAgICogQWRkIHZlbmRvciBwcmVmaXhlcyB0byB5b3VyIGNzc1xuICAgICAqL1xuICAgIGNvbmZpZy5wb3N0Y3NzID0gW1xuICAgICAgICBhdXRvcHJlZml4ZXIoe1xuICAgICAgICAgICAgYnJvd3NlcnM6IFsnbGFzdCAyIHZlcnNpb24nXVxuICAgICAgICB9KVxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBQbHVnaW5zXG4gICAgICogUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9jb25maWd1cmF0aW9uLmh0bWwjcGx1Z2luc1xuICAgICAqIExpc3Q6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2xpc3Qtb2YtcGx1Z2lucy5odG1sXG4gICAgICovXG4gICAgY29uZmlnLnBsdWdpbnMgPSBbXG4gICAgICAgIC8qXG4gICAgICAgICAqIFBsdWdpbjogRm9ya0NoZWNrZXJQbHVnaW5cbiAgICAgICAgICogRGVzY3JpcHRpb246IERvIHR5cGUgY2hlY2tpbmcgaW4gYSBzZXBhcmF0ZSBwcm9jZXNzLCBzbyB3ZWJwYWNrIGRvbid0IG5lZWQgdG8gd2FpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vcy1wYW5mZXJvdi9hd2Vzb21lLXR5cGVzY3JpcHQtbG9hZGVyI2ZvcmtjaGVja2VyLWJvb2xlYW4tZGVmYXVsdGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBuZXcgRm9ya0NoZWNrZXJQbHVnaW4oKSxcblxuICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL2V4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuICAgICAgICAvLyBFeHRyYWN0IGNzcyBmaWxlc1xuICAgICAgICAvLyBEaXNhYmxlZCB3aGVuIGluIHRlc3QgbW9kZSBvciBub3QgaW4gYnVpbGQgbW9kZVxuICAgICAgICBuZXcgRXh0cmFjdFRleHRQbHVnaW4oJ1tuYW1lXS5baGFzaF0uY3NzJywge1xuICAgICAgICAgICAgZGlzYWJsZTogIUJVSUxEIHx8IFRFU1RcbiAgICAgICAgfSlcbiAgICBdO1xuXG4gICAgaWYoIVRFU1QpIHtcbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChuZXcgQ29tbW9uc0NodW5rUGx1Z2luKHtcbiAgICAgICAgICAgIG5hbWU6ICd2ZW5kb3InLFxuXG4gICAgICAgICAgICAvLyBmaWxlbmFtZTogXCJ2ZW5kb3IuanNcIlxuICAgICAgICAgICAgLy8gKEdpdmUgdGhlIGNodW5rIGEgZGlmZmVyZW50IG5hbWUpXG5cbiAgICAgICAgICAgIG1pbkNodW5rczogSW5maW5pdHlcbiAgICAgICAgICAgIC8vICh3aXRoIG1vcmUgZW50cmllcywgdGhpcyBlbnN1cmVzIHRoYXQgbm8gb3RoZXIgbW9kdWxlXG4gICAgICAgICAgICAvLyAgZ29lcyBpbnRvIHRoZSB2ZW5kb3IgY2h1bmspXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBTa2lwIHJlbmRlcmluZyBpbmRleC5odG1sIGluIHRlc3QgbW9kZVxuICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9naXRodWIuY29tL2FtcGVkYW5kd2lyZWQvaHRtbC13ZWJwYWNrLXBsdWdpblxuICAgIC8vIFJlbmRlciBpbmRleC5odG1sXG4gICAgaWYoIVRFU1QpIHtcbiAgICAgICAgbGV0IGh0bWxDb25maWcgPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ2NsaWVudC9faW5kZXguaHRtbCcsXG4gICAgICAgICAgICBmaWxlbmFtZTogJy4uL2NsaWVudC9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIGFsd2F5c1dyaXRlVG9EaXNrOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChcbiAgICAgICAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oaHRtbENvbmZpZyksXG4gICAgICAgICAgbmV3IEh0bWxXZWJwYWNrSGFyZGRpc2tQbHVnaW4oKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIEFkZCBidWlsZCBzcGVjaWZpYyBwbHVnaW5zXG4gICAgaWYoQlVJTEQpIHtcbiAgICAgICAgY29uZmlnLnBsdWdpbnMucHVzaChcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1wbHVnaW5zLmh0bWwjbm9lcnJvcnNwbHVnaW5cbiAgICAgICAgICAgIC8vIE9ubHkgZW1pdCBmaWxlcyB3aGVuIHRoZXJlIGFyZSBubyBlcnJvcnNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLk5vRXJyb3JzUGx1Z2luKCksXG5cbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cDovL3dlYnBhY2suZ2l0aHViLmlvL2RvY3MvbGlzdC1vZi1wbHVnaW5zLmh0bWwjZGVkdXBlcGx1Z2luXG4gICAgICAgICAgICAvLyBEZWR1cGUgbW9kdWxlcyBpbiB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXcgd2VicGFjay5vcHRpbWl6ZS5EZWR1cGVQbHVnaW4oKSxcblxuICAgICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCN1Z2xpZnlqc3BsdWdpblxuICAgICAgICAgICAgLy8gTWluaWZ5IGFsbCBqYXZhc2NyaXB0LCBzd2l0Y2ggbG9hZGVycyB0byBtaW5pbWl6aW5nIG1vZGVcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLm9wdGltaXplLlVnbGlmeUpzUGx1Z2luKHtcbiAgICAgICAgICAgICAgICBtYW5nbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgICAgICBjb21tZW50czogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbXByZXNzOiB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCNkZWZpbmVwbHVnaW5cbiAgICAgICAgICAgIC8vIERlZmluZSBmcmVlIGdsb2JhbCB2YXJpYWJsZXNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbih7XG4gICAgICAgICAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICAgICAgICAgICBOT0RFX0VOVjogJ1wicHJvZHVjdGlvblwiJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYoREVWKSB7XG4gICAgICAgIGNvbmZpZy5wbHVnaW5zLnB1c2goXG4gICAgICAgICAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd2VicGFjay5naXRodWIuaW8vZG9jcy9saXN0LW9mLXBsdWdpbnMuaHRtbCNkZWZpbmVwbHVnaW5cbiAgICAgICAgICAgIC8vIERlZmluZSBmcmVlIGdsb2JhbCB2YXJpYWJsZXNcbiAgICAgICAgICAgIG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbih7XG4gICAgICAgICAgICAgICAgJ3Byb2Nlc3MuZW52Jzoge1xuICAgICAgICAgICAgICAgICAgICBOT0RFX0VOVjogJ1wiZGV2ZWxvcG1lbnRcIidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbmZpZy5jYWNoZSA9IERFVjtcblxuICAgIGlmKFRFU1QpIHtcbiAgICAgICAgY29uZmlnLnN0YXRzID0ge1xuICAgICAgICAgICAgY29sb3JzOiB0cnVlLFxuICAgICAgICAgICAgcmVhc29uczogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBjb25maWcuZGVidWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXYgc2VydmVyIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL2NvbmZpZ3VyYXRpb24uaHRtbCNkZXZzZXJ2ZXJcbiAgICAgKiBSZWZlcmVuY2U6IGh0dHA6Ly93ZWJwYWNrLmdpdGh1Yi5pby9kb2NzL3dlYnBhY2stZGV2LXNlcnZlci5odG1sXG4gICAgICovXG4gICAgY29uZmlnLmRldlNlcnZlciA9IHtcbiAgICAgICAgY29udGVudEJhc2U6ICcuL2NsaWVudC8nLFxuICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgbW9kdWxlczogZmFsc2UsXG4gICAgICAgICAgICBjYWNoZWQ6IGZhbHNlLFxuICAgICAgICAgICAgY29sb3JzOiB0cnVlLFxuICAgICAgICAgICAgY2h1bms6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uZmlnLm5vZGUgPSB7XG4gICAgICAgIGdsb2JhbDogJ3dpbmRvdycsXG4gICAgICAgIHByb2Nlc3M6IHRydWUsXG4gICAgICAgIGNyeXB0bzogJ2VtcHR5JyxcbiAgICAgICAgY2xlYXJJbW1lZGlhdGU6IGZhbHNlLFxuICAgICAgICBzZXRJbW1lZGlhdGU6IGZhbHNlXG4gICAgfTtcblxuICAgIHJldHVybiBjb25maWc7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "webpack.make.js"
      ],
      "names": [
        "webpack",
        "require",
        "autoprefixer",
        "HtmlWebpackPlugin",
        "HtmlWebpackHarddiskPlugin",
        "ExtractTextPlugin",
        "CommonsChunkPlugin",
        "optimize",
        "fs",
        "path",
        "ForkCheckerPlugin",
        "module",
        "exports",
        "makeWebpackConfig",
        "options",
        "BUILD",
        "TEST",
        "E2E",
        "DEV",
        "config",
        "entry",
        "app",
        "polyfills",
        "vendor",
        "output",
        "join",
        "__dirname",
        "publicPath",
        "filename",
        "chunkFilename",
        "resolve",
        "modulesDirectories",
        "extensions",
        "devtool",
        "sassLoader",
        "outputStyle",
        "precision",
        "sourceComments",
        "preLoaders",
        "loaders",
        "test",
        "loader",
        "include",
        "query",
        "tsconfig",
        "extract",
        "postLoaders",
        "postcss",
        "browsers",
        "plugins",
        "disable",
        "push",
        "name",
        "minChunks",
        "Infinity",
        "htmlConfig",
        "template",
        "alwaysWriteToDisk",
        "NoErrorsPlugin",
        "DedupePlugin",
        "UglifyJsPlugin",
        "mangle",
        "comments",
        "compress",
        "warnings",
        "DefinePlugin",
        "NODE_ENV",
        "cache",
        "stats",
        "colors",
        "reasons",
        "debug",
        "devServer",
        "contentBase",
        "modules",
        "cached",
        "chunk",
        "node",
        "global",
        "process",
        "crypto",
        "clearImmediate",
        "setImmediate"
      ],
      "mappings": "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",
      "file": "webpack.make.js",
      "sourceRoot": "/root",
      "sourcesContent": [
        "'use strict';\n/*eslint-env node*/\nvar webpack = require('webpack');\nvar autoprefixer = require('autoprefixer');\nvar HtmlWebpackPlugin = require('html-webpack-plugin');\nvar HtmlWebpackHarddiskPlugin = require('html-webpack-harddisk-plugin');\nvar ExtractTextPlugin = require('extract-text-webpack-plugin');\nvar CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;\nvar fs = require('fs');\nvar path = require('path');\nvar ForkCheckerPlugin = require('awesome-typescript-loader').ForkCheckerPlugin;\n\nmodule.exports = function makeWebpackConfig(options) {\n    /**\n     * Environment type\n     * BUILD is for generating minified builds\n     * TEST is for generating test builds\n     */\n    var BUILD = !!options.BUILD;\n    var TEST = !!options.TEST;\n    var E2E = !!options.E2E;\n    var DEV = !!options.DEV;\n\n    /**\n     * Config\n     * Reference: http://webpack.github.io/docs/configuration.html\n     * This is the object where all configuration gets set\n     */\n    var config = {};\n\n    /**\n     * Entry\n     * Reference: http://webpack.github.io/docs/configuration.html#entry\n     * Should be an empty object if it's generating a test build\n     * Karma will set this when it's a test build\n     */\n    if(TEST) {\n        config.entry = {};\n    } else {\n        config.entry = {\n            app: './client/app/app.ts',\n            polyfills: './client/polyfills.ts',\n            vendor: [\n                'angular',\n                'angular-animate',\n                'angular-aria',\n                'angular-cookies',\n                'angular-resource',\n\n                'angular-sanitize',\n\n                'angular-ui-bootstrap',\n                'angular-ui-router',\n                'lodash'\n            ]\n        };\n    }\n\n    /**\n     * Output\n     * Reference: http://webpack.github.io/docs/configuration.html#output\n     * Should be an empty object if it's generating a test build\n     * Karma will handle setting it up for you when it's a test build\n     */\n    if(TEST) {\n        config.output = {};\n    } else {\n        config.output = {\n            // Absolute output directory\n            path: BUILD ? path.join(__dirname, '/dist/client/') : path.join(__dirname, '/.tmp/'),\n\n            // Output path from the view of the page\n            // Uses webpack-dev-server in development\n            publicPath: BUILD || DEV || E2E ? '/' : `http://localhost:${8080}/`,\n            //publicPath: BUILD ? '/' : 'http://localhost:' + env.port + '/',\n\n            // Filename for entry points\n            // Only adds hash in build mode\n            filename: BUILD ? '[name].[hash].js' : '[name].bundle.js',\n\n            // Filename for non-entry points\n            // Only adds hash in build mode\n            chunkFilename: BUILD ? '[name].[hash].js' : '[name].bundle.js'\n        };\n    }\n\n    config.resolve = {\n        modulesDirectories: ['node_modules'],\n        extensions: ['', '.js', '.ts']\n    };\n\n    if(TEST) {\n        config.resolve = {\n            modulesDirectories: [\n                'node_modules'\n            ],\n            extensions: ['', '.js', '.ts']\n        };\n    }\n\n    /**\n     * Devtool\n     * Reference: http://webpack.github.io/docs/configuration.html#devtool\n     * Type of sourcemap to use per build type\n     */\n    if(TEST) {\n        config.devtool = 'inline-source-map';\n    } else if(BUILD || DEV) {\n        config.devtool = 'source-map';\n    } else {\n        config.devtool = 'eval';\n    }\n\n    /**\n     * Loaders\n     * Reference: http://webpack.github.io/docs/configuration.html#module-loaders\n     * List: http://webpack.github.io/docs/list-of-loaders.html\n     * This handles most of the magic responsible for converting modules\n     */\n\n    config.sassLoader = {\n        outputStyle: 'compressed',\n        precision: 10,\n        sourceComments: false\n    };\n\n\n\n    // Initialize module\n    config.module = {\n        preLoaders: [],\n        loaders: [{\n            // JS LOADER\n            // Reference: https://github.com/babel/babel-loader\n            // Transpile .js files using babel-loader\n            // Compiles ES6 and ES7 into ES5 code\n            test: /\\.js$/,\n            loader: 'babel',\n            include: [\n                path.resolve(__dirname, 'client/'),\n                path.resolve(__dirname, 'node_modules/lodash-es/')\n            ]\n        }, {\n            // TS LOADER\n            // Reference: https://github.com/s-panferov/awesome-typescript-loader\n            // Transpile .ts files using awesome-typescript-loader\n            test: /\\.ts$/,\n            loader: 'awesome-typescript-loader',\n            query: {\n                tsconfig: path.resolve(__dirname, 'tsconfig.client.json')\n            },\n            include: [\n                path.resolve(__dirname, 'client/')\n            ]\n        }, {\n            // ASSET LOADER\n            // Reference: https://github.com/webpack/file-loader\n            // Copy png, jpg, jpeg, gif, svg, woff, woff2, ttf, eot files to output\n            // Rename the file using the asset hash\n            // Pass along the updated reference to your code\n            // You can add here any file extension you want to get copied to your output\n            test: /\\.(png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)([\\?]?.*)$/,\n            loader: 'file'\n        }, {\n\n            // HTML LOADER\n            // Reference: https://github.com/webpack/raw-loader\n            // Allow loading html through js\n            test: /\\.html$/,\n            loader: 'raw'\n        }, {\n            // CSS LOADER\n            // Reference: https://github.com/webpack/css-loader\n            // Allow loading css through js\n            //\n            // Reference: https://github.com/postcss/postcss-loader\n            // Postprocess your css with PostCSS plugins\n            test: /\\.css$/,\n            loader: !TEST\n                // Reference: https://github.com/webpack/extract-text-webpack-plugin\n                // Extract css files in production builds\n                //\n                // Reference: https://github.com/webpack/style-loader\n                // Use style-loader in development for hot-loading\n                ? ExtractTextPlugin.extract('style', 'css!postcss')\n                // Reference: https://github.com/webpack/null-loader\n                // Skip loading css in test mode\n                : 'null'\n        }, {\n            // SASS LOADER\n            // Reference: https://github.com/jtangelder/sass-loader\n            test: /\\.(scss|sass)$/,\n            loaders: ['style', 'css', 'sass'],\n            include: [\n                path.resolve(__dirname, 'node_modules/bootstrap-sass/assets/stylesheets/*.scss'),\n                path.resolve(__dirname, 'client/app/app.scss')\n            ]\n\n\n        }]\n    };\n\n    config.module.postLoaders = [{\n        test: /\\.ts$/,\n        loader: 'ng-annotate?single_quotes'\n    }];\n\n\n    //TODO: TS Instrumenter\n\n    /**\n     * PostCSS\n     * Reference: https://github.com/postcss/autoprefixer-core\n     * Add vendor prefixes to your css\n     */\n    config.postcss = [\n        autoprefixer({\n            browsers: ['last 2 version']\n        })\n    ];\n\n    /**\n     * Plugins\n     * Reference: http://webpack.github.io/docs/configuration.html#plugins\n     * List: http://webpack.github.io/docs/list-of-plugins.html\n     */\n    config.plugins = [\n        /*\n         * Plugin: ForkCheckerPlugin\n         * Description: Do type checking in a separate process, so webpack don't need to wait.\n         *\n         * See: https://github.com/s-panferov/awesome-typescript-loader#forkchecker-boolean-defaultfalse\n         */\n        new ForkCheckerPlugin(),\n\n        // Reference: https://github.com/webpack/extract-text-webpack-plugin\n        // Extract css files\n        // Disabled when in test mode or not in build mode\n        new ExtractTextPlugin('[name].[hash].css', {\n            disable: !BUILD || TEST\n        })\n    ];\n\n    if(!TEST) {\n        config.plugins.push(new CommonsChunkPlugin({\n            name: 'vendor',\n\n            // filename: \"vendor.js\"\n            // (Give the chunk a different name)\n\n            minChunks: Infinity\n            // (with more entries, this ensures that no other module\n            //  goes into the vendor chunk)\n        }));\n    }\n\n    // Skip rendering index.html in test mode\n    // Reference: https://github.com/ampedandwired/html-webpack-plugin\n    // Render index.html\n    if(!TEST) {\n        let htmlConfig = {\n            template: 'client/_index.html',\n            filename: '../client/index.html',\n            alwaysWriteToDisk: true\n        }\n        config.plugins.push(\n          new HtmlWebpackPlugin(htmlConfig),\n          new HtmlWebpackHarddiskPlugin()\n        );\n    }\n\n    // Add build specific plugins\n    if(BUILD) {\n        config.plugins.push(\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#noerrorsplugin\n            // Only emit files when there are no errors\n            new webpack.NoErrorsPlugin(),\n\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#dedupeplugin\n            // Dedupe modules in the output\n            new webpack.optimize.DedupePlugin(),\n\n            // Reference: http://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin\n            // Minify all javascript, switch loaders to minimizing mode\n            new webpack.optimize.UglifyJsPlugin({\n                mangle: false,\n                output: {\n                    comments: false\n                },\n                compress: {\n                    warnings: false\n                }\n            }),\n\n            // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n            // Define free global variables\n            new webpack.DefinePlugin({\n                'process.env': {\n                    NODE_ENV: '\"production\"'\n                }\n            })\n        );\n    }\n\n    if(DEV) {\n        config.plugins.push(\n            // Reference: https://webpack.github.io/docs/list-of-plugins.html#defineplugin\n            // Define free global variables\n            new webpack.DefinePlugin({\n                'process.env': {\n                    NODE_ENV: '\"development\"'\n                }\n            })\n        );\n    }\n\n    config.cache = DEV;\n\n    if(TEST) {\n        config.stats = {\n            colors: true,\n            reasons: true\n        };\n        config.debug = false;\n    }\n\n    /**\n     * Dev server configuration\n     * Reference: http://webpack.github.io/docs/configuration.html#devserver\n     * Reference: http://webpack.github.io/docs/webpack-dev-server.html\n     */\n    config.devServer = {\n        contentBase: './client/',\n        stats: {\n            modules: false,\n            cached: false,\n            colors: true,\n            chunk: false\n        }\n    };\n\n    config.node = {\n        global: 'window',\n        process: true,\n        crypto: 'empty',\n        clearImmediate: false,\n        setImmediate: false\n    };\n\n    return config;\n};\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/routes.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./components/errors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "errors"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "app"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "app",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/routes.js",
      "filenameRelative": "/root/server/routes.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "routes.js",
      "sourceFileName": "routes.js",
      "sourceRoot": "/root/server",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "routes"
    },
    "ignored": false,
    "code": "/**\n * Main application routes\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (app) {\n  // Insert routes below\n  app.use('/api/news', require('./api/new'));\n  app.use('/api/users', require('./api/user'));\n\n  app.use('/auth', require('./auth').default);\n\n  // All undefined asset or api routes should return a 404\n  app.route('/:url(api|auth|components|app|bower_components|assets)/*').get(_errors2.default[404]);\n\n  // All other routes should redirect to the index.html\n  app.route('/*').get(function (req, res) {\n    res.sendFile(_path2.default.resolve(app.get('appPath') + '/index.html'));\n  });\n};\n\nvar _errors = require('./components/errors');\n\nvar _errors2 = _interopRequireDefault(_errors);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJyZXF1aXJlIiwiZGVmYXVsdCIsInJvdXRlIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJyZXNvbHZlIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUlBOzs7Ozs7a0JBS2UsVUFBU0EsR0FBVCxFQUFjO0FBQzNCO0FBQ0FBLE1BQUlDLEdBQUosQ0FBUSxXQUFSLEVBQXFCQyxRQUFRLFdBQVIsQ0FBckI7QUFDQUYsTUFBSUMsR0FBSixDQUFRLFlBQVIsRUFBc0JDLFFBQVEsWUFBUixDQUF0Qjs7QUFFQUYsTUFBSUMsR0FBSixDQUFRLE9BQVIsRUFBaUJDLFFBQVEsUUFBUixFQUFrQkMsT0FBbkM7O0FBRUE7QUFDQUgsTUFBSUksS0FBSixDQUFVLDBEQUFWLEVBQ0VDLEdBREYsQ0FDTSxpQkFBTyxHQUFQLENBRE47O0FBR0E7QUFDQUwsTUFBSUksS0FBSixDQUFVLElBQVYsRUFDR0MsR0FESCxDQUNPLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ2pCQSxRQUFJQyxRQUFKLENBQWEsZUFBS0MsT0FBTCxDQUFnQlQsSUFBSUssR0FBSixDQUFRLFNBQVIsQ0FBaEIsaUJBQWI7QUFDRCxHQUhIO0FBSUQsQzs7QUFuQkQ7Ozs7QUFDQSIsImZpbGUiOiJyb3V0ZXMuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYWluIGFwcGxpY2F0aW9uIHJvdXRlc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGVycm9ycyBmcm9tICcuL2NvbXBvbmVudHMvZXJyb3JzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhcHApIHtcbiAgLy8gSW5zZXJ0IHJvdXRlcyBiZWxvd1xuICBhcHAudXNlKCcvYXBpL25ld3MnLCByZXF1aXJlKCcuL2FwaS9uZXcnKSk7XG4gIGFwcC51c2UoJy9hcGkvdXNlcnMnLCByZXF1aXJlKCcuL2FwaS91c2VyJykpO1xuXG4gIGFwcC51c2UoJy9hdXRoJywgcmVxdWlyZSgnLi9hdXRoJykuZGVmYXVsdCk7XG5cbiAgLy8gQWxsIHVuZGVmaW5lZCBhc3NldCBvciBhcGkgcm91dGVzIHNob3VsZCByZXR1cm4gYSA0MDRcbiAgYXBwLnJvdXRlKCcvOnVybChhcGl8YXV0aHxjb21wb25lbnRzfGFwcHxib3dlcl9jb21wb25lbnRzfGFzc2V0cykvKicpXG4gICAuZ2V0KGVycm9yc1s0MDRdKTtcblxuICAvLyBBbGwgb3RoZXIgcm91dGVzIHNob3VsZCByZWRpcmVjdCB0byB0aGUgaW5kZXguaHRtbFxuICBhcHAucm91dGUoJy8qJylcbiAgICAuZ2V0KChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLnNlbmRGaWxlKHBhdGgucmVzb2x2ZShgJHthcHAuZ2V0KCdhcHBQYXRoJyl9L2luZGV4Lmh0bWxgKSk7XG4gICAgfSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "app",
        "use",
        "require",
        "default",
        "route",
        "get",
        "req",
        "res",
        "sendFile",
        "resolve"
      ],
      "mappings": "AAAA;;;;AAIA;;;;;;kBAKe,UAASA,GAAT,EAAc;AAC3B;AACAA,MAAIC,GAAJ,CAAQ,WAAR,EAAqBC,QAAQ,WAAR,CAArB;AACAF,MAAIC,GAAJ,CAAQ,YAAR,EAAsBC,QAAQ,YAAR,CAAtB;;AAEAF,MAAIC,GAAJ,CAAQ,OAAR,EAAiBC,QAAQ,QAAR,EAAkBC,OAAnC;;AAEA;AACAH,MAAII,KAAJ,CAAU,0DAAV,EACEC,GADF,CACM,iBAAO,GAAP,CADN;;AAGA;AACAL,MAAII,KAAJ,CAAU,IAAV,EACGC,GADH,CACO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBA,QAAIC,QAAJ,CAAa,eAAKC,OAAL,CAAgBT,IAAIK,GAAJ,CAAQ,SAAR,CAAhB,iBAAb;AACD,GAHH;AAID,C;;AAnBD;;;;AACA",
      "file": "routes.js",
      "sourceRoot": "/root/server",
      "sourcesContent": [
        "/**\n * Main application routes\n */\n\n'use strict';\n\nimport errors from './components/errors';\nimport path from 'path';\n\nexport default function(app) {\n  // Insert routes below\n  app.use('/api/news', require('./api/new'));\n  app.use('/api/users', require('./api/user'));\n\n  app.use('/auth', require('./auth').default);\n\n  // All undefined asset or api routes should return a 404\n  app.route('/:url(api|auth|components|app|bower_components|assets)/*')\n   .get(errors[404]);\n\n  // All other routes should redirect to the index.html\n  app.route('/*')\n    .get((req, res) => {\n      res.sendFile(path.resolve(`${app.get('appPath')}/index.html`));\n    });\n}\n"
      ]
    },
    "mtime": 1508176799571
  },
  "{\"filename\":\"/root/server/components/errors/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/components/errors\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/components/errors/index.js",
      "filenameRelative": "/root/server/components/errors/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/components/errors",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/components/errors",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "/**\n * Error responses\n */\n\n'use strict';\n\nmodule.exports[404] = function pageNotFound(req, res) {\n  var viewFilePath = '404';\n  var statusCode = 404;\n  var result = {\n    status: statusCode\n  };\n\n  res.status(result.status);\n  res.render(viewFilePath, {}, function (err, html) {\n    if (err) {\n      return res.status(result.status).json(result);\n    }\n\n    res.send(html);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJwYWdlTm90Rm91bmQiLCJyZXEiLCJyZXMiLCJ2aWV3RmlsZVBhdGgiLCJzdGF0dXNDb2RlIiwicmVzdWx0Iiwic3RhdHVzIiwicmVuZGVyIiwiZXJyIiwiaHRtbCIsImpzb24iLCJzZW5kIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUlBOztBQUVBQSxPQUFPQyxPQUFQLENBQWUsR0FBZixJQUFzQixTQUFTQyxZQUFULENBQXNCQyxHQUF0QixFQUEyQkMsR0FBM0IsRUFBZ0M7QUFDcEQsTUFBSUMsZUFBZSxLQUFuQjtBQUNBLE1BQUlDLGFBQWEsR0FBakI7QUFDQSxNQUFJQyxTQUFTO0FBQ1hDLFlBQVFGO0FBREcsR0FBYjs7QUFJQUYsTUFBSUksTUFBSixDQUFXRCxPQUFPQyxNQUFsQjtBQUNBSixNQUFJSyxNQUFKLENBQVdKLFlBQVgsRUFBeUIsRUFBekIsRUFBNkIsVUFBU0ssR0FBVCxFQUFjQyxJQUFkLEVBQW9CO0FBQy9DLFFBQUdELEdBQUgsRUFBUTtBQUNOLGFBQU9OLElBQUlJLE1BQUosQ0FBV0QsT0FBT0MsTUFBbEIsRUFBMEJJLElBQTFCLENBQStCTCxNQUEvQixDQUFQO0FBQ0Q7O0FBRURILFFBQUlTLElBQUosQ0FBU0YsSUFBVDtBQUNELEdBTkQ7QUFPRCxDQWZEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9jb21wb25lbnRzL2Vycm9ycyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRXJyb3IgcmVzcG9uc2VzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0c1s0MDRdID0gZnVuY3Rpb24gcGFnZU5vdEZvdW5kKHJlcSwgcmVzKSB7XG4gIHZhciB2aWV3RmlsZVBhdGggPSAnNDA0JztcbiAgdmFyIHN0YXR1c0NvZGUgPSA0MDQ7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgc3RhdHVzOiBzdGF0dXNDb2RlXG4gIH07XG5cbiAgcmVzLnN0YXR1cyhyZXN1bHQuc3RhdHVzKTtcbiAgcmVzLnJlbmRlcih2aWV3RmlsZVBhdGgsIHt9LCBmdW5jdGlvbihlcnIsIGh0bWwpIHtcbiAgICBpZihlcnIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKHJlc3VsdC5zdGF0dXMpLmpzb24ocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXMuc2VuZChodG1sKTtcbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "module",
        "exports",
        "pageNotFound",
        "req",
        "res",
        "viewFilePath",
        "statusCode",
        "result",
        "status",
        "render",
        "err",
        "html",
        "json",
        "send"
      ],
      "mappings": "AAAA;;;;AAIA;;AAEAA,OAAOC,OAAP,CAAe,GAAf,IAAsB,SAASC,YAAT,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AACpD,MAAIC,eAAe,KAAnB;AACA,MAAIC,aAAa,GAAjB;AACA,MAAIC,SAAS;AACXC,YAAQF;AADG,GAAb;;AAIAF,MAAII,MAAJ,CAAWD,OAAOC,MAAlB;AACAJ,MAAIK,MAAJ,CAAWJ,YAAX,EAAyB,EAAzB,EAA6B,UAASK,GAAT,EAAcC,IAAd,EAAoB;AAC/C,QAAGD,GAAH,EAAQ;AACN,aAAON,IAAII,MAAJ,CAAWD,OAAOC,MAAlB,EAA0BI,IAA1B,CAA+BL,MAA/B,CAAP;AACD;;AAEDH,QAAIS,IAAJ,CAASF,IAAT;AACD,GAND;AAOD,CAfD",
      "file": "index.js",
      "sourceRoot": "/root/server/components/errors",
      "sourcesContent": [
        "/**\n * Error responses\n */\n\n'use strict';\n\nmodule.exports[404] = function pageNotFound(req, res) {\n  var viewFilePath = '404';\n  var statusCode = 404;\n  var result = {\n    status: statusCode\n  };\n\n  res.status(result.status);\n  res.render(viewFilePath, {}, function(err, html) {\n    if(err) {\n      return res.status(result.status).json(result);\n    }\n\n    res.send(html);\n  });\n};\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/api/thing/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/thing\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/thing/index.js",
      "filenameRelative": "/root/server/api/thing/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/api/thing",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/thing",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar express = require('express');\nvar controller = require('./thing.controller');\n\nvar router = express.Router();\n\nrouter.get('/', controller.index);\nrouter.get('/:id', controller.show);\nrouter.post('/', controller.create);\nrouter.put('/:id', controller.upsert);\nrouter.patch('/:id', controller.patch);\nrouter.delete('/:id', controller.destroy);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiY29udHJvbGxlciIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImluZGV4Iiwic2hvdyIsInBvc3QiLCJjcmVhdGUiLCJwdXQiLCJ1cHNlcnQiLCJwYXRjaCIsImRlbGV0ZSIsImRlc3Ryb3kiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxVQUFVQyxRQUFRLFNBQVIsQ0FBZDtBQUNBLElBQUlDLGFBQWFELFFBQVEsb0JBQVIsQ0FBakI7O0FBRUEsSUFBSUUsU0FBU0gsUUFBUUksTUFBUixFQUFiOztBQUVBRCxPQUFPRSxHQUFQLENBQVcsR0FBWCxFQUFnQkgsV0FBV0ksS0FBM0I7QUFDQUgsT0FBT0UsR0FBUCxDQUFXLE1BQVgsRUFBbUJILFdBQVdLLElBQTlCO0FBQ0FKLE9BQU9LLElBQVAsQ0FBWSxHQUFaLEVBQWlCTixXQUFXTyxNQUE1QjtBQUNBTixPQUFPTyxHQUFQLENBQVcsTUFBWCxFQUFtQlIsV0FBV1MsTUFBOUI7QUFDQVIsT0FBT1MsS0FBUCxDQUFhLE1BQWIsRUFBcUJWLFdBQVdVLEtBQWhDO0FBQ0FULE9BQU9VLE1BQVAsQ0FBYyxNQUFkLEVBQXNCWCxXQUFXWSxPQUFqQzs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQmIsTUFBakIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2FwaS90aGluZyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgY29udHJvbGxlciA9IHJlcXVpcmUoJy4vdGhpbmcuY29udHJvbGxlcicpO1xuXG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVyLmdldCgnLycsIGNvbnRyb2xsZXIuaW5kZXgpO1xucm91dGVyLmdldCgnLzppZCcsIGNvbnRyb2xsZXIuc2hvdyk7XG5yb3V0ZXIucG9zdCgnLycsIGNvbnRyb2xsZXIuY3JlYXRlKTtcbnJvdXRlci5wdXQoJy86aWQnLCBjb250cm9sbGVyLnVwc2VydCk7XG5yb3V0ZXIucGF0Y2goJy86aWQnLCBjb250cm9sbGVyLnBhdGNoKTtcbnJvdXRlci5kZWxldGUoJy86aWQnLCBjb250cm9sbGVyLmRlc3Ryb3kpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "controller",
        "router",
        "Router",
        "get",
        "index",
        "show",
        "post",
        "create",
        "put",
        "upsert",
        "patch",
        "delete",
        "destroy",
        "module",
        "exports"
      ],
      "mappings": "AAAA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,aAAaD,QAAQ,oBAAR,CAAjB;;AAEA,IAAIE,SAASH,QAAQI,MAAR,EAAb;;AAEAD,OAAOE,GAAP,CAAW,GAAX,EAAgBH,WAAWI,KAA3B;AACAH,OAAOE,GAAP,CAAW,MAAX,EAAmBH,WAAWK,IAA9B;AACAJ,OAAOK,IAAP,CAAY,GAAZ,EAAiBN,WAAWO,MAA5B;AACAN,OAAOO,GAAP,CAAW,MAAX,EAAmBR,WAAWS,MAA9B;AACAR,OAAOS,KAAP,CAAa,MAAb,EAAqBV,WAAWU,KAAhC;AACAT,OAAOU,MAAP,CAAc,MAAd,EAAsBX,WAAWY,OAAjC;;AAEAC,OAAOC,OAAP,GAAiBb,MAAjB",
      "file": "index.js",
      "sourceRoot": "/root/server/api/thing",
      "sourcesContent": [
        "'use strict';\n\nvar express = require('express');\nvar controller = require('./thing.controller');\n\nvar router = express.Router();\n\nrouter.get('/', controller.index);\nrouter.get('/:id', controller.show);\nrouter.post('/', controller.create);\nrouter.put('/:id', controller.upsert);\nrouter.patch('/:id', controller.patch);\nrouter.delete('/:id', controller.destroy);\n\nmodule.exports = router;\n"
      ]
    },
    "mtime": 1507831002477
  },
  "{\"filename\":\"/root/server/api/thing/thing.controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/thing\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "fast-json-patch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "jsonpatch"
              }
            ]
          },
          {
            "source": "./thing.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Thing"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "index",
            "req",
            "res",
            "show",
            "req",
            "res",
            "create",
            "req",
            "res",
            "upsert",
            "req",
            "res",
            "patch",
            "req",
            "res",
            "destroy",
            "req",
            "res"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "index",
              "exported": "index"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "show",
              "exported": "show"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "create",
              "exported": "create"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "upsert",
              "exported": "upsert"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "patch",
              "exported": "patch"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "destroy",
              "exported": "destroy"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/thing/thing.controller.js",
      "filenameRelative": "/root/server/api/thing/thing.controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "thing.controller.js",
      "sourceFileName": "thing.controller.js",
      "sourceRoot": "/root/server/api/thing",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/thing",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "thing.controller"
    },
    "ignored": false,
    "code": "/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/things              ->  index\n * POST    /api/things              ->  create\n * GET     /api/things/:id          ->  show\n * PUT     /api/things/:id          ->  upsert\n * PATCH   /api/things/:id          ->  patch\n * DELETE  /api/things/:id          ->  destroy\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.index = index;\nexports.show = show;\nexports.create = create;\nexports.upsert = upsert;\nexports.patch = patch;\nexports.destroy = destroy;\n\nvar _fastJsonPatch = require('fast-json-patch');\n\nvar _fastJsonPatch2 = _interopRequireDefault(_fastJsonPatch);\n\nvar _thing = require('./thing.model');\n\nvar _thing2 = _interopRequireDefault(_thing);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function (entity) {\n    if (entity) {\n      return res.status(statusCode).json(entity);\n    }\n    return null;\n  };\n}\n\nfunction patchUpdates(patches) {\n  return function (entity) {\n    try {\n      // eslint-disable-next-line prefer-reflect\n      _fastJsonPatch2.default.apply(entity, patches, /*validate*/true);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n\n    return entity.save();\n  };\n}\n\nfunction removeEntity(res) {\n  return function (entity) {\n    if (entity) {\n      return entity.remove().then(function () {\n        res.status(204).end();\n      });\n    }\n  };\n}\n\nfunction handleEntityNotFound(res) {\n  return function (entity) {\n    if (!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function (err) {\n    res.status(statusCode).send(err);\n  };\n}\n\n// Gets a list of Things\nfunction index(req, res) {\n  return _thing2.default.find().exec().then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Gets a single Thing from the DB\nfunction show(req, res) {\n  return _thing2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Creates a new Thing in the DB\nfunction create(req, res) {\n  return _thing2.default.create(req.body).then(respondWithResult(res, 201)).catch(handleError(res));\n}\n\n// Upserts the given Thing in the DB at the specified ID\nfunction upsert(req, res) {\n  if (req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return _thing2.default.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true, upsert: true, setDefaultsOnInsert: true, runValidators: true }).exec().then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Updates an existing Thing in the DB\nfunction patch(req, res) {\n  if (req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return _thing2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(patchUpdates(req.body)).then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Deletes a Thing from the DB\nfunction destroy(req, res) {\n  return _thing2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(removeEntity(res)).catch(handleError(res));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoaW5nLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiaW5kZXgiLCJzaG93IiwiY3JlYXRlIiwidXBzZXJ0IiwicGF0Y2giLCJkZXN0cm95IiwicmVzcG9uZFdpdGhSZXN1bHQiLCJyZXMiLCJzdGF0dXNDb2RlIiwiZW50aXR5Iiwic3RhdHVzIiwianNvbiIsInBhdGNoVXBkYXRlcyIsInBhdGNoZXMiLCJhcHBseSIsImVyciIsIlByb21pc2UiLCJyZWplY3QiLCJzYXZlIiwicmVtb3ZlRW50aXR5IiwicmVtb3ZlIiwidGhlbiIsImVuZCIsImhhbmRsZUVudGl0eU5vdEZvdW5kIiwiaGFuZGxlRXJyb3IiLCJzZW5kIiwicmVxIiwiZmluZCIsImV4ZWMiLCJjYXRjaCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJib2R5IiwiX2lkIiwiUmVmbGVjdCIsImRlbGV0ZVByb3BlcnR5IiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsInNldERlZmF1bHRzT25JbnNlcnQiLCJydW5WYWxpZGF0b3JzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7OztBQVVBOzs7OztRQXlEZ0JBLEssR0FBQUEsSztRQU9BQyxJLEdBQUFBLEk7UUFRQUMsTSxHQUFBQSxNO1FBT0FDLE0sR0FBQUEsTTtRQVdBQyxLLEdBQUFBLEs7UUFZQUMsTyxHQUFBQSxPOztBQXBHaEI7Ozs7QUFDQTs7Ozs7O0FBRUEsU0FBU0MsaUJBQVQsQ0FBMkJDLEdBQTNCLEVBQWdDQyxVQUFoQyxFQUE0QztBQUMxQ0EsZUFBYUEsY0FBYyxHQUEzQjtBQUNBLFNBQU8sVUFBU0MsTUFBVCxFQUFpQjtBQUN0QixRQUFHQSxNQUFILEVBQVc7QUFDVCxhQUFPRixJQUFJRyxNQUFKLENBQVdGLFVBQVgsRUFBdUJHLElBQXZCLENBQTRCRixNQUE1QixDQUFQO0FBQ0Q7QUFDRCxXQUFPLElBQVA7QUFDRCxHQUxEO0FBTUQ7O0FBRUQsU0FBU0csWUFBVCxDQUFzQkMsT0FBdEIsRUFBK0I7QUFDN0IsU0FBTyxVQUFT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QUFULENBQWVzQixHQUFmLEVBQW9CbkIsR0FBcEIsRUFBeUI7QUFDOUIsTUFBR21CLElBQUlPLElBQUosQ0FBU0MsR0FBWixFQUFpQjtBQUNmQyxZQUFRQyxjQUFSLENBQXVCVixJQUFJTyxJQUEzQixFQUFpQyxLQUFqQztBQUNEO0FBQ0QsU0FBTyxnQkFBTUgsUUFBTixDQUFlSixJQUFJSyxNQUFKLENBQVdDLEVBQTFCLEVBQThCSixJQUE5QixHQUNKUCxJQURJLENBQ0NFLHFCQUFxQmhCLEdBQXJCLENBREQsRUFFSmMsSUFGSSxDQUVDVCxhQUFhYyxJQUFJTyxJQUFqQixDQUZELEVBR0paLElBSEksQ0FHQ2Ysa0JBQWtCQyxHQUFsQixDQUhELEVBSUpzQixLQUpJLENBSUVMLFlBQVlqQixHQUFaLENBSkYsQ0FBUDtBQUtEOztBQUVEO0FBQ08sU0FBU0YsT0FBVCxDQUFpQnFCLEdBQWpCLEVBQXNCbkIsR0FBdEIsRUFBMkI7QUFDaEMsU0FBTyxnQkFBTXVCLFFBQU4sQ0FBZUosSUFBSUssTUFBSixDQUFXQyxFQUExQixFQUE4QkosSUFBOUIsR0FDSlAsSUFESSxDQUNDRSxxQkFBcUJoQixHQUFyQixDQURELEVBRUpjLElBRkksQ0FFQ0YsYUFBYVosR0FBYixDQUZELEVBR0pzQixLQUhJLENBR0VMLFlBQVlqQixHQUFaLENBSEYsQ0FBUDtBQUlEIiwiZmlsZSI6InRoaW5nLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2FwaS90aGluZyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXNpbmcgUmFpbHMtbGlrZSBzdGFuZGFyZCBuYW1pbmcgY29udmVudGlvbiBmb3IgZW5kcG9pbnRzLlxuICogR0VUICAgICAvYXBpL3RoaW5ncyAgICAgICAgICAgICAgLT4gIGluZGV4XG4gKiBQT1NUICAgIC9hcGkvdGhpbmdzICAgICAgICAgICAgICAtPiAgY3JlYXRlXG4gKiBHRVQgICAgIC9hcGkvdGhpbmdzLzppZCAgICAgICAgICAtPiAgc2hvd1xuICogUFVUICAgICAvYXBpL3RoaW5ncy86aWQgICAgICAgICAgLT4gIHVwc2VydFxuICogUEFUQ0ggICAvYXBpL3RoaW5ncy86aWQgICAgICAgICAgLT4gIHBhdGNoXG4gKiBERUxFVEUgIC9hcGkvdGhpbmdzLzppZCAgICAgICAgICAtPiAgZGVzdHJveVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGpzb25wYXRjaCBmcm9tICdmYXN0LWpzb24tcGF0Y2gnO1xuaW1wb3J0IFRoaW5nIGZyb20gJy4vdGhpbmcubW9kZWwnO1xuXG5mdW5jdGlvbiByZXNwb25kV2l0aFJlc3VsdChyZXMsIHN0YXR1c0NvZGUpIHtcbiAgc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGUgfHwgMjAwO1xuICByZXR1cm4gZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgaWYoZW50aXR5KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKGVudGl0eSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXRjaFVwZGF0ZXMocGF0Y2hlcykge1xuICByZXR1cm4gZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVmbGVjdFxuICAgICAganNvbnBhdGNoLmFwcGx5KGVudGl0eSwgcGF0Y2hlcywgLyp2YWxpZGF0ZSovIHRydWUpO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW50aXR5LnNhdmUoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRW50aXR5KHJlcykge1xuICByZXR1cm4gZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgaWYoZW50aXR5KSB7XG4gICAgICByZXR1cm4gZW50aXR5LnJlbW92ZSgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDIwNCkuZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRW50aXR5Tm90Rm91bmQocmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbihlbnRpdHkpIHtcbiAgICBpZighZW50aXR5KSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuZW5kKCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGVudGl0eTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IocmVzLCBzdGF0dXNDb2RlKSB7XG4gIHN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlIHx8IDUwMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKGVycikge1xuICAgIHJlcy5zdGF0dXMoc3RhdHVzQ29kZSkuc2VuZChlcnIpO1xuICB9O1xufVxuXG4vLyBHZXRzIGEgbGlzdCBvZiBUaGluZ3NcbmV4cG9ydCBmdW5jdGlvbiBpbmRleChyZXEsIHJlcykge1xuICByZXR1cm4gVGhpbmcuZmluZCgpLmV4ZWMoKVxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBHZXRzIGEgc2luZ2xlIFRoaW5nIGZyb20gdGhlIERCXG5leHBvcnQgZnVuY3Rpb24gc2hvdyhyZXEsIHJlcykge1xuICByZXR1cm4gVGhpbmcuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkuZXhlYygpXG4gICAgLnRoZW4oaGFuZGxlRW50aXR5Tm90Rm91bmQocmVzKSlcbiAgICAudGhlbihyZXNwb25kV2l0aFJlc3VsdChyZXMpKVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcihyZXMpKTtcbn1cblxuLy8gQ3JlYXRlcyBhIG5ldyBUaGluZyBpbiB0aGUgREJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUocmVxLCByZXMpIHtcbiAgcmV0dXJuIFRoaW5nLmNyZWF0ZShyZXEuYm9keSlcbiAgICAudGhlbihyZXNwb25kV2l0aFJlc3VsdChyZXMsIDIwMSkpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBVcHNlcnRzIHRoZSBnaXZlbiBUaGluZyBpbiB0aGUgREIgYXQgdGhlIHNwZWNpZmllZCBJRFxuZXhwb3J0IGZ1bmN0aW9uIHVwc2VydChyZXEsIHJlcykge1xuICBpZihyZXEuYm9keS5faWQpIHtcbiAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHJlcS5ib2R5LCAnX2lkJyk7XG4gIH1cbiAgcmV0dXJuIFRoaW5nLmZpbmRPbmVBbmRVcGRhdGUoe19pZDogcmVxLnBhcmFtcy5pZH0sIHJlcS5ib2R5LCB7bmV3OiB0cnVlLCB1cHNlcnQ6IHRydWUsIHNldERlZmF1bHRzT25JbnNlcnQ6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWV9KS5leGVjKClcblxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBVcGRhdGVzIGFuIGV4aXN0aW5nIFRoaW5nIGluIHRoZSBEQlxuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoKHJlcSwgcmVzKSB7XG4gIGlmKHJlcS5ib2R5Ll9pZCkge1xuICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkocmVxLmJvZHksICdfaWQnKTtcbiAgfVxuICByZXR1cm4gVGhpbmcuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkuZXhlYygpXG4gICAgLnRoZW4oaGFuZGxlRW50aXR5Tm90Rm91bmQocmVzKSlcbiAgICAudGhlbihwYXRjaFVwZGF0ZXMocmVxLmJvZHkpKVxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBEZWxldGVzIGEgVGhpbmcgZnJvbSB0aGUgREJcbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95KHJlcSwgcmVzKSB7XG4gIHJldHVybiBUaGluZy5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5leGVjKClcbiAgICAudGhlbihoYW5kbGVFbnRpdHlOb3RGb3VuZChyZXMpKVxuICAgIC50aGVuKHJlbW92ZUVudGl0eShyZXMpKVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcihyZXMpKTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "thing.controller.js"
      ],
      "names": [
        "index",
        "show",
        "create",
        "upsert",
        "patch",
        "destroy",
        "respondWithResult",
        "res",
        "statusCode",
        "entity",
        "status",
        "json",
        "patchUpdates",
        "patches",
        "apply",
        "err",
        "Promise",
        "reject",
        "save",
        "removeEntity",
        "remove",
        "then",
        "end",
        "handleEntityNotFound",
        "handleError",
        "send",
        "req",
        "find",
        "exec",
        "catch",
        "findById",
        "params",
        "id",
        "body",
        "_id",
        "Reflect",
        "deleteProperty",
        "findOneAndUpdate",
        "new",
        "setDefaultsOnInsert",
        "runValidators"
      ],
      "mappings": "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",
      "file": "thing.controller.js",
      "sourceRoot": "/root/server/api/thing",
      "sourcesContent": [
        "/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/things              ->  index\n * POST    /api/things              ->  create\n * GET     /api/things/:id          ->  show\n * PUT     /api/things/:id          ->  upsert\n * PATCH   /api/things/:id          ->  patch\n * DELETE  /api/things/:id          ->  destroy\n */\n\n'use strict';\n\nimport jsonpatch from 'fast-json-patch';\nimport Thing from './thing.model';\n\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function(entity) {\n    if(entity) {\n      return res.status(statusCode).json(entity);\n    }\n    return null;\n  };\n}\n\nfunction patchUpdates(patches) {\n  return function(entity) {\n    try {\n      // eslint-disable-next-line prefer-reflect\n      jsonpatch.apply(entity, patches, /*validate*/ true);\n    } catch(err) {\n      return Promise.reject(err);\n    }\n\n    return entity.save();\n  };\n}\n\nfunction removeEntity(res) {\n  return function(entity) {\n    if(entity) {\n      return entity.remove()\n        .then(() => {\n          res.status(204).end();\n        });\n    }\n  };\n}\n\nfunction handleEntityNotFound(res) {\n  return function(entity) {\n    if(!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function(err) {\n    res.status(statusCode).send(err);\n  };\n}\n\n// Gets a list of Things\nexport function index(req, res) {\n  return Thing.find().exec()\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Gets a single Thing from the DB\nexport function show(req, res) {\n  return Thing.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Creates a new Thing in the DB\nexport function create(req, res) {\n  return Thing.create(req.body)\n    .then(respondWithResult(res, 201))\n    .catch(handleError(res));\n}\n\n// Upserts the given Thing in the DB at the specified ID\nexport function upsert(req, res) {\n  if(req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return Thing.findOneAndUpdate({_id: req.params.id}, req.body, {new: true, upsert: true, setDefaultsOnInsert: true, runValidators: true}).exec()\n\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Updates an existing Thing in the DB\nexport function patch(req, res) {\n  if(req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return Thing.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(patchUpdates(req.body))\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Deletes a Thing from the DB\nexport function destroy(req, res) {\n  return Thing.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(removeEntity(res))\n    .catch(handleError(res));\n}\n"
      ]
    },
    "mtime": 1507831002477
  },
  "{\"filename\":\"/root/server/api/user/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/user\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireWildcard"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "Router"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Router",
                "local": "Router"
              }
            ]
          },
          {
            "source": "./user.controller",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "controller"
              }
            ]
          },
          {
            "source": "../../auth/auth.service",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "auth"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/user/index.js",
      "filenameRelative": "/root/server/api/user/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/api/user",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/user",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _express = require('express');\n\nvar _user = require('./user.controller');\n\nvar controller = _interopRequireWildcard(_user);\n\nvar _auth = require('../../auth/auth.service');\n\nvar auth = _interopRequireWildcard(_auth);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar router = new _express.Router();\n\nrouter.get('/', auth.hasRole('admin'), controller.index);\nrouter.delete('/:id', auth.hasRole('admin'), controller.destroy);\nrouter.get('/me', auth.isAuthenticated(), controller.me);\nrouter.put('/:id/password', auth.isAuthenticated(), controller.changePassword);\nrouter.get('/:id', auth.isAuthenticated(), controller.show);\nrouter.post('/', controller.create);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbnRyb2xsZXIiLCJhdXRoIiwicm91dGVyIiwiZ2V0IiwiaGFzUm9sZSIsImluZGV4IiwiZGVsZXRlIiwiZGVzdHJveSIsImlzQXV0aGVudGljYXRlZCIsIm1lIiwicHV0IiwiY2hhbmdlUGFzc3dvcmQiLCJzaG93IiwicG9zdCIsImNyZWF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUNBOztJQUFZQSxVOztBQUNaOztJQUFZQyxJOzs7O0FBRVosSUFBSUMsU0FBUyxxQkFBYjs7QUFFQUEsT0FBT0MsR0FBUCxDQUFXLEdBQVgsRUFBZ0JGLEtBQUtHLE9BQUwsQ0FBYSxPQUFiLENBQWhCLEVBQXVDSixXQUFXSyxLQUFsRDtBQUNBSCxPQUFPSSxNQUFQLENBQWMsTUFBZCxFQUFzQkwsS0FBS0csT0FBTCxDQUFhLE9BQWIsQ0FBdEIsRUFBNkNKLFdBQVdPLE9BQXhEO0FBQ0FMLE9BQU9DLEdBQVAsQ0FBVyxLQUFYLEVBQWtCRixLQUFLTyxlQUFMLEVBQWxCLEVBQTBDUixXQUFXUyxFQUFyRDtBQUNBUCxPQUFPUSxHQUFQLENBQVcsZUFBWCxFQUE0QlQsS0FBS08sZUFBTCxFQUE1QixFQUFvRFIsV0FBV1csY0FBL0Q7QUFDQVQsT0FBT0MsR0FBUCxDQUFXLE1BQVgsRUFBbUJGLEtBQUtPLGVBQUwsRUFBbkIsRUFBMkNSLFdBQVdZLElBQXREO0FBQ0FWLE9BQU9XLElBQVAsQ0FBWSxHQUFaLEVBQWlCYixXQUFXYyxNQUE1Qjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQmQsTUFBakIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2FwaS91c2VyIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge1JvdXRlcn0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBjb250cm9sbGVyIGZyb20gJy4vdXNlci5jb250cm9sbGVyJztcbmltcG9ydCAqIGFzIGF1dGggZnJvbSAnLi4vLi4vYXV0aC9hdXRoLnNlcnZpY2UnO1xuXG52YXIgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KCcvJywgYXV0aC5oYXNSb2xlKCdhZG1pbicpLCBjb250cm9sbGVyLmluZGV4KTtcbnJvdXRlci5kZWxldGUoJy86aWQnLCBhdXRoLmhhc1JvbGUoJ2FkbWluJyksIGNvbnRyb2xsZXIuZGVzdHJveSk7XG5yb3V0ZXIuZ2V0KCcvbWUnLCBhdXRoLmlzQXV0aGVudGljYXRlZCgpLCBjb250cm9sbGVyLm1lKTtcbnJvdXRlci5wdXQoJy86aWQvcGFzc3dvcmQnLCBhdXRoLmlzQXV0aGVudGljYXRlZCgpLCBjb250cm9sbGVyLmNoYW5nZVBhc3N3b3JkKTtcbnJvdXRlci5nZXQoJy86aWQnLCBhdXRoLmlzQXV0aGVudGljYXRlZCgpLCBjb250cm9sbGVyLnNob3cpO1xucm91dGVyLnBvc3QoJy8nLCBjb250cm9sbGVyLmNyZWF0ZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "controller",
        "auth",
        "router",
        "get",
        "hasRole",
        "index",
        "delete",
        "destroy",
        "isAuthenticated",
        "me",
        "put",
        "changePassword",
        "show",
        "post",
        "create",
        "module",
        "exports"
      ],
      "mappings": "AAAA;;AAEA;;AACA;;IAAYA,U;;AACZ;;IAAYC,I;;;;AAEZ,IAAIC,SAAS,qBAAb;;AAEAA,OAAOC,GAAP,CAAW,GAAX,EAAgBF,KAAKG,OAAL,CAAa,OAAb,CAAhB,EAAuCJ,WAAWK,KAAlD;AACAH,OAAOI,MAAP,CAAc,MAAd,EAAsBL,KAAKG,OAAL,CAAa,OAAb,CAAtB,EAA6CJ,WAAWO,OAAxD;AACAL,OAAOC,GAAP,CAAW,KAAX,EAAkBF,KAAKO,eAAL,EAAlB,EAA0CR,WAAWS,EAArD;AACAP,OAAOQ,GAAP,CAAW,eAAX,EAA4BT,KAAKO,eAAL,EAA5B,EAAoDR,WAAWW,cAA/D;AACAT,OAAOC,GAAP,CAAW,MAAX,EAAmBF,KAAKO,eAAL,EAAnB,EAA2CR,WAAWY,IAAtD;AACAV,OAAOW,IAAP,CAAY,GAAZ,EAAiBb,WAAWc,MAA5B;;AAEAC,OAAOC,OAAP,GAAiBd,MAAjB",
      "file": "index.js",
      "sourceRoot": "/root/server/api/user",
      "sourcesContent": [
        "'use strict';\n\nimport {Router} from 'express';\nimport * as controller from './user.controller';\nimport * as auth from '../../auth/auth.service';\n\nvar router = new Router();\n\nrouter.get('/', auth.hasRole('admin'), controller.index);\nrouter.delete('/:id', auth.hasRole('admin'), controller.destroy);\nrouter.get('/me', auth.isAuthenticated(), controller.me);\nrouter.put('/:id/password', auth.isAuthenticated(), controller.changePassword);\nrouter.get('/:id', auth.isAuthenticated(), controller.show);\nrouter.post('/', controller.create);\n\nmodule.exports = router;\n"
      ]
    },
    "mtime": 1508176549628
  },
  "{\"filename\":\"/root/server/api/user/user.controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/user\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./user.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "User"
              }
            ]
          },
          {
            "source": "../../config/environment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "jsonwebtoken",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "jwt"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "index",
            "req",
            "res",
            "create",
            "req",
            "res",
            "show",
            "req",
            "res",
            "next",
            "destroy",
            "req",
            "res",
            "changePassword",
            "req",
            "res",
            "me",
            "req",
            "res",
            "next",
            "authCallback",
            "req",
            "res"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "index",
              "exported": "index"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "create",
              "exported": "create"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "show",
              "exported": "show"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "next",
              "exported": "next"
            },
            {
              "kind": "local",
              "local": "destroy",
              "exported": "destroy"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "changePassword",
              "exported": "changePassword"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "me",
              "exported": "me"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "next",
              "exported": "next"
            },
            {
              "kind": "local",
              "local": "authCallback",
              "exported": "authCallback"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/user/user.controller.js",
      "filenameRelative": "/root/server/api/user/user.controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "user.controller.js",
      "sourceFileName": "user.controller.js",
      "sourceRoot": "/root/server/api/user",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/user",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "user.controller"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.index = index;\nexports.create = create;\nexports.show = show;\nexports.destroy = destroy;\nexports.changePassword = changePassword;\nexports.me = me;\nexports.authCallback = authCallback;\n\nvar _user = require('./user.model');\n\nvar _user2 = _interopRequireDefault(_user);\n\nvar _environment = require('../../config/environment');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nvar _jsonwebtoken = require('jsonwebtoken');\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction validationError(res, statusCode) {\n  statusCode = statusCode || 422;\n  return function (err) {\n    return res.status(statusCode).json(err);\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function (err) {\n    return res.status(statusCode).send(err);\n  };\n}\n\n/**\n * Get list of users\n * restriction: 'admin'\n */\nfunction index(req, res) {\n  return _user2.default.find({}, '-salt -password').exec().then(function (users) {\n    res.status(200).json(users);\n  }).catch(handleError(res));\n}\n\n/**\n * Creates a new user\n */\nfunction create(req, res) {\n  var newUser = new _user2.default(req.body);\n  newUser.provider = 'local';\n  newUser.role = 'user';\n  newUser.save().then(function (user) {\n    var token = _jsonwebtoken2.default.sign({ _id: user._id }, _environment2.default.secrets.session, {\n      expiresIn: 60 * 60 * 5\n    });\n    res.json({ token: token });\n  }).catch(validationError(res));\n}\n\n/**\n * Get a single user\n */\nfunction show(req, res, next) {\n  var userId = req.params.id;\n\n  return _user2.default.findById(userId).exec().then(function (user) {\n    if (!user) {\n      return res.status(404).end();\n    }\n    res.json(user.profile);\n  }).catch(function (err) {\n    return next(err);\n  });\n}\n\n/**\n * Deletes a user\n * restriction: 'admin'\n */\nfunction destroy(req, res) {\n  return _user2.default.findByIdAndRemove(req.params.id).exec().then(function () {\n    res.status(204).end();\n  }).catch(handleError(res));\n}\n\n/**\n * Change a users password\n */\nfunction changePassword(req, res) {\n  var userId = req.user._id;\n  var oldPass = String(req.body.oldPassword);\n  var newPass = String(req.body.newPassword);\n\n  return _user2.default.findById(userId).exec().then(function (user) {\n    if (user.authenticate(oldPass)) {\n      user.password = newPass;\n      return user.save().then(function () {\n        res.status(204).end();\n      }).catch(validationError(res));\n    } else {\n      return res.status(403).end();\n    }\n  });\n}\n\n/**\n * Get my info\n */\nfunction me(req, res, next) {\n  var userId = req.user._id;\n\n  return _user2.default.findOne({ _id: userId }, '-salt -password').exec().then(function (user) {\n    // don't ever give out the password or salt\n    if (!user) {\n      return res.status(401).end();\n    }\n    res.json(user);\n  }).catch(function (err) {\n    return next(err);\n  });\n}\n\n/**\n * Authentication callback\n */\nfunction authCallback(req, res) {\n  res.redirect('/');\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJpbmRleCIsImNyZWF0ZSIsInNob3ciLCJkZXN0cm95IiwiY2hhbmdlUGFzc3dvcmQiLCJtZSIsImF1dGhDYWxsYmFjayIsInZhbGlkYXRpb25FcnJvciIsInJlcyIsInN0YXR1c0NvZGUiLCJlcnIiLCJzdGF0dXMiLCJqc29uIiwiaGFuZGxlRXJyb3IiLCJzZW5kIiwicmVxIiwiZmluZCIsImV4ZWMiLCJ0aGVuIiwidXNlcnMiLCJjYXRjaCIsIm5ld1VzZXIiLCJib2R5IiwicHJvdmlkZXIiLCJyb2xlIiwic2F2ZSIsInVzZXIiLCJ0b2tlbiIsInNpZ24iLCJfaWQiLCJzZWNyZXRzIiwic2Vzc2lvbiIsImV4cGlyZXNJbiIsIm5leHQiLCJ1c2VySWQiLCJwYXJhbXMiLCJpZCIsImZpbmRCeUlkIiwiZW5kIiwicHJvZmlsZSIsImZpbmRCeUlkQW5kUmVtb3ZlIiwib2xkUGFzcyIsIlN0cmluZyIsIm9sZFBhc3N3b3JkIiwibmV3UGFzcyIsIm5ld1Bhc3N3b3JkIiwiYXV0aGVudGljYXRlIiwicGFzc3dvcmQiLCJmaW5kT25lIiwicmVkaXJlY3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztRQXdCZ0JBLEssR0FBQUEsSztRQVdBQyxNLEdBQUFBLE07UUFpQkFDLEksR0FBQUEsSTtRQWlCQUMsTyxHQUFBQSxPO1FBV0FDLGMsR0FBQUEsYztRQXVCQUMsRSxHQUFBQSxFO1FBZ0JBQyxZLEdBQUFBLFk7O0FBckhoQjs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLFNBQVNDLGVBQVQsQ0FBeUJDLEdBQXpCLEVBQThCQyxVQUE5QixFQUEwQztBQUN4Q0EsZUFBYUEsY0FBYyxHQUEzQjtBQUNBLFNBQU8sVUFBU0MsR0FBVCxFQUFjO0FBQ25CLFdBQU9GLElBQUlHLE1BQUosQ0FBV0YsVUFBWCxFQUF1QkcsSUFBdkIsQ0FBNEJGLEdBQTVCLENBQVA7QUFDRCxHQUZEO0FBR0Q7O0FBRUQsU0FBU0csV0FBVCxDQUFx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QUFDQSxhQUFPbEIsS0FBS0QsSUFBTCxHQUNKUCxJQURJLENBQ0MsWUFBTTtBQUNWVixZQUFJRyxNQUFKLENBQVcsR0FBWCxFQUFnQjJCLEdBQWhCO0FBQ0QsT0FISSxFQUlKbEIsS0FKSSxDQUlFYixnQkFBZ0JDLEdBQWhCLENBSkYsQ0FBUDtBQUtELEtBUEQsTUFPTztBQUNMLGFBQU9BLElBQUlHLE1BQUosQ0FBVyxHQUFYLEVBQWdCMkIsR0FBaEIsRUFBUDtBQUNEO0FBQ0YsR0FaSSxDQUFQO0FBYUQ7O0FBRUQ7OztBQUdPLFNBQVNqQyxFQUFULENBQVlVLEdBQVosRUFBaUJQLEdBQWpCLEVBQXNCeUIsSUFBdEIsRUFBNEI7QUFDakMsTUFBSUMsU0FBU25CLElBQUlXLElBQUosQ0FBU0csR0FBdEI7O0FBRUEsU0FBTyxlQUFLbUIsT0FBTCxDQUFhLEVBQUVuQixLQUFLSyxNQUFQLEVBQWIsRUFBOEIsaUJBQTlCLEVBQWlEakIsSUFBakQsR0FDSkMsSUFESSxDQUNDLGdCQUFRO0FBQUU7QUFDZCxRQUFHLENBQUNRLElBQUosRUFBVTtBQUNSLGFBQU9sQixJQUFJRyxNQUFKLENBQVcsR0FBWCxFQUFnQjJCLEdBQWhCLEVBQVA7QUFDRDtBQUNEOUIsUUFBSUksSUFBSixDQUFTYyxJQUFUO0FBQ0QsR0FOSSxFQU9KTixLQVBJLENBT0U7QUFBQSxXQUFPYSxLQUFLdkIsR0FBTCxDQUFQO0FBQUEsR0FQRixDQUFQO0FBUUQ7O0FBRUQ7OztBQUdPLFNBQVNKLFlBQVQsQ0FBc0JTLEdBQXRCLEVBQTJCUCxHQUEzQixFQUFnQztBQUNyQ0EsTUFBSXlDLFFBQUosQ0FBYSxHQUFiO0FBQ0QiLCJmaWxlIjoidXNlci5jb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hcGkvdXNlciIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFVzZXIgZnJvbSAnLi91c2VyLm1vZGVsJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vLi4vY29uZmlnL2Vudmlyb25tZW50JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKHJlcywgc3RhdHVzQ29kZSkge1xuICBzdGF0dXNDb2RlID0gc3RhdHVzQ29kZSB8fCA0MjI7XG4gIHJldHVybiBmdW5jdGlvbihlcnIpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKGVycik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlcywgc3RhdHVzQ29kZSkge1xuICBzdGF0dXNDb2RlID0gc3RhdHVzQ29kZSB8fCA1MDA7XG4gIHJldHVybiBmdW5jdGlvbihlcnIpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5zZW5kKGVycik7XG4gIH07XG59XG5cbi8qKlxuICogR2V0IGxpc3Qgb2YgdXNlcnNcbiAqIHJlc3RyaWN0aW9uOiAnYWRtaW4nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmRleChyZXEsIHJlcykge1xuICByZXR1cm4gVXNlci5maW5kKHt9LCAnLXNhbHQgLXBhc3N3b3JkJykuZXhlYygpXG4gICAgLnRoZW4odXNlcnMgPT4ge1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXNlcnMpO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdXNlclxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHJlcSwgcmVzKSB7XG4gIHZhciBuZXdVc2VyID0gbmV3IFVzZXIocmVxLmJvZHkpO1xuICBuZXdVc2VyLnByb3ZpZGVyID0gJ2xvY2FsJztcbiAgbmV3VXNlci5yb2xlID0gJ3VzZXInO1xuICBuZXdVc2VyLnNhdmUoKVxuICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsgX2lkOiB1c2VyLl9pZCB9LCBjb25maWcuc2VjcmV0cy5zZXNzaW9uLCB7XG4gICAgICAgIGV4cGlyZXNJbjogNjAgKiA2MCAqIDVcbiAgICAgIH0pO1xuICAgICAgcmVzLmpzb24oeyB0b2tlbiB9KTtcbiAgICB9KVxuICAgIC5jYXRjaCh2YWxpZGF0aW9uRXJyb3IocmVzKSk7XG59XG5cbi8qKlxuICogR2V0IGEgc2luZ2xlIHVzZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3cocmVxLCByZXMsIG5leHQpIHtcbiAgdmFyIHVzZXJJZCA9IHJlcS5wYXJhbXMuaWQ7XG5cbiAgcmV0dXJuIFVzZXIuZmluZEJ5SWQodXNlcklkKS5leGVjKClcbiAgICAudGhlbih1c2VyID0+IHtcbiAgICAgIGlmKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuZW5kKCk7XG4gICAgICB9XG4gICAgICByZXMuanNvbih1c2VyLnByb2ZpbGUpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBuZXh0KGVycikpO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgYSB1c2VyXG4gKiByZXN0cmljdGlvbjogJ2FkbWluJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveShyZXEsIHJlcykge1xuICByZXR1cm4gVXNlci5maW5kQnlJZEFuZFJlbW92ZShyZXEucGFyYW1zLmlkKS5leGVjKClcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKTtcbiAgICB9KVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcihyZXMpKTtcbn1cblxuLyoqXG4gKiBDaGFuZ2UgYSB1c2VycyBwYXNzd29yZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQocmVxLCByZXMpIHtcbiAgdmFyIHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcbiAgdmFyIG9sZFBhc3MgPSBTdHJpbmcocmVxLmJvZHkub2xkUGFzc3dvcmQpO1xuICB2YXIgbmV3UGFzcyA9IFN0cmluZyhyZXEuYm9keS5uZXdQYXNzd29yZCk7XG5cbiAgcmV0dXJuIFVzZXIuZmluZEJ5SWQodXNlcklkKS5leGVjKClcbiAgICAudGhlbih1c2VyID0+IHtcbiAgICAgIGlmKHVzZXIuYXV0aGVudGljYXRlKG9sZFBhc3MpKSB7XG4gICAgICAgIHVzZXIucGFzc3dvcmQgPSBuZXdQYXNzO1xuICAgICAgICByZXR1cm4gdXNlci5zYXZlKClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwNCkuZW5kKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2godmFsaWRhdGlvbkVycm9yKHJlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5lbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgbXkgaW5mb1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWUocmVxLCByZXMsIG5leHQpIHtcbiAgdmFyIHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcblxuICByZXR1cm4gVXNlci5maW5kT25lKHsgX2lkOiB1c2VySWQgfSwgJy1zYWx0IC1wYXNzd29yZCcpLmV4ZWMoKVxuICAgIC50aGVuKHVzZXIgPT4geyAvLyBkb24ndCBldmVyIGdpdmUgb3V0IHRoZSBwYXNzd29yZCBvciBzYWx0XG4gICAgICBpZighdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmVuZCgpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24odXNlcik7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IG5leHQoZXJyKSk7XG59XG5cbi8qKlxuICogQXV0aGVudGljYXRpb24gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF1dGhDYWxsYmFjayhyZXEsIHJlcykge1xuICByZXMucmVkaXJlY3QoJy8nKTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "user.controller.js"
      ],
      "names": [
        "index",
        "create",
        "show",
        "destroy",
        "changePassword",
        "me",
        "authCallback",
        "validationError",
        "res",
        "statusCode",
        "err",
        "status",
        "json",
        "handleError",
        "send",
        "req",
        "find",
        "exec",
        "then",
        "users",
        "catch",
        "newUser",
        "body",
        "provider",
        "role",
        "save",
        "user",
        "token",
        "sign",
        "_id",
        "secrets",
        "session",
        "expiresIn",
        "next",
        "userId",
        "params",
        "id",
        "findById",
        "end",
        "profile",
        "findByIdAndRemove",
        "oldPass",
        "String",
        "oldPassword",
        "newPass",
        "newPassword",
        "authenticate",
        "password",
        "findOne",
        "redirect"
      ],
      "mappings": "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",
      "file": "user.controller.js",
      "sourceRoot": "/root/server/api/user",
      "sourcesContent": [
        "'use strict';\n\nimport User from './user.model';\nimport config from '../../config/environment';\nimport jwt from 'jsonwebtoken';\n\nfunction validationError(res, statusCode) {\n  statusCode = statusCode || 422;\n  return function(err) {\n    return res.status(statusCode).json(err);\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function(err) {\n    return res.status(statusCode).send(err);\n  };\n}\n\n/**\n * Get list of users\n * restriction: 'admin'\n */\nexport function index(req, res) {\n  return User.find({}, '-salt -password').exec()\n    .then(users => {\n      res.status(200).json(users);\n    })\n    .catch(handleError(res));\n}\n\n/**\n * Creates a new user\n */\nexport function create(req, res) {\n  var newUser = new User(req.body);\n  newUser.provider = 'local';\n  newUser.role = 'user';\n  newUser.save()\n    .then(function(user) {\n      var token = jwt.sign({ _id: user._id }, config.secrets.session, {\n        expiresIn: 60 * 60 * 5\n      });\n      res.json({ token });\n    })\n    .catch(validationError(res));\n}\n\n/**\n * Get a single user\n */\nexport function show(req, res, next) {\n  var userId = req.params.id;\n\n  return User.findById(userId).exec()\n    .then(user => {\n      if(!user) {\n        return res.status(404).end();\n      }\n      res.json(user.profile);\n    })\n    .catch(err => next(err));\n}\n\n/**\n * Deletes a user\n * restriction: 'admin'\n */\nexport function destroy(req, res) {\n  return User.findByIdAndRemove(req.params.id).exec()\n    .then(function() {\n      res.status(204).end();\n    })\n    .catch(handleError(res));\n}\n\n/**\n * Change a users password\n */\nexport function changePassword(req, res) {\n  var userId = req.user._id;\n  var oldPass = String(req.body.oldPassword);\n  var newPass = String(req.body.newPassword);\n\n  return User.findById(userId).exec()\n    .then(user => {\n      if(user.authenticate(oldPass)) {\n        user.password = newPass;\n        return user.save()\n          .then(() => {\n            res.status(204).end();\n          })\n          .catch(validationError(res));\n      } else {\n        return res.status(403).end();\n      }\n    });\n}\n\n/**\n * Get my info\n */\nexport function me(req, res, next) {\n  var userId = req.user._id;\n\n  return User.findOne({ _id: userId }, '-salt -password').exec()\n    .then(user => { // don't ever give out the password or salt\n      if(!user) {\n        return res.status(401).end();\n      }\n      res.json(user);\n    })\n    .catch(err => next(err));\n}\n\n/**\n * Authentication callback\n */\nexport function authCallback(req, res) {\n  res.redirect('/');\n}\n"
      ]
    },
    "mtime": 1507831001789
  },
  "{\"filename\":\"/root/server/auth/auth.service.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../config/environment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "jsonwebtoken",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "jwt"
              }
            ]
          },
          {
            "source": "express-jwt",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressJwt"
              }
            ]
          },
          {
            "source": "composable-middleware",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "compose"
              }
            ]
          },
          {
            "source": "../api/user/user.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "User"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "isAuthenticated",
            "hasRole",
            "roleRequired",
            "signToken",
            "id",
            "role",
            "setTokenCookie",
            "req",
            "res"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "isAuthenticated",
              "exported": "isAuthenticated"
            },
            {
              "kind": "local",
              "local": "hasRole",
              "exported": "hasRole"
            },
            {
              "kind": "local",
              "local": "roleRequired",
              "exported": "roleRequired"
            },
            {
              "kind": "local",
              "local": "signToken",
              "exported": "signToken"
            },
            {
              "kind": "local",
              "local": "id",
              "exported": "id"
            },
            {
              "kind": "local",
              "local": "role",
              "exported": "role"
            },
            {
              "kind": "local",
              "local": "setTokenCookie",
              "exported": "setTokenCookie"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/auth.service.js",
      "filenameRelative": "/root/server/auth/auth.service.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "auth.service.js",
      "sourceFileName": "auth.service.js",
      "sourceRoot": "/root/server/auth",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "auth.service"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuthenticated = isAuthenticated;\nexports.hasRole = hasRole;\nexports.signToken = signToken;\nexports.setTokenCookie = setTokenCookie;\n\nvar _environment = require('../config/environment');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nvar _jsonwebtoken = require('jsonwebtoken');\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nvar _expressJwt = require('express-jwt');\n\nvar _expressJwt2 = _interopRequireDefault(_expressJwt);\n\nvar _composableMiddleware = require('composable-middleware');\n\nvar _composableMiddleware2 = _interopRequireDefault(_composableMiddleware);\n\nvar _user = require('../api/user/user.model');\n\nvar _user2 = _interopRequireDefault(_user);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar validateJwt = (0, _expressJwt2.default)({\n  secret: _environment2.default.secrets.session\n});\n\n/**\n * Attaches the user object to the request if authenticated\n * Otherwise returns 403\n */\nfunction isAuthenticated() {\n  return (0, _composableMiddleware2.default)()\n  // Validate jwt\n  .use(function (req, res, next) {\n    // allow access_token to be passed through query parameter as well\n    if (req.query && req.query.hasOwnProperty('access_token')) {\n      req.headers.authorization = 'Bearer ' + req.query.access_token;\n    }\n    // IE11 forgets to set Authorization header sometimes. Pull from cookie instead.\n    if (req.query && typeof req.headers.authorization === 'undefined') {\n      req.headers.authorization = 'Bearer ' + req.cookies.token;\n    }\n    validateJwt(req, res, next);\n  })\n  // Attach user to request\n  .use(function (req, res, next) {\n    _user2.default.findById(req.user._id).exec().then(function (user) {\n      if (!user) {\n        return res.status(401).end();\n      }\n      req.user = user;\n      next();\n    }).catch(function (err) {\n      return next(err);\n    });\n  });\n}\n\n/**\n * Checks if the user role meets the minimum requirements of the route\n */\nfunction hasRole(roleRequired) {\n  if (!roleRequired) {\n    throw new Error('Required role needs to be set');\n  }\n\n  return (0, _composableMiddleware2.default)().use(isAuthenticated()).use(function meetsRequirements(req, res, next) {\n    if (_environment2.default.userRoles.indexOf(req.user.role) >= _environment2.default.userRoles.indexOf(roleRequired)) {\n      return next();\n    } else {\n      return res.status(403).send('Forbidden');\n    }\n  });\n}\n\n/**\n * Returns a jwt token signed by the app secret\n */\nfunction signToken(id, role) {\n  return _jsonwebtoken2.default.sign({ _id: id, role: role }, _environment2.default.secrets.session, {\n    expiresIn: 60 * 60 * 5\n  });\n}\n\n/**\n * Set token cookie directly for oAuth strategies\n */\nfunction setTokenCookie(req, res) {\n  if (!req.user) {\n    return res.status(404).send('It looks like you aren\\'t logged in, please try again.');\n  }\n  var token = signToken(req.user._id, req.user.role);\n  res.cookie('token', token);\n  res.redirect('/');\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguc2VydmljZS5qcyJdLCJuYW1lcyI6WyJpc0F1dGhlbnRpY2F0ZWQiLCJoYXNSb2xlIiwic2lnblRva2VuIiwic2V0VG9rZW5Db29raWUiLCJ2YWxpZGF0ZUp3dCIsInNlY3JldCIsInNlY3JldHMiLCJzZXNzaW9uIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsInF1ZXJ5IiwiaGFzT3duUHJvcGVydHkiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImFjY2Vzc190b2tlbiIsImNvb2tpZXMiLCJ0b2tlbiIsImZpbmRCeUlkIiwidXNlciIsIl9pZCIsImV4ZWMiLCJ0aGVuIiwic3RhdHVzIiwiZW5kIiwiY2F0Y2giLCJlcnIiLCJyb2xlUmVxdWlyZWQiLCJFcnJvciIsIm1lZXRzUmVxdWlyZW1lbnRzIiwidXNlclJvbGVzIiwiaW5kZXhPZiIsInJvbGUiLCJzZW5kIiwiaWQiLCJzaWduIiwiZXhwaXJlc0luIiwiY29va2llIiwicmVkaXJlY3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztRQWVnQkEsZSxHQUFBQSxlO1FBK0JBQyxPLEdBQUFBLE87UUFtQkFDLFMsR0FBQUEsUztRQVNBQyxjLEdBQUFBLGM7O0FBekVoQjs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFJQyxjQUFjLDBCQUFXO0FBQzNCQyxVQUFRLHNCQUFPQyxPQUFQLENBQWVDO0FBREksQ0FBWCxDQUFsQjs7QUFJQTs7OztBQUlPLFNBQVNQLGVBQVQsR0FBMkI7QUFDaEMsU0FBTztBQUNMO0FBREssR0FFSlEsR0FGSSxDQUVBLFVBQVNDLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDNUI7QUFDQSxRQUFHRixJQUFJRyxLQUFKLElBQWFILElBQUlHLEtBQUosQ0FBVUMsY0FBVixDQUF5QixjQUF6QixDQUFoQixFQUEwRDtBQUN4REosVUFBSUssT0FBSixDQUFZQyxhQUFaLGVBQXNDTixJQUFJRyxLQUFKLENBQVVJLFlBQWhEO0FBQ0Q7QUFDRjtBQUNDLFFBQUdQLElBQUlHLEtBQUosSUFBYSxPQUFPSCxJQUFJSyxPQUFKLENBQVlDLGFBQW5CLEtBQXFDLFdBQXJELEVBQWtFO0FBQ2hFTixVQUFJSyxPQUFKLENBQVlDLGFBQVosZUFBc0NOLElBQUlRLE9BQUosQ0FBWUMsS0FBbEQ7QUFDRDtBQUNEZCxnQkFBWUssR0FBWixFQUFpQkMsR0FBakIsRUFBc0JDLElBQXRCO0FBQ0QsR0FaSTtBQWFMO0FBYkssR0FjSkgsR0FkSSxDQWNBLFVBQVNDLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDNUIsbUJBQUtRLFFBQUwsQ0FBY1YsSUFBSVcsSUFBSixDQUFTQyxHQUF2QixFQUE0QkMsSUFBNUIsR0FDR0MsSUFESCxDQUNRLGdCQUFRO0FBQ1osVUFBRyxDQUFDSCxJQUFKLEVBQVU7QUFDUixlQUFPVixJQUFJYyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsR0FBaEIsRUFBUDtBQUNEO0FBQ0RoQixVQUFJVyxJQUFKLEdBQVdBLElBQVg7QUFDQVQ7QUFDRCxLQVBILEVBUUdlLEtBUkgsQ0FRUztBQUFBLGFBQU9mLEtBQUtnQixHQUFMLENBQVA7QUFBQSxLQVJUO0FBU0QsR0F4QkksQ0FBUDtBQXlCRDs7QUFFRDs7O0FBR08sU0FBUzFCLE9BQVQsQ0FBaUIyQixZQUFqQixFQUErQjtBQUNwQyxNQUFHLENBQUNBLFlBQUosRUFBa0I7QUFDaEIsVUFBTSxJQUFJQyxLQUFKLENBQVUsK0JBQVYsQ0FBTjtBQUNEOztBQUVELFNBQU8sc0NBQ0pyQixHQURJLENBQ0FSLGlCQURBLEVBRUpRLEdBRkksQ0FFQSxTQUFTc0IsaUJBQVQsQ0FBMkJyQixHQUEzQixFQUFnQ0MsR0FBaEMsRUFBcUNDLElBQXJDLEVBQTJDO0FBQzlDLFFBQUcsc0JBQU9vQixTQUFQLENBQWlCQyxPQUFqQixDQUF5QnZCLElBQUlXLElBQUosQ0FBU2EsSUFBbEMsS0FBMkMsc0JBQU9GLFNBQVAsQ0FBaUJDLE9BQWpCLENBQXlCSixZQUF6QixDQUE5QyxFQUFzRjtBQUNwRixhQUFPakIsTUFBUDtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU9ELElBQUljLE1BQUosQ0FBVyxHQUFYLEVBQWdCVSxJQUFoQixDQUFxQixXQUFyQixDQUFQO0FBQ0Q7QUFDRixHQVJJLENBQVA7QUFTRDs7QUFFRDs7O0FBR08sU0FBU2hDLFNBQVQsQ0FBbUJpQyxFQUFuQixFQUF1QkYsSUFBdkIsRUFBNkI7QUFDbEMsU0FBTyx1QkFBSUcsSUFBSixDQUFTLEVBQUVmLEtBQUtjLEVBQVAsRUFBV0YsVUFBWCxFQUFULEVBQTRCLHNCQUFPM0IsT0FBUCxDQUFlQyxPQUEzQyxFQUFvRDtBQUN6RDhCLGVBQVcsS0FBSyxFQUFMLEdBQVU7QUFEb0MsR0FBcEQsQ0FBUDtBQUdEOztBQUVEOzs7QUFHTyxTQUFTbEMsY0FBVCxDQUF3Qk0sR0FBeEIsRUFBNkJDLEdBQTdCLEVBQWtDO0FBQ3ZDLE1BQUcsQ0FBQ0QsSUFBSVcsSUFBUixFQUFjO0FBQ1osV0FBT1YsSUFBSWMsTUFBSixDQUFXLEdBQVgsRUFBZ0JVLElBQWhCLENBQXFCLHdEQUFyQixDQUFQO0FBQ0Q7QUFDRCxNQUFJaEIsUUFBUWhCLFVBQVVPLElBQUlXLElBQUosQ0FBU0MsR0FBbkIsRUFBd0JaLElBQUlXLElBQUosQ0FBU2EsSUFBakMsQ0FBWjtBQUNBdkIsTUFBSTRCLE1BQUosQ0FBVyxPQUFYLEVBQW9CcEIsS0FBcEI7QUFDQVIsTUFBSTZCLFFBQUosQ0FBYSxHQUFiO0FBQ0QiLCJmaWxlIjoiYXV0aC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hdXRoIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvZW52aXJvbm1lbnQnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGV4cHJlc3NKd3QgZnJvbSAnZXhwcmVzcy1qd3QnO1xuaW1wb3J0IGNvbXBvc2UgZnJvbSAnY29tcG9zYWJsZS1taWRkbGV3YXJlJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL2FwaS91c2VyL3VzZXIubW9kZWwnO1xuXG52YXIgdmFsaWRhdGVKd3QgPSBleHByZXNzSnd0KHtcbiAgc2VjcmV0OiBjb25maWcuc2VjcmV0cy5zZXNzaW9uXG59KTtcblxuLyoqXG4gKiBBdHRhY2hlcyB0aGUgdXNlciBvYmplY3QgdG8gdGhlIHJlcXVlc3QgaWYgYXV0aGVudGljYXRlZFxuICogT3RoZXJ3aXNlIHJldHVybnMgNDAzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gIHJldHVybiBjb21wb3NlKClcbiAgICAvLyBWYWxpZGF0ZSBqd3RcbiAgICAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAvLyBhbGxvdyBhY2Nlc3NfdG9rZW4gdG8gYmUgcGFzc2VkIHRocm91Z2ggcXVlcnkgcGFyYW1ldGVyIGFzIHdlbGxcbiAgICAgIGlmKHJlcS5xdWVyeSAmJiByZXEucXVlcnkuaGFzT3duUHJvcGVydHkoJ2FjY2Vzc190b2tlbicpKSB7XG4gICAgICAgIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7cmVxLnF1ZXJ5LmFjY2Vzc190b2tlbn1gO1xuICAgICAgfVxuICAgICAvLyBJRTExIGZvcmdldHMgdG8gc2V0IEF1dGhvcml6YXRpb24gaGVhZGVyIHNvbWV0aW1lcy4gUHVsbCBmcm9tIGNvb2tpZSBpbnN0ZWFkLlxuICAgICAgaWYocmVxLnF1ZXJ5ICYmIHR5cGVvZiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID0gYEJlYXJlciAke3JlcS5jb29raWVzLnRva2VufWA7XG4gICAgICB9XG4gICAgICB2YWxpZGF0ZUp3dChyZXEsIHJlcywgbmV4dCk7XG4gICAgfSlcbiAgICAvLyBBdHRhY2ggdXNlciB0byByZXF1ZXN0XG4gICAgLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICAgICAgVXNlci5maW5kQnlJZChyZXEudXNlci5faWQpLmV4ZWMoKVxuICAgICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgICBpZighdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5lbmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBuZXh0KGVycikpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgdXNlciByb2xlIG1lZXRzIHRoZSBtaW5pbXVtIHJlcXVpcmVtZW50cyBvZiB0aGUgcm91dGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1JvbGUocm9sZVJlcXVpcmVkKSB7XG4gIGlmKCFyb2xlUmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHJvbGUgbmVlZHMgdG8gYmUgc2V0Jyk7XG4gIH1cblxuICByZXR1cm4gY29tcG9zZSgpXG4gICAgLnVzZShpc0F1dGhlbnRpY2F0ZWQoKSlcbiAgICAudXNlKGZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICBpZihjb25maWcudXNlclJvbGVzLmluZGV4T2YocmVxLnVzZXIucm9sZSkgPj0gY29uZmlnLnVzZXJSb2xlcy5pbmRleE9mKHJvbGVSZXF1aXJlZCkpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCgnRm9yYmlkZGVuJyk7XG4gICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGp3dCB0b2tlbiBzaWduZWQgYnkgdGhlIGFwcCBzZWNyZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ25Ub2tlbihpZCwgcm9sZSkge1xuICByZXR1cm4gand0LnNpZ24oeyBfaWQ6IGlkLCByb2xlIH0sIGNvbmZpZy5zZWNyZXRzLnNlc3Npb24sIHtcbiAgICBleHBpcmVzSW46IDYwICogNjAgKiA1XG4gIH0pO1xufVxuXG4vKipcbiAqIFNldCB0b2tlbiBjb29raWUgZGlyZWN0bHkgZm9yIG9BdXRoIHN0cmF0ZWdpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRva2VuQ29va2llKHJlcSwgcmVzKSB7XG4gIGlmKCFyZXEudXNlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnSXQgbG9va3MgbGlrZSB5b3UgYXJlblxcJ3QgbG9nZ2VkIGluLCBwbGVhc2UgdHJ5IGFnYWluLicpO1xuICB9XG4gIHZhciB0b2tlbiA9IHNpZ25Ub2tlbihyZXEudXNlci5faWQsIHJlcS51c2VyLnJvbGUpO1xuICByZXMuY29va2llKCd0b2tlbicsIHRva2VuKTtcbiAgcmVzLnJlZGlyZWN0KCcvJyk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "auth.service.js"
      ],
      "names": [
        "isAuthenticated",
        "hasRole",
        "signToken",
        "setTokenCookie",
        "validateJwt",
        "secret",
        "secrets",
        "session",
        "use",
        "req",
        "res",
        "next",
        "query",
        "hasOwnProperty",
        "headers",
        "authorization",
        "access_token",
        "cookies",
        "token",
        "findById",
        "user",
        "_id",
        "exec",
        "then",
        "status",
        "end",
        "catch",
        "err",
        "roleRequired",
        "Error",
        "meetsRequirements",
        "userRoles",
        "indexOf",
        "role",
        "send",
        "id",
        "sign",
        "expiresIn",
        "cookie",
        "redirect"
      ],
      "mappings": "AAAA;;;;;QAegBA,e,GAAAA,e;QA+BAC,O,GAAAA,O;QAmBAC,S,GAAAA,S;QASAC,c,GAAAA,c;;AAzEhB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIC,cAAc,0BAAW;AAC3BC,UAAQ,sBAAOC,OAAP,CAAeC;AADI,CAAX,CAAlB;;AAIA;;;;AAIO,SAASP,eAAT,GAA2B;AAChC,SAAO;AACL;AADK,GAEJQ,GAFI,CAEA,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC5B;AACA,QAAGF,IAAIG,KAAJ,IAAaH,IAAIG,KAAJ,CAAUC,cAAV,CAAyB,cAAzB,CAAhB,EAA0D;AACxDJ,UAAIK,OAAJ,CAAYC,aAAZ,eAAsCN,IAAIG,KAAJ,CAAUI,YAAhD;AACD;AACF;AACC,QAAGP,IAAIG,KAAJ,IAAa,OAAOH,IAAIK,OAAJ,CAAYC,aAAnB,KAAqC,WAArD,EAAkE;AAChEN,UAAIK,OAAJ,CAAYC,aAAZ,eAAsCN,IAAIQ,OAAJ,CAAYC,KAAlD;AACD;AACDd,gBAAYK,GAAZ,EAAiBC,GAAjB,EAAsBC,IAAtB;AACD,GAZI;AAaL;AAbK,GAcJH,GAdI,CAcA,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC5B,mBAAKQ,QAAL,CAAcV,IAAIW,IAAJ,CAASC,GAAvB,EAA4BC,IAA5B,GACGC,IADH,CACQ,gBAAQ;AACZ,UAAG,CAACH,IAAJ,EAAU;AACR,eAAOV,IAAIc,MAAJ,CAAW,GAAX,EAAgBC,GAAhB,EAAP;AACD;AACDhB,UAAIW,IAAJ,GAAWA,IAAX;AACAT;AACD,KAPH,EAQGe,KARH,CAQS;AAAA,aAAOf,KAAKgB,GAAL,CAAP;AAAA,KART;AASD,GAxBI,CAAP;AAyBD;;AAED;;;AAGO,SAAS1B,OAAT,CAAiB2B,YAAjB,EAA+B;AACpC,MAAG,CAACA,YAAJ,EAAkB;AAChB,UAAM,IAAIC,KAAJ,CAAU,+BAAV,CAAN;AACD;;AAED,SAAO,sCACJrB,GADI,CACAR,iBADA,EAEJQ,GAFI,CAEA,SAASsB,iBAAT,CAA2BrB,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AAC9C,QAAG,sBAAOoB,SAAP,CAAiBC,OAAjB,CAAyBvB,IAAIW,IAAJ,CAASa,IAAlC,KAA2C,sBAAOF,SAAP,CAAiBC,OAAjB,CAAyBJ,YAAzB,CAA9C,EAAsF;AACpF,aAAOjB,MAAP;AACD,KAFD,MAEO;AACL,aAAOD,IAAIc,MAAJ,CAAW,GAAX,EAAgBU,IAAhB,CAAqB,WAArB,CAAP;AACD;AACF,GARI,CAAP;AASD;;AAED;;;AAGO,SAAShC,SAAT,CAAmBiC,EAAnB,EAAuBF,IAAvB,EAA6B;AAClC,SAAO,uBAAIG,IAAJ,CAAS,EAAEf,KAAKc,EAAP,EAAWF,UAAX,EAAT,EAA4B,sBAAO3B,OAAP,CAAeC,OAA3C,EAAoD;AACzD8B,eAAW,KAAK,EAAL,GAAU;AADoC,GAApD,CAAP;AAGD;;AAED;;;AAGO,SAASlC,cAAT,CAAwBM,GAAxB,EAA6BC,GAA7B,EAAkC;AACvC,MAAG,CAACD,IAAIW,IAAR,EAAc;AACZ,WAAOV,IAAIc,MAAJ,CAAW,GAAX,EAAgBU,IAAhB,CAAqB,wDAArB,CAAP;AACD;AACD,MAAIhB,QAAQhB,UAAUO,IAAIW,IAAJ,CAASC,GAAnB,EAAwBZ,IAAIW,IAAJ,CAASa,IAAjC,CAAZ;AACAvB,MAAI4B,MAAJ,CAAW,OAAX,EAAoBpB,KAApB;AACAR,MAAI6B,QAAJ,CAAa,GAAb;AACD",
      "file": "auth.service.js",
      "sourceRoot": "/root/server/auth",
      "sourcesContent": [
        "'use strict';\nimport config from '../config/environment';\nimport jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\nimport compose from 'composable-middleware';\nimport User from '../api/user/user.model';\n\nvar validateJwt = expressJwt({\n  secret: config.secrets.session\n});\n\n/**\n * Attaches the user object to the request if authenticated\n * Otherwise returns 403\n */\nexport function isAuthenticated() {\n  return compose()\n    // Validate jwt\n    .use(function(req, res, next) {\n      // allow access_token to be passed through query parameter as well\n      if(req.query && req.query.hasOwnProperty('access_token')) {\n        req.headers.authorization = `Bearer ${req.query.access_token}`;\n      }\n     // IE11 forgets to set Authorization header sometimes. Pull from cookie instead.\n      if(req.query && typeof req.headers.authorization === 'undefined') {\n        req.headers.authorization = `Bearer ${req.cookies.token}`;\n      }\n      validateJwt(req, res, next);\n    })\n    // Attach user to request\n    .use(function(req, res, next) {\n      User.findById(req.user._id).exec()\n        .then(user => {\n          if(!user) {\n            return res.status(401).end();\n          }\n          req.user = user;\n          next();\n        })\n        .catch(err => next(err));\n    });\n}\n\n/**\n * Checks if the user role meets the minimum requirements of the route\n */\nexport function hasRole(roleRequired) {\n  if(!roleRequired) {\n    throw new Error('Required role needs to be set');\n  }\n\n  return compose()\n    .use(isAuthenticated())\n    .use(function meetsRequirements(req, res, next) {\n      if(config.userRoles.indexOf(req.user.role) >= config.userRoles.indexOf(roleRequired)) {\n        return next();\n      } else {\n        return res.status(403).send('Forbidden');\n      }\n    });\n}\n\n/**\n * Returns a jwt token signed by the app secret\n */\nexport function signToken(id, role) {\n  return jwt.sign({ _id: id, role }, config.secrets.session, {\n    expiresIn: 60 * 60 * 5\n  });\n}\n\n/**\n * Set token cookie directly for oAuth strategies\n */\nexport function setTokenCookie(req, res) {\n  if(!req.user) {\n    return res.status(404).send('It looks like you aren\\'t logged in, please try again.');\n  }\n  var token = signToken(req.user._id, req.user.role);\n  res.cookie('token', token);\n  res.redirect('/');\n}\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "../config/environment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "../api/user/user.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "User"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/index.js",
      "filenameRelative": "/root/server/auth/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/auth",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _environment = require('../config/environment');\n\nvar _environment2 = _interopRequireDefault(_environment);\n\nvar _user = require('../api/user/user.model');\n\nvar _user2 = _interopRequireDefault(_user);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Passport Configuration\nrequire('./local/passport').setup(_user2.default, _environment2.default);\nrequire('./facebook/passport').setup(_user2.default, _environment2.default);\nrequire('./google/passport').setup(_user2.default, _environment2.default);\nrequire('./twitter/passport').setup(_user2.default, _environment2.default);\n\nvar router = _express2.default.Router();\n\nrouter.use('/local', require('./local').default);\nrouter.use('/facebook', require('./facebook').default);\nrouter.use('/twitter', require('./twitter').default);\nrouter.use('/google', require('./google').default);\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJzZXR1cCIsInJvdXRlciIsIlJvdXRlciIsInVzZSIsImRlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0FBLFFBQVEsa0JBQVIsRUFBNEJDLEtBQTVCO0FBQ0FELFFBQVEscUJBQVIsRUFBK0JDLEtBQS9CO0FBQ0FELFFBQVEsbUJBQVIsRUFBNkJDLEtBQTdCO0FBQ0FELFFBQVEsb0JBQVIsRUFBOEJDLEtBQTlCOztBQUVBLElBQUlDLFNBQVMsa0JBQVFDLE1BQVIsRUFBYjs7QUFFQUQsT0FBT0UsR0FBUCxDQUFXLFFBQVgsRUFBcUJKLFFBQVEsU0FBUixFQUFtQkssT0FBeEM7QUFDQUgsT0FBT0UsR0FBUCxDQUFXLFdBQVgsRUFBd0JKLFFBQVEsWUFBUixFQUFzQkssT0FBOUM7QUFDQUgsT0FBT0UsR0FBUCxDQUFXLFVBQVgsRUFBdUJKLFFBQVEsV0FBUixFQUFxQkssT0FBNUM7QUFDQUgsT0FBT0UsR0FBUCxDQUFXLFNBQVgsRUFBc0JKLFFBQVEsVUFBUixFQUFvQkssT0FBMUM7O2tCQUVlSCxNIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hdXRoIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9lbnZpcm9ubWVudCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9hcGkvdXNlci91c2VyLm1vZGVsJztcblxuLy8gUGFzc3BvcnQgQ29uZmlndXJhdGlvblxucmVxdWlyZSgnLi9sb2NhbC9wYXNzcG9ydCcpLnNldHVwKFVzZXIsIGNvbmZpZyk7XG5yZXF1aXJlKCcuL2ZhY2Vib29rL3Bhc3Nwb3J0Jykuc2V0dXAoVXNlciwgY29uZmlnKTtcbnJlcXVpcmUoJy4vZ29vZ2xlL3Bhc3Nwb3J0Jykuc2V0dXAoVXNlciwgY29uZmlnKTtcbnJlcXVpcmUoJy4vdHdpdHRlci9wYXNzcG9ydCcpLnNldHVwKFVzZXIsIGNvbmZpZyk7XG5cbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIudXNlKCcvbG9jYWwnLCByZXF1aXJlKCcuL2xvY2FsJykuZGVmYXVsdCk7XG5yb3V0ZXIudXNlKCcvZmFjZWJvb2snLCByZXF1aXJlKCcuL2ZhY2Vib29rJykuZGVmYXVsdCk7XG5yb3V0ZXIudXNlKCcvdHdpdHRlcicsIHJlcXVpcmUoJy4vdHdpdHRlcicpLmRlZmF1bHQpO1xucm91dGVyLnVzZSgnL2dvb2dsZScsIHJlcXVpcmUoJy4vZ29vZ2xlJykuZGVmYXVsdCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "require",
        "setup",
        "router",
        "Router",
        "use",
        "default"
      ],
      "mappings": "AAAA;;;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACAA,QAAQ,kBAAR,EAA4BC,KAA5B;AACAD,QAAQ,qBAAR,EAA+BC,KAA/B;AACAD,QAAQ,mBAAR,EAA6BC,KAA7B;AACAD,QAAQ,oBAAR,EAA8BC,KAA9B;;AAEA,IAAIC,SAAS,kBAAQC,MAAR,EAAb;;AAEAD,OAAOE,GAAP,CAAW,QAAX,EAAqBJ,QAAQ,SAAR,EAAmBK,OAAxC;AACAH,OAAOE,GAAP,CAAW,WAAX,EAAwBJ,QAAQ,YAAR,EAAsBK,OAA9C;AACAH,OAAOE,GAAP,CAAW,UAAX,EAAuBJ,QAAQ,WAAR,EAAqBK,OAA5C;AACAH,OAAOE,GAAP,CAAW,SAAX,EAAsBJ,QAAQ,UAAR,EAAoBK,OAA1C;;kBAEeH,M",
      "file": "index.js",
      "sourceRoot": "/root/server/auth",
      "sourcesContent": [
        "'use strict';\nimport express from 'express';\nimport config from '../config/environment';\nimport User from '../api/user/user.model';\n\n// Passport Configuration\nrequire('./local/passport').setup(User, config);\nrequire('./facebook/passport').setup(User, config);\nrequire('./google/passport').setup(User, config);\nrequire('./twitter/passport').setup(User, config);\n\nvar router = express.Router();\n\nrouter.use('/local', require('./local').default);\nrouter.use('/facebook', require('./facebook').default);\nrouter.use('/twitter', require('./twitter').default);\nrouter.use('/google', require('./google').default);\n\nexport default router;\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/local/passport.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/local\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "passport-local",
            "imported": [
              "Strategy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Strategy",
                "local": "LocalStrategy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setup",
            "User"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setup",
              "exported": "setup"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/local/passport.js",
      "filenameRelative": "/root/server/auth/local/passport.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "passport.js",
      "sourceFileName": "passport.js",
      "sourceRoot": "/root/server/auth/local",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/local",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "passport"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setup = setup;\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _passportLocal = require('passport-local');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction localAuthenticate(User, email, password, done) {\n  User.findOne({\n    email: email.toLowerCase()\n  }).exec().then(function (user) {\n    if (!user) {\n      return done(null, false, {\n        message: 'This email is not registered.'\n      });\n    }\n    user.authenticate(password, function (authError, authenticated) {\n      if (authError) {\n        return done(authError);\n      }\n      if (!authenticated) {\n        return done(null, false, { message: 'This password is not correct.' });\n      } else {\n        return done(null, user);\n      }\n    });\n  }).catch(function (err) {\n    return done(err);\n  });\n}\n\nfunction setup(User /*, config*/) {\n  _passport2.default.use(new _passportLocal.Strategy({\n    usernameField: 'email',\n    passwordField: 'password' // this is the virtual field on the model\n  }, function (email, password, done) {\n    return localAuthenticate(User, email, password, done);\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInNldHVwIiwibG9jYWxBdXRoZW50aWNhdGUiLCJVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImRvbmUiLCJmaW5kT25lIiwidG9Mb3dlckNhc2UiLCJleGVjIiwidGhlbiIsInVzZXIiLCJtZXNzYWdlIiwiYXV0aGVudGljYXRlIiwiYXV0aEVycm9yIiwiYXV0aGVudGljYXRlZCIsImNhdGNoIiwiZXJyIiwidXNlIiwidXNlcm5hbWVGaWVsZCIsInBhc3N3b3JkRmllbGQiXSwibWFwcGluZ3MiOiI7Ozs7O1FBMkJnQkEsSyxHQUFBQSxLOztBQTNCaEI7Ozs7QUFDQTs7OztBQUVBLFNBQVNDLGlCQUFULENBQTJCQyxJQUEzQixFQUFpQ0MsS0FBakMsRUFBd0NDLFFBQXhDLEVBQWtEQyxJQUFsRCxFQUF3RDtBQUN0REgsT0FBS0ksT0FBTCxDQUFhO0FBQ1hILFdBQU9BLE1BQU1JLFdBQU47QUFESSxHQUFiLEVBRUdDLElBRkgsR0FHR0MsSUFISCxDQUdRLGdCQUFRO0FBQ1osUUFBRyxDQUFDQyxJQUFKLEVBQVU7QUFDUixhQUFPTCxLQUFLLElBQUwsRUFBVyxLQUFYLEVBQWtCO0FBQ3ZCTSxpQkFBUztBQURjLE9BQWxCLENBQVA7QUFHRDtBQUNERCxTQUFLRSxZQUFMLENBQWtCUixRQUFsQixFQUE0QixVQUFTUyxTQUFULEVBQW9CQyxhQUFwQixFQUFtQztBQUM3RCxVQUFHRCxTQUFILEVBQWM7QUFDWixlQUFPUixLQUFLUSxTQUFMLENBQVA7QUFDRDtBQUNELFVBQUcsQ0FBQ0MsYUFBSixFQUFtQjtBQUNqQixlQUFPVCxLQUFLLElBQUwsRUFBVyxLQUFYLEVBQWtCLEVBQUVNLFNBQVMsK0JBQVgsRUFBbEIsQ0FBUDtBQUNELE9BRkQsTUFFTztBQUNMLGVBQU9OLEtBQUssSUFBTCxFQUFXSyxJQUFYLENBQVA7QUFDRDtBQUNGLEtBVEQ7QUFVRCxHQW5CSCxFQW9CR0ssS0FwQkgsQ0FvQlM7QUFBQSxXQUFPVixLQUFLVyxHQUFMLENBQVA7QUFBQSxHQXBCVDtBQXFCRDs7QUFFTSxTQUFTaEIsS0FBVCxDQUFlRSxJQUFmLENBQW1CLFlBQW5CLEVBQWlDO0FBQ3RDLHFCQUFTZSxHQUFULENBQWEsNEJBQWtCO0FBQzdCQyxtQkFBZSxPQURjO0FBRTdCQyxtQkFBZSxVQUZjLENBRUg7QUFGRyxHQUFsQixFQUdWLFVBQVNoQixLQUFULEVBQWdCQyxRQUFoQixFQUEwQkMsSUFBMUIsRUFBZ0M7QUFDakMsV0FBT0osa0JBQWtCQyxJQUFsQixFQUF3QkMsS0FBeEIsRUFBK0JDLFFBQS9CLEVBQXlDQyxJQUF6QyxDQUFQO0FBQ0QsR0FMWSxDQUFiO0FBTUQiLCJmaWxlIjoicGFzc3BvcnQuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2F1dGgvbG9jYWwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHtTdHJhdGVneSBhcyBMb2NhbFN0cmF0ZWd5fSBmcm9tICdwYXNzcG9ydC1sb2NhbCc7XG5cbmZ1bmN0aW9uIGxvY2FsQXV0aGVudGljYXRlKFVzZXIsIGVtYWlsLCBwYXNzd29yZCwgZG9uZSkge1xuICBVc2VyLmZpbmRPbmUoe1xuICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpXG4gIH0pLmV4ZWMoKVxuICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgaWYoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UsIHtcbiAgICAgICAgICBtZXNzYWdlOiAnVGhpcyBlbWFpbCBpcyBub3QgcmVnaXN0ZXJlZC4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdXNlci5hdXRoZW50aWNhdGUocGFzc3dvcmQsIGZ1bmN0aW9uKGF1dGhFcnJvciwgYXV0aGVudGljYXRlZCkge1xuICAgICAgICBpZihhdXRoRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZG9uZShhdXRoRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmKCFhdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UsIHsgbWVzc2FnZTogJ1RoaXMgcGFzc3dvcmQgaXMgbm90IGNvcnJlY3QuJyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZG9uZShudWxsLCB1c2VyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGRvbmUoZXJyKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cChVc2VyLyosIGNvbmZpZyovKSB7XG4gIHBhc3Nwb3J0LnVzZShuZXcgTG9jYWxTdHJhdGVneSh7XG4gICAgdXNlcm5hbWVGaWVsZDogJ2VtYWlsJyxcbiAgICBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnIC8vIHRoaXMgaXMgdGhlIHZpcnR1YWwgZmllbGQgb24gdGhlIG1vZGVsXG4gIH0sIGZ1bmN0aW9uKGVtYWlsLCBwYXNzd29yZCwgZG9uZSkge1xuICAgIHJldHVybiBsb2NhbEF1dGhlbnRpY2F0ZShVc2VyLCBlbWFpbCwgcGFzc3dvcmQsIGRvbmUpO1xuICB9KSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "setup",
        "localAuthenticate",
        "User",
        "email",
        "password",
        "done",
        "findOne",
        "toLowerCase",
        "exec",
        "then",
        "user",
        "message",
        "authenticate",
        "authError",
        "authenticated",
        "catch",
        "err",
        "use",
        "usernameField",
        "passwordField"
      ],
      "mappings": ";;;;;QA2BgBA,K,GAAAA,K;;AA3BhB;;;;AACA;;;;AAEA,SAASC,iBAAT,CAA2BC,IAA3B,EAAiCC,KAAjC,EAAwCC,QAAxC,EAAkDC,IAAlD,EAAwD;AACtDH,OAAKI,OAAL,CAAa;AACXH,WAAOA,MAAMI,WAAN;AADI,GAAb,EAEGC,IAFH,GAGGC,IAHH,CAGQ,gBAAQ;AACZ,QAAG,CAACC,IAAJ,EAAU;AACR,aAAOL,KAAK,IAAL,EAAW,KAAX,EAAkB;AACvBM,iBAAS;AADc,OAAlB,CAAP;AAGD;AACDD,SAAKE,YAAL,CAAkBR,QAAlB,EAA4B,UAASS,SAAT,EAAoBC,aAApB,EAAmC;AAC7D,UAAGD,SAAH,EAAc;AACZ,eAAOR,KAAKQ,SAAL,CAAP;AACD;AACD,UAAG,CAACC,aAAJ,EAAmB;AACjB,eAAOT,KAAK,IAAL,EAAW,KAAX,EAAkB,EAAEM,SAAS,+BAAX,EAAlB,CAAP;AACD,OAFD,MAEO;AACL,eAAON,KAAK,IAAL,EAAWK,IAAX,CAAP;AACD;AACF,KATD;AAUD,GAnBH,EAoBGK,KApBH,CAoBS;AAAA,WAAOV,KAAKW,GAAL,CAAP;AAAA,GApBT;AAqBD;;AAEM,SAAShB,KAAT,CAAeE,IAAf,CAAmB,YAAnB,EAAiC;AACtC,qBAASe,GAAT,CAAa,4BAAkB;AAC7BC,mBAAe,OADc;AAE7BC,mBAAe,UAFc,CAEH;AAFG,GAAlB,EAGV,UAAShB,KAAT,EAAgBC,QAAhB,EAA0BC,IAA1B,EAAgC;AACjC,WAAOJ,kBAAkBC,IAAlB,EAAwBC,KAAxB,EAA+BC,QAA/B,EAAyCC,IAAzC,CAAP;AACD,GALY,CAAb;AAMD",
      "file": "passport.js",
      "sourceRoot": "/root/server/auth/local",
      "sourcesContent": [
        "import passport from 'passport';\nimport {Strategy as LocalStrategy} from 'passport-local';\n\nfunction localAuthenticate(User, email, password, done) {\n  User.findOne({\n    email: email.toLowerCase()\n  }).exec()\n    .then(user => {\n      if(!user) {\n        return done(null, false, {\n          message: 'This email is not registered.'\n        });\n      }\n      user.authenticate(password, function(authError, authenticated) {\n        if(authError) {\n          return done(authError);\n        }\n        if(!authenticated) {\n          return done(null, false, { message: 'This password is not correct.' });\n        } else {\n          return done(null, user);\n        }\n      });\n    })\n    .catch(err => done(err));\n}\n\nexport function setup(User/*, config*/) {\n  passport.use(new LocalStrategy({\n    usernameField: 'email',\n    passwordField: 'password' // this is the virtual field on the model\n  }, function(email, password, done) {\n    return localAuthenticate(User, email, password, done);\n  }));\n}\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/auth/facebook/passport.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/facebook\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "passport-facebook",
            "imported": [
              "Strategy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Strategy",
                "local": "FacebookStrategy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setup",
            "User",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setup",
              "exported": "setup"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "config"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/facebook/passport.js",
      "filenameRelative": "/root/server/auth/facebook/passport.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "passport.js",
      "sourceFileName": "passport.js",
      "sourceRoot": "/root/server/auth/facebook",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/facebook",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "passport"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setup = setup;\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _passportFacebook = require('passport-facebook');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction setup(User, config) {\n  _passport2.default.use(new _passportFacebook.Strategy({\n    clientID: config.facebook.clientID,\n    clientSecret: config.facebook.clientSecret,\n    callbackURL: config.facebook.callbackURL,\n    profileFields: ['displayName', 'emails']\n  }, function (accessToken, refreshToken, profile, done) {\n    User.findOne({ 'facebook.id': profile.id }).exec().then(function (user) {\n      if (user) {\n        return done(null, user);\n      }\n\n      user = new User({\n        name: profile.displayName,\n        email: profile.emails[0].value,\n        role: 'user',\n        provider: 'facebook',\n        facebook: profile._json\n      });\n      user.save().then(function (savedUser) {\n        return done(null, savedUser);\n      }).catch(function (err) {\n        return done(err);\n      });\n    }).catch(function (err) {\n      return done(err);\n    });\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInNldHVwIiwiVXNlciIsImNvbmZpZyIsInVzZSIsImNsaWVudElEIiwiZmFjZWJvb2siLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFja1VSTCIsInByb2ZpbGVGaWVsZHMiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsInByb2ZpbGUiLCJkb25lIiwiZmluZE9uZSIsImlkIiwiZXhlYyIsInRoZW4iLCJ1c2VyIiwibmFtZSIsImRpc3BsYXlOYW1lIiwiZW1haWwiLCJlbWFpbHMiLCJ2YWx1ZSIsInJvbGUiLCJwcm92aWRlciIsIl9qc29uIiwic2F2ZSIsInNhdmVkVXNlciIsImNhdGNoIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7OztRQUdnQkEsSyxHQUFBQSxLOztBQUhoQjs7OztBQUNBOzs7O0FBRU8sU0FBU0EsS0FBVCxDQUFlQyxJQUFmLEVBQXFCQyxNQUFyQixFQUE2QjtBQUNsQyxxQkFBU0MsR0FBVCxDQUFhLCtCQUFxQjtBQUNoQ0MsY0FBVUYsT0FBT0csUUFBUCxDQUFnQkQsUUFETTtBQUVoQ0Usa0JBQWNKLE9BQU9HLFFBQVAsQ0FBZ0JDLFlBRkU7QUFHaENDLGlCQUFhTCxPQUFPRyxRQUFQLENBQWdCRSxXQUhHO0FBSWhDQyxtQkFBZSxDQUNiLGFBRGEsRUFFYixRQUZhO0FBSmlCLEdBQXJCLEVBU2IsVUFBU0MsV0FBVCxFQUFzQkMsWUFBdEIsRUFBb0NDLE9BQXBDLEVBQTZDQyxJQUE3QyxFQUFtRDtBQUNqRFgsU0FBS1ksT0FBTCxDQUFhLEVBQUMsZUFBZUYsUUFBUUcsRUFBeEIsRUFBYixFQUEwQ0MsSUFBMUMsR0FDR0MsSUFESCxDQUNRLGdCQUFRO0FBQ1osVUFBR0MsSUFBSCxFQUFTO0FBQ1AsZUFBT0wsS0FBSyxJQUFMLEVBQVdLLElBQVgsQ0FBUDtBQUNEOztBQUVEQSxhQUFPLElBQUloQixJQUFKLENBQVM7QUFDZGlCLGNBQU1QLFFBQVFRLFdBREE7QUFFZEMsZUFBT1QsUUFBUVUsTUFBUixDQUFlLENBQWYsRUFBa0JDLEtBRlg7QUFHZEMsY0FBTSxNQUhRO0FBSWRDLGtCQUFVLFVBSkk7QUFLZG5CLGtCQUFVTSxRQUFRYztBQUxKLE9BQVQsQ0FBUDtBQU9BUixXQUFLUyxJQUFMLEdBQ0dWLElBREgsQ0FDUTtBQUFBLGVBQWFKLEtBQUssSUFBTCxFQUFXZSxTQUFYLENBQWI7QUFBQSxPQURSLEVBRUdDLEtBRkgsQ0FFUztBQUFBLGVBQU9oQixLQUFLaUIsR0FBTCxDQUFQO0FBQUEsT0FGVDtBQUdELEtBaEJILEVBaUJHRCxLQWpCSCxDQWlCUztBQUFBLGFBQU9oQixLQUFLaUIsR0FBTCxDQUFQO0FBQUEsS0FqQlQ7QUFrQkQsR0E1QlksQ0FBYjtBQTZCRCIsImZpbGUiOiJwYXNzcG9ydC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXV0aC9mYWNlYm9vayIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5pbXBvcnQge1N0cmF0ZWd5IGFzIEZhY2Vib29rU3RyYXRlZ3l9IGZyb20gJ3Bhc3Nwb3J0LWZhY2Vib29rJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwKFVzZXIsIGNvbmZpZykge1xuICBwYXNzcG9ydC51c2UobmV3IEZhY2Vib29rU3RyYXRlZ3koe1xuICAgIGNsaWVudElEOiBjb25maWcuZmFjZWJvb2suY2xpZW50SUQsXG4gICAgY2xpZW50U2VjcmV0OiBjb25maWcuZmFjZWJvb2suY2xpZW50U2VjcmV0LFxuICAgIGNhbGxiYWNrVVJMOiBjb25maWcuZmFjZWJvb2suY2FsbGJhY2tVUkwsXG4gICAgcHJvZmlsZUZpZWxkczogW1xuICAgICAgJ2Rpc3BsYXlOYW1lJyxcbiAgICAgICdlbWFpbHMnXG4gICAgXVxuICB9LFxuICBmdW5jdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBwcm9maWxlLCBkb25lKSB7XG4gICAgVXNlci5maW5kT25lKHsnZmFjZWJvb2suaWQnOiBwcm9maWxlLmlkfSkuZXhlYygpXG4gICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgaWYodXNlcikge1xuICAgICAgICAgIHJldHVybiBkb25lKG51bGwsIHVzZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsc1swXS52YWx1ZSxcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgcHJvdmlkZXI6ICdmYWNlYm9vaycsXG4gICAgICAgICAgZmFjZWJvb2s6IHByb2ZpbGUuX2pzb25cbiAgICAgICAgfSk7XG4gICAgICAgIHVzZXIuc2F2ZSgpXG4gICAgICAgICAgLnRoZW4oc2F2ZWRVc2VyID0+IGRvbmUobnVsbCwgc2F2ZWRVc2VyKSlcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGRvbmUoZXJyKSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBkb25lKGVycikpO1xuICB9KSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "setup",
        "User",
        "config",
        "use",
        "clientID",
        "facebook",
        "clientSecret",
        "callbackURL",
        "profileFields",
        "accessToken",
        "refreshToken",
        "profile",
        "done",
        "findOne",
        "id",
        "exec",
        "then",
        "user",
        "name",
        "displayName",
        "email",
        "emails",
        "value",
        "role",
        "provider",
        "_json",
        "save",
        "savedUser",
        "catch",
        "err"
      ],
      "mappings": ";;;;;QAGgBA,K,GAAAA,K;;AAHhB;;;;AACA;;;;AAEO,SAASA,KAAT,CAAeC,IAAf,EAAqBC,MAArB,EAA6B;AAClC,qBAASC,GAAT,CAAa,+BAAqB;AAChCC,cAAUF,OAAOG,QAAP,CAAgBD,QADM;AAEhCE,kBAAcJ,OAAOG,QAAP,CAAgBC,YAFE;AAGhCC,iBAAaL,OAAOG,QAAP,CAAgBE,WAHG;AAIhCC,mBAAe,CACb,aADa,EAEb,QAFa;AAJiB,GAArB,EASb,UAASC,WAAT,EAAsBC,YAAtB,EAAoCC,OAApC,EAA6CC,IAA7C,EAAmD;AACjDX,SAAKY,OAAL,CAAa,EAAC,eAAeF,QAAQG,EAAxB,EAAb,EAA0CC,IAA1C,GACGC,IADH,CACQ,gBAAQ;AACZ,UAAGC,IAAH,EAAS;AACP,eAAOL,KAAK,IAAL,EAAWK,IAAX,CAAP;AACD;;AAEDA,aAAO,IAAIhB,IAAJ,CAAS;AACdiB,cAAMP,QAAQQ,WADA;AAEdC,eAAOT,QAAQU,MAAR,CAAe,CAAf,EAAkBC,KAFX;AAGdC,cAAM,MAHQ;AAIdC,kBAAU,UAJI;AAKdnB,kBAAUM,QAAQc;AALJ,OAAT,CAAP;AAOAR,WAAKS,IAAL,GACGV,IADH,CACQ;AAAA,eAAaJ,KAAK,IAAL,EAAWe,SAAX,CAAb;AAAA,OADR,EAEGC,KAFH,CAES;AAAA,eAAOhB,KAAKiB,GAAL,CAAP;AAAA,OAFT;AAGD,KAhBH,EAiBGD,KAjBH,CAiBS;AAAA,aAAOhB,KAAKiB,GAAL,CAAP;AAAA,KAjBT;AAkBD,GA5BY,CAAb;AA6BD",
      "file": "passport.js",
      "sourceRoot": "/root/server/auth/facebook",
      "sourcesContent": [
        "import passport from 'passport';\nimport {Strategy as FacebookStrategy} from 'passport-facebook';\n\nexport function setup(User, config) {\n  passport.use(new FacebookStrategy({\n    clientID: config.facebook.clientID,\n    clientSecret: config.facebook.clientSecret,\n    callbackURL: config.facebook.callbackURL,\n    profileFields: [\n      'displayName',\n      'emails'\n    ]\n  },\n  function(accessToken, refreshToken, profile, done) {\n    User.findOne({'facebook.id': profile.id}).exec()\n      .then(user => {\n        if(user) {\n          return done(null, user);\n        }\n\n        user = new User({\n          name: profile.displayName,\n          email: profile.emails[0].value,\n          role: 'user',\n          provider: 'facebook',\n          facebook: profile._json\n        });\n        user.save()\n          .then(savedUser => done(null, savedUser))\n          .catch(err => done(err));\n      })\n      .catch(err => done(err));\n  }));\n}\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/google/passport.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/google\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "passport-google-oauth20",
            "imported": [
              "Strategy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Strategy",
                "local": "GoogleStrategy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setup",
            "User",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setup",
              "exported": "setup"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "config"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/google/passport.js",
      "filenameRelative": "/root/server/auth/google/passport.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "passport.js",
      "sourceFileName": "passport.js",
      "sourceRoot": "/root/server/auth/google",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/google",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "passport"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setup = setup;\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _passportGoogleOauth = require('passport-google-oauth20');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction setup(User, config) {\n  _passport2.default.use(new _passportGoogleOauth.Strategy({\n    clientID: config.google.clientID,\n    clientSecret: config.google.clientSecret,\n    callbackURL: config.google.callbackURL\n  }, function (accessToken, refreshToken, profile, done) {\n    User.findOne({ 'google.id': profile.id }).exec().then(function (user) {\n      if (user) {\n        return done(null, user);\n      }\n\n      user = new User({\n        name: profile.displayName,\n        email: profile.emails[0].value,\n        role: 'user',\n        username: profile.emails[0].value.split('@')[0],\n        provider: 'google',\n        google: profile._json\n      });\n      user.save().then(function (savedUser) {\n        return done(null, savedUser);\n      }).catch(function (err) {\n        return done(err);\n      });\n    }).catch(function (err) {\n      return done(err);\n    });\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInNldHVwIiwiVXNlciIsImNvbmZpZyIsInVzZSIsImNsaWVudElEIiwiZ29vZ2xlIiwiY2xpZW50U2VjcmV0IiwiY2FsbGJhY2tVUkwiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsInByb2ZpbGUiLCJkb25lIiwiZmluZE9uZSIsImlkIiwiZXhlYyIsInRoZW4iLCJ1c2VyIiwibmFtZSIsImRpc3BsYXlOYW1lIiwiZW1haWwiLCJlbWFpbHMiLCJ2YWx1ZSIsInJvbGUiLCJ1c2VybmFtZSIsInNwbGl0IiwicHJvdmlkZXIiLCJfanNvbiIsInNhdmUiLCJzYXZlZFVzZXIiLCJjYXRjaCIsImVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFHZ0JBLEssR0FBQUEsSzs7QUFIaEI7Ozs7QUFDQTs7OztBQUVPLFNBQVNBLEtBQVQsQ0FBZUMsSUFBZixFQUFxQkMsTUFBckIsRUFBNkI7QUFDbEMscUJBQVNDLEdBQVQsQ0FBYSxrQ0FBbUI7QUFDOUJDLGNBQVVGLE9BQU9HLE1BQVAsQ0FBY0QsUUFETTtBQUU5QkUsa0JBQWNKLE9BQU9HLE1BQVAsQ0FBY0MsWUFGRTtBQUc5QkMsaUJBQWFMLE9BQU9HLE1BQVAsQ0FBY0U7QUFIRyxHQUFuQixFQUtiLFVBQVNDLFdBQVQsRUFBc0JDLFlBQXRCLEVBQW9DQyxPQUFwQyxFQUE2Q0MsSUFBN0MsRUFBbUQ7QUFDakRWLFNBQUtXLE9BQUwsQ0FBYSxFQUFDLGFBQWFGLFFBQVFHLEVBQXRCLEVBQWIsRUFBd0NDLElBQXhDLEdBQ0dDLElBREgsQ0FDUSxnQkFBUTtBQUNaLFVBQUdDLElBQUgsRUFBUztBQUNQLGVBQU9MLEtBQUssSUFBTCxFQUFXSyxJQUFYLENBQVA7QUFDRDs7QUFFREEsYUFBTyxJQUFJZixJQUFKLENBQVM7QUFDZGdCLGNBQU1QLFFBQVFRLFdBREE7QUFFZEMsZUFBT1QsUUFBUVUsTUFBUixDQUFlLENBQWYsRUFBa0JDLEtBRlg7QUFHZEMsY0FBTSxNQUhRO0FBSWRDLGtCQUFVYixRQUFRVSxNQUFSLENBQWUsQ0FBZixFQUFrQkMsS0FBbEIsQ0FBd0JHLEtBQXhCLENBQThCLEdBQTlCLEVBQW1DLENBQW5DLENBSkk7QUFLZEMsa0JBQVUsUUFMSTtBQU1kcEIsZ0JBQVFLLFFBQVFnQjtBQU5GLE9BQVQsQ0FBUDtBQVFBVixXQUFLVyxJQUFMLEdBQ0daLElBREgsQ0FDUTtBQUFBLGVBQWFKLEtBQUssSUFBTCxFQUFXaUIsU0FBWCxDQUFiO0FBQUEsT0FEUixFQUVHQyxLQUZILENBRVM7QUFBQSxlQUFPbEIsS0FBS21CLEdBQUwsQ0FBUDtBQUFBLE9BRlQ7QUFHRCxLQWpCSCxFQWtCR0QsS0FsQkgsQ0FrQlM7QUFBQSxhQUFPbEIsS0FBS21CLEdBQUwsQ0FBUDtBQUFBLEtBbEJUO0FBbUJELEdBekJZLENBQWI7QUEwQkQiLCJmaWxlIjoicGFzc3BvcnQuanMiLCJzb3VyY2VSb290IjoiL3Jvb3Qvc2VydmVyL2F1dGgvZ29vZ2xlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCB7U3RyYXRlZ3kgYXMgR29vZ2xlU3RyYXRlZ3l9IGZyb20gJ3Bhc3Nwb3J0LWdvb2dsZS1vYXV0aDIwJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwKFVzZXIsIGNvbmZpZykge1xuICBwYXNzcG9ydC51c2UobmV3IEdvb2dsZVN0cmF0ZWd5KHtcbiAgICBjbGllbnRJRDogY29uZmlnLmdvb2dsZS5jbGllbnRJRCxcbiAgICBjbGllbnRTZWNyZXQ6IGNvbmZpZy5nb29nbGUuY2xpZW50U2VjcmV0LFxuICAgIGNhbGxiYWNrVVJMOiBjb25maWcuZ29vZ2xlLmNhbGxiYWNrVVJMXG4gIH0sXG4gIGZ1bmN0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIHByb2ZpbGUsIGRvbmUpIHtcbiAgICBVc2VyLmZpbmRPbmUoeydnb29nbGUuaWQnOiBwcm9maWxlLmlkfSkuZXhlYygpXG4gICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgaWYodXNlcikge1xuICAgICAgICAgIHJldHVybiBkb25lKG51bGwsIHVzZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsc1swXS52YWx1ZSxcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgdXNlcm5hbWU6IHByb2ZpbGUuZW1haWxzWzBdLnZhbHVlLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgcHJvdmlkZXI6ICdnb29nbGUnLFxuICAgICAgICAgIGdvb2dsZTogcHJvZmlsZS5fanNvblxuICAgICAgICB9KTtcbiAgICAgICAgdXNlci5zYXZlKClcbiAgICAgICAgICAudGhlbihzYXZlZFVzZXIgPT4gZG9uZShudWxsLCBzYXZlZFVzZXIpKVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gZG9uZShlcnIpKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGRvbmUoZXJyKSk7XG4gIH0pKTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "setup",
        "User",
        "config",
        "use",
        "clientID",
        "google",
        "clientSecret",
        "callbackURL",
        "accessToken",
        "refreshToken",
        "profile",
        "done",
        "findOne",
        "id",
        "exec",
        "then",
        "user",
        "name",
        "displayName",
        "email",
        "emails",
        "value",
        "role",
        "username",
        "split",
        "provider",
        "_json",
        "save",
        "savedUser",
        "catch",
        "err"
      ],
      "mappings": ";;;;;QAGgBA,K,GAAAA,K;;AAHhB;;;;AACA;;;;AAEO,SAASA,KAAT,CAAeC,IAAf,EAAqBC,MAArB,EAA6B;AAClC,qBAASC,GAAT,CAAa,kCAAmB;AAC9BC,cAAUF,OAAOG,MAAP,CAAcD,QADM;AAE9BE,kBAAcJ,OAAOG,MAAP,CAAcC,YAFE;AAG9BC,iBAAaL,OAAOG,MAAP,CAAcE;AAHG,GAAnB,EAKb,UAASC,WAAT,EAAsBC,YAAtB,EAAoCC,OAApC,EAA6CC,IAA7C,EAAmD;AACjDV,SAAKW,OAAL,CAAa,EAAC,aAAaF,QAAQG,EAAtB,EAAb,EAAwCC,IAAxC,GACGC,IADH,CACQ,gBAAQ;AACZ,UAAGC,IAAH,EAAS;AACP,eAAOL,KAAK,IAAL,EAAWK,IAAX,CAAP;AACD;;AAEDA,aAAO,IAAIf,IAAJ,CAAS;AACdgB,cAAMP,QAAQQ,WADA;AAEdC,eAAOT,QAAQU,MAAR,CAAe,CAAf,EAAkBC,KAFX;AAGdC,cAAM,MAHQ;AAIdC,kBAAUb,QAAQU,MAAR,CAAe,CAAf,EAAkBC,KAAlB,CAAwBG,KAAxB,CAA8B,GAA9B,EAAmC,CAAnC,CAJI;AAKdC,kBAAU,QALI;AAMdpB,gBAAQK,QAAQgB;AANF,OAAT,CAAP;AAQAV,WAAKW,IAAL,GACGZ,IADH,CACQ;AAAA,eAAaJ,KAAK,IAAL,EAAWiB,SAAX,CAAb;AAAA,OADR,EAEGC,KAFH,CAES;AAAA,eAAOlB,KAAKmB,GAAL,CAAP;AAAA,OAFT;AAGD,KAjBH,EAkBGD,KAlBH,CAkBS;AAAA,aAAOlB,KAAKmB,GAAL,CAAP;AAAA,KAlBT;AAmBD,GAzBY,CAAb;AA0BD",
      "file": "passport.js",
      "sourceRoot": "/root/server/auth/google",
      "sourcesContent": [
        "import passport from 'passport';\nimport {Strategy as GoogleStrategy} from 'passport-google-oauth20';\n\nexport function setup(User, config) {\n  passport.use(new GoogleStrategy({\n    clientID: config.google.clientID,\n    clientSecret: config.google.clientSecret,\n    callbackURL: config.google.callbackURL\n  },\n  function(accessToken, refreshToken, profile, done) {\n    User.findOne({'google.id': profile.id}).exec()\n      .then(user => {\n        if(user) {\n          return done(null, user);\n        }\n\n        user = new User({\n          name: profile.displayName,\n          email: profile.emails[0].value,\n          role: 'user',\n          username: profile.emails[0].value.split('@')[0],\n          provider: 'google',\n          google: profile._json\n        });\n        user.save()\n          .then(savedUser => done(null, savedUser))\n          .catch(err => done(err));\n      })\n      .catch(err => done(err));\n  }));\n}\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/twitter/passport.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/twitter\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "passport-twitter",
            "imported": [
              "Strategy"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Strategy",
                "local": "TwitterStrategy"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setup",
            "User",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setup",
              "exported": "setup"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "config"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/twitter/passport.js",
      "filenameRelative": "/root/server/auth/twitter/passport.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "passport.js",
      "sourceFileName": "passport.js",
      "sourceRoot": "/root/server/auth/twitter",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/twitter",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "passport"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setup = setup;\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _passportTwitter = require('passport-twitter');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction setup(User, config) {\n  _passport2.default.use(new _passportTwitter.Strategy({\n    consumerKey: config.twitter.clientID,\n    consumerSecret: config.twitter.clientSecret,\n    callbackURL: config.twitter.callbackURL\n  }, function (token, tokenSecret, profile, done) {\n    profile._json.id = '' + profile._json.id;\n    profile.id = '' + profile.id;\n\n    User.findOne({ 'twitter.id': profile.id }).exec().then(function (user) {\n      if (user) {\n        return done(null, user);\n      }\n\n      user = new User({\n        name: profile.displayName,\n        username: profile.username,\n        role: 'user',\n        provider: 'twitter',\n        twitter: profile._json\n      });\n      user.save().then(function (savedUser) {\n        return done(null, savedUser);\n      }).catch(function (err) {\n        return done(err);\n      });\n    }).catch(function (err) {\n      return done(err);\n    });\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3Nwb3J0LmpzIl0sIm5hbWVzIjpbInNldHVwIiwiVXNlciIsImNvbmZpZyIsInVzZSIsImNvbnN1bWVyS2V5IiwidHdpdHRlciIsImNsaWVudElEIiwiY29uc3VtZXJTZWNyZXQiLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFja1VSTCIsInRva2VuIiwidG9rZW5TZWNyZXQiLCJwcm9maWxlIiwiZG9uZSIsIl9qc29uIiwiaWQiLCJmaW5kT25lIiwiZXhlYyIsInRoZW4iLCJ1c2VyIiwibmFtZSIsImRpc3BsYXlOYW1lIiwidXNlcm5hbWUiLCJyb2xlIiwicHJvdmlkZXIiLCJzYXZlIiwic2F2ZWRVc2VyIiwiY2F0Y2giLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7O1FBR2dCQSxLLEdBQUFBLEs7O0FBSGhCOzs7O0FBQ0E7Ozs7QUFFTyxTQUFTQSxLQUFULENBQWVDLElBQWYsRUFBcUJDLE1BQXJCLEVBQTZCO0FBQ2xDLHFCQUFTQyxHQUFULENBQWEsOEJBQW9CO0FBQy9CQyxpQkFBYUYsT0FBT0csT0FBUCxDQUFlQyxRQURHO0FBRS9CQyxvQkFBZ0JMLE9BQU9HLE9BQVAsQ0FBZUcsWUFGQTtBQUcvQkMsaUJBQWFQLE9BQU9HLE9BQVAsQ0FBZUk7QUFIRyxHQUFwQixFQUtiLFVBQVNDLEtBQVQsRUFBZ0JDLFdBQWhCLEVBQTZCQyxPQUE3QixFQUFzQ0MsSUFBdEMsRUFBNEM7QUFDMUNELFlBQVFFLEtBQVIsQ0FBY0MsRUFBZCxRQUFzQkgsUUFBUUUsS0FBUixDQUFjQyxFQUFwQztBQUNBSCxZQUFRRyxFQUFSLFFBQWdCSCxRQUFRRyxFQUF4Qjs7QUFFQWQsU0FBS2UsT0FBTCxDQUFhLEVBQUMsY0FBY0osUUFBUUcsRUFBdkIsRUFBYixFQUF5Q0UsSUFBekMsR0FDR0MsSUFESCxDQUNRLGdCQUFRO0FBQ1osVUFBR0MsSUFBSCxFQUFTO0FBQ1AsZUFBT04sS0FBSyxJQUFMLEVBQVdNLElBQVgsQ0FBUDtBQUNEOztBQUVEQSxhQUFPLElBQUlsQixJQUFKLENBQVM7QUFDZG1CLGNBQU1SLFFBQVFTLFdBREE7QUFFZEMsa0JBQVVWLFFBQVFVLFFBRko7QUFHZEMsY0FBTSxNQUhRO0FBSWRDLGtCQUFVLFNBSkk7QUFLZG5CLGlCQUFTTyxRQUFRRTtBQUxILE9BQVQsQ0FBUDtBQU9BSyxXQUFLTSxJQUFMLEdBQ0dQLElBREgsQ0FDUTtBQUFBLGVBQWFMLEtBQUssSUFBTCxFQUFXYSxTQUFYLENBQWI7QUFBQSxPQURSLEVBRUdDLEtBRkgsQ0FFUztBQUFBLGVBQU9kLEtBQUtlLEdBQUwsQ0FBUDtBQUFBLE9BRlQ7QUFHRCxLQWhCSCxFQWlCR0QsS0FqQkgsQ0FpQlM7QUFBQSxhQUFPZCxLQUFLZSxHQUFMLENBQVA7QUFBQSxLQWpCVDtBQWtCRCxHQTNCWSxDQUFiO0FBNEJEIiwiZmlsZSI6InBhc3Nwb3J0LmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hdXRoL3R3aXR0ZXIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHtTdHJhdGVneSBhcyBUd2l0dGVyU3RyYXRlZ3l9IGZyb20gJ3Bhc3Nwb3J0LXR3aXR0ZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXAoVXNlciwgY29uZmlnKSB7XG4gIHBhc3Nwb3J0LnVzZShuZXcgVHdpdHRlclN0cmF0ZWd5KHtcbiAgICBjb25zdW1lcktleTogY29uZmlnLnR3aXR0ZXIuY2xpZW50SUQsXG4gICAgY29uc3VtZXJTZWNyZXQ6IGNvbmZpZy50d2l0dGVyLmNsaWVudFNlY3JldCxcbiAgICBjYWxsYmFja1VSTDogY29uZmlnLnR3aXR0ZXIuY2FsbGJhY2tVUkxcbiAgfSxcbiAgZnVuY3Rpb24odG9rZW4sIHRva2VuU2VjcmV0LCBwcm9maWxlLCBkb25lKSB7XG4gICAgcHJvZmlsZS5fanNvbi5pZCA9IGAke3Byb2ZpbGUuX2pzb24uaWR9YDtcbiAgICBwcm9maWxlLmlkID0gYCR7cHJvZmlsZS5pZH1gO1xuXG4gICAgVXNlci5maW5kT25lKHsndHdpdHRlci5pZCc6IHByb2ZpbGUuaWR9KS5leGVjKClcbiAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICBpZih1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIGRvbmUobnVsbCwgdXNlcik7XG4gICAgICAgIH1cblxuICAgICAgICB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGlzcGxheU5hbWUsXG4gICAgICAgICAgdXNlcm5hbWU6IHByb2ZpbGUudXNlcm5hbWUsXG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIHByb3ZpZGVyOiAndHdpdHRlcicsXG4gICAgICAgICAgdHdpdHRlcjogcHJvZmlsZS5fanNvblxuICAgICAgICB9KTtcbiAgICAgICAgdXNlci5zYXZlKClcbiAgICAgICAgICAudGhlbihzYXZlZFVzZXIgPT4gZG9uZShudWxsLCBzYXZlZFVzZXIpKVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gZG9uZShlcnIpKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGRvbmUoZXJyKSk7XG4gIH0pKTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "passport.js"
      ],
      "names": [
        "setup",
        "User",
        "config",
        "use",
        "consumerKey",
        "twitter",
        "clientID",
        "consumerSecret",
        "clientSecret",
        "callbackURL",
        "token",
        "tokenSecret",
        "profile",
        "done",
        "_json",
        "id",
        "findOne",
        "exec",
        "then",
        "user",
        "name",
        "displayName",
        "username",
        "role",
        "provider",
        "save",
        "savedUser",
        "catch",
        "err"
      ],
      "mappings": ";;;;;QAGgBA,K,GAAAA,K;;AAHhB;;;;AACA;;;;AAEO,SAASA,KAAT,CAAeC,IAAf,EAAqBC,MAArB,EAA6B;AAClC,qBAASC,GAAT,CAAa,8BAAoB;AAC/BC,iBAAaF,OAAOG,OAAP,CAAeC,QADG;AAE/BC,oBAAgBL,OAAOG,OAAP,CAAeG,YAFA;AAG/BC,iBAAaP,OAAOG,OAAP,CAAeI;AAHG,GAApB,EAKb,UAASC,KAAT,EAAgBC,WAAhB,EAA6BC,OAA7B,EAAsCC,IAAtC,EAA4C;AAC1CD,YAAQE,KAAR,CAAcC,EAAd,QAAsBH,QAAQE,KAAR,CAAcC,EAApC;AACAH,YAAQG,EAAR,QAAgBH,QAAQG,EAAxB;;AAEAd,SAAKe,OAAL,CAAa,EAAC,cAAcJ,QAAQG,EAAvB,EAAb,EAAyCE,IAAzC,GACGC,IADH,CACQ,gBAAQ;AACZ,UAAGC,IAAH,EAAS;AACP,eAAON,KAAK,IAAL,EAAWM,IAAX,CAAP;AACD;;AAEDA,aAAO,IAAIlB,IAAJ,CAAS;AACdmB,cAAMR,QAAQS,WADA;AAEdC,kBAAUV,QAAQU,QAFJ;AAGdC,cAAM,MAHQ;AAIdC,kBAAU,SAJI;AAKdnB,iBAASO,QAAQE;AALH,OAAT,CAAP;AAOAK,WAAKM,IAAL,GACGP,IADH,CACQ;AAAA,eAAaL,KAAK,IAAL,EAAWa,SAAX,CAAb;AAAA,OADR,EAEGC,KAFH,CAES;AAAA,eAAOd,KAAKe,GAAL,CAAP;AAAA,OAFT;AAGD,KAhBH,EAiBGD,KAjBH,CAiBS;AAAA,aAAOd,KAAKe,GAAL,CAAP;AAAA,KAjBT;AAkBD,GA3BY,CAAb;AA4BD",
      "file": "passport.js",
      "sourceRoot": "/root/server/auth/twitter",
      "sourcesContent": [
        "import passport from 'passport';\nimport {Strategy as TwitterStrategy} from 'passport-twitter';\n\nexport function setup(User, config) {\n  passport.use(new TwitterStrategy({\n    consumerKey: config.twitter.clientID,\n    consumerSecret: config.twitter.clientSecret,\n    callbackURL: config.twitter.callbackURL\n  },\n  function(token, tokenSecret, profile, done) {\n    profile._json.id = `${profile._json.id}`;\n    profile.id = `${profile.id}`;\n\n    User.findOne({'twitter.id': profile.id}).exec()\n      .then(user => {\n        if(user) {\n          return done(null, user);\n        }\n\n        user = new User({\n          name: profile.displayName,\n          username: profile.username,\n          role: 'user',\n          provider: 'twitter',\n          twitter: profile._json\n        });\n        user.save()\n          .then(savedUser => done(null, savedUser))\n          .catch(err => done(err));\n      })\n      .catch(err => done(err));\n  }));\n}\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/auth/local/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/local\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "../auth.service",
            "imported": [
              "signToken"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "signToken",
                "local": "signToken"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/local/index.js",
      "filenameRelative": "/root/server/auth/local/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/auth/local",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/local",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _auth = require('../auth.service');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = _express2.default.Router();\n\nrouter.post('/', function (req, res, next) {\n  _passport2.default.authenticate('local', function (err, user, info) {\n    var error = err || info;\n    if (error) {\n      return res.status(401).json(error);\n    }\n    if (!user) {\n      return res.status(404).json({ message: 'Something went wrong, please try again.' });\n    }\n\n    var token = (0, _auth.signToken)(user._id, user.role);\n    res.json({ token: token });\n  })(req, res, next);\n});\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInBvc3QiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aGVudGljYXRlIiwiZXJyIiwidXNlciIsImluZm8iLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJfaWQiLCJyb2xlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUEsSUFBSUEsU0FBUyxrQkFBUUMsTUFBUixFQUFiOztBQUVBRCxPQUFPRSxJQUFQLENBQVksR0FBWixFQUFpQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3hDLHFCQUFTQyxZQUFULENBQXNCLE9BQXRCLEVBQStCLFVBQVNDLEdBQVQsRUFBY0MsSUFBZCxFQUFvQkMsSUFBcEIsRUFBMEI7QUFDdkQsUUFBSUMsUUFBUUgsT0FBT0UsSUFBbkI7QUFDQSxRQUFHQyxLQUFILEVBQVU7QUFDUixhQUFPTixJQUFJTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJGLEtBQXJCLENBQVA7QUFDRDtBQUNELFFBQUcsQ0FBQ0YsSUFBSixFQUFVO0FBQ1IsYUFBT0osSUFBSU8sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLEVBQUNDLFNBQVMseUNBQVYsRUFBckIsQ0FBUDtBQUNEOztBQUVELFFBQUlDLFFBQVEscUJBQVVOLEtBQUtPLEdBQWYsRUFBb0JQLEtBQUtRLElBQXpCLENBQVo7QUFDQVosUUFBSVEsSUFBSixDQUFTLEVBQUVFLFlBQUYsRUFBVDtBQUNELEdBWEQsRUFXR1gsR0FYSCxFQVdRQyxHQVhSLEVBV2FDLElBWGI7QUFZRCxDQWJEOztrQkFlZUwsTSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXV0aC9sb2NhbCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHtzaWduVG9rZW59IGZyb20gJy4uL2F1dGguc2VydmljZSc7XG5cbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnbG9jYWwnLCBmdW5jdGlvbihlcnIsIHVzZXIsIGluZm8pIHtcbiAgICB2YXIgZXJyb3IgPSBlcnIgfHwgaW5mbztcbiAgICBpZihlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKGVycm9yKTtcbiAgICB9XG4gICAgaWYoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogJ1NvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluLid9KTtcbiAgICB9XG5cbiAgICB2YXIgdG9rZW4gPSBzaWduVG9rZW4odXNlci5faWQsIHVzZXIucm9sZSk7XG4gICAgcmVzLmpzb24oeyB0b2tlbiB9KTtcbiAgfSkocmVxLCByZXMsIG5leHQpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "Router",
        "post",
        "req",
        "res",
        "next",
        "authenticate",
        "err",
        "user",
        "info",
        "error",
        "status",
        "json",
        "message",
        "token",
        "_id",
        "role"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACxC,qBAASC,YAAT,CAAsB,OAAtB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0B;AACvD,QAAIC,QAAQH,OAAOE,IAAnB;AACA,QAAGC,KAAH,EAAU;AACR,aAAON,IAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB,CAAP;AACD;AACD,QAAG,CAACF,IAAJ,EAAU;AACR,aAAOJ,IAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,SAAS,yCAAV,EAArB,CAAP;AACD;;AAED,QAAIC,QAAQ,qBAAUN,KAAKO,GAAf,EAAoBP,KAAKQ,IAAzB,CAAZ;AACAZ,QAAIQ,IAAJ,CAAS,EAAEE,YAAF,EAAT;AACD,GAXD,EAWGX,GAXH,EAWQC,GAXR,EAWaC,IAXb;AAYD,CAbD;;kBAeeL,M",
      "file": "index.js",
      "sourceRoot": "/root/server/auth/local",
      "sourcesContent": [
        "'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {signToken} from '../auth.service';\n\nvar router = express.Router();\n\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function(err, user, info) {\n    var error = err || info;\n    if(error) {\n      return res.status(401).json(error);\n    }\n    if(!user) {\n      return res.status(404).json({message: 'Something went wrong, please try again.'});\n    }\n\n    var token = signToken(user._id, user.role);\n    res.json({ token });\n  })(req, res, next);\n});\n\nexport default router;\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/facebook/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/facebook\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "../auth.service",
            "imported": [
              "setTokenCookie"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "setTokenCookie",
                "local": "setTokenCookie"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/facebook/index.js",
      "filenameRelative": "/root/server/auth/facebook/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/auth/facebook",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/facebook",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _auth = require('../auth.service');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = _express2.default.Router();\n\nrouter.get('/', _passport2.default.authenticate('facebook', {\n  scope: ['email', 'user_about_me'],\n  failureRedirect: '/signup',\n  session: false\n})).get('/callback', _passport2.default.authenticate('facebook', {\n  failureRedirect: '/signup',\n  session: false\n}), _auth.setTokenCookie);\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGhlbnRpY2F0ZSIsInNjb3BlIiwiZmFpbHVyZVJlZGlyZWN0Iiwic2Vzc2lvbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBLElBQUlBLFNBQVMsa0JBQVFDLE1BQVIsRUFBYjs7QUFFQUQsT0FDR0UsR0FESCxDQUNPLEdBRFAsRUFDWSxtQkFBU0MsWUFBVCxDQUFzQixVQUF0QixFQUFrQztBQUMxQ0MsU0FBTyxDQUFDLE9BQUQsRUFBVSxlQUFWLENBRG1DO0FBRTFDQyxtQkFBaUIsU0FGeUI7QUFHMUNDLFdBQVM7QUFIaUMsQ0FBbEMsQ0FEWixFQU1HSixHQU5ILENBTU8sV0FOUCxFQU1vQixtQkFBU0MsWUFBVCxDQUFzQixVQUF0QixFQUFrQztBQUNsREUsbUJBQWlCLFNBRGlDO0FBRWxEQyxXQUFTO0FBRnlDLENBQWxDLENBTnBCOztrQkFXZU4sTSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXV0aC9mYWNlYm9vayIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHtzZXRUb2tlbkNvb2tpZX0gZnJvbSAnLi4vYXV0aC5zZXJ2aWNlJztcblxudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlclxuICAuZ2V0KCcvJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdmYWNlYm9vaycsIHtcbiAgICBzY29wZTogWydlbWFpbCcsICd1c2VyX2Fib3V0X21lJ10sXG4gICAgZmFpbHVyZVJlZGlyZWN0OiAnL3NpZ251cCcsXG4gICAgc2Vzc2lvbjogZmFsc2VcbiAgfSkpXG4gIC5nZXQoJy9jYWxsYmFjaycsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnZmFjZWJvb2snLCB7XG4gICAgZmFpbHVyZVJlZGlyZWN0OiAnL3NpZ251cCcsXG4gICAgc2Vzc2lvbjogZmFsc2VcbiAgfSksIHNldFRva2VuQ29va2llKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "authenticate",
        "scope",
        "failureRedirect",
        "session"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEAD,OACGE,GADH,CACO,GADP,EACY,mBAASC,YAAT,CAAsB,UAAtB,EAAkC;AAC1CC,SAAO,CAAC,OAAD,EAAU,eAAV,CADmC;AAE1CC,mBAAiB,SAFyB;AAG1CC,WAAS;AAHiC,CAAlC,CADZ,EAMGJ,GANH,CAMO,WANP,EAMoB,mBAASC,YAAT,CAAsB,UAAtB,EAAkC;AAClDE,mBAAiB,SADiC;AAElDC,WAAS;AAFyC,CAAlC,CANpB;;kBAWeN,M",
      "file": "index.js",
      "sourceRoot": "/root/server/auth/facebook",
      "sourcesContent": [
        "'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {setTokenCookie} from '../auth.service';\n\nvar router = express.Router();\n\nrouter\n  .get('/', passport.authenticate('facebook', {\n    scope: ['email', 'user_about_me'],\n    failureRedirect: '/signup',\n    session: false\n  }))\n  .get('/callback', passport.authenticate('facebook', {\n    failureRedirect: '/signup',\n    session: false\n  }), setTokenCookie);\n\nexport default router;\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/auth/twitter/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/twitter\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "../auth.service",
            "imported": [
              "setTokenCookie"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "setTokenCookie",
                "local": "setTokenCookie"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/twitter/index.js",
      "filenameRelative": "/root/server/auth/twitter/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/auth/twitter",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/twitter",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _auth = require('../auth.service');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = _express2.default.Router();\n\nrouter.get('/', _passport2.default.authenticate('twitter', {\n  failureRedirect: '/signup',\n  session: false\n})).get('/callback', _passport2.default.authenticate('twitter', {\n  failureRedirect: '/signup',\n  session: false\n}), _auth.setTokenCookie);\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGhlbnRpY2F0ZSIsImZhaWx1cmVSZWRpcmVjdCIsInNlc3Npb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQSxJQUFJQSxTQUFTLGtCQUFRQyxNQUFSLEVBQWI7O0FBRUFELE9BQ0dFLEdBREgsQ0FDTyxHQURQLEVBQ1ksbUJBQVNDLFlBQVQsQ0FBc0IsU0FBdEIsRUFBaUM7QUFDekNDLG1CQUFpQixTQUR3QjtBQUV6Q0MsV0FBUztBQUZnQyxDQUFqQyxDQURaLEVBS0dILEdBTEgsQ0FLTyxXQUxQLEVBS29CLG1CQUFTQyxZQUFULENBQXNCLFNBQXRCLEVBQWlDO0FBQ2pEQyxtQkFBaUIsU0FEZ0M7QUFFakRDLFdBQVM7QUFGd0MsQ0FBakMsQ0FMcEI7O2tCQVVlTCxNIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hdXRoL3R3aXR0ZXIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCB7c2V0VG9rZW5Db29raWV9IGZyb20gJy4uL2F1dGguc2VydmljZSc7XG5cbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXJcbiAgLmdldCgnLycsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgndHdpdHRlcicsIHtcbiAgICBmYWlsdXJlUmVkaXJlY3Q6ICcvc2lnbnVwJyxcbiAgICBzZXNzaW9uOiBmYWxzZVxuICB9KSlcbiAgLmdldCgnL2NhbGxiYWNrJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCd0d2l0dGVyJywge1xuICAgIGZhaWx1cmVSZWRpcmVjdDogJy9zaWdudXAnLFxuICAgIHNlc3Npb246IGZhbHNlXG4gIH0pLCBzZXRUb2tlbkNvb2tpZSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "authenticate",
        "failureRedirect",
        "session"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEAD,OACGE,GADH,CACO,GADP,EACY,mBAASC,YAAT,CAAsB,SAAtB,EAAiC;AACzCC,mBAAiB,SADwB;AAEzCC,WAAS;AAFgC,CAAjC,CADZ,EAKGH,GALH,CAKO,WALP,EAKoB,mBAASC,YAAT,CAAsB,SAAtB,EAAiC;AACjDC,mBAAiB,SADgC;AAEjDC,WAAS;AAFwC,CAAjC,CALpB;;kBAUeL,M",
      "file": "index.js",
      "sourceRoot": "/root/server/auth/twitter",
      "sourcesContent": [
        "'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {setTokenCookie} from '../auth.service';\n\nvar router = express.Router();\n\nrouter\n  .get('/', passport.authenticate('twitter', {\n    failureRedirect: '/signup',\n    session: false\n  }))\n  .get('/callback', passport.authenticate('twitter', {\n    failureRedirect: '/signup',\n    session: false\n  }), setTokenCookie);\n\nexport default router;\n"
      ]
    },
    "mtime": 1507831002253
  },
  "{\"filename\":\"/root/server/auth/google/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/auth/google\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "passport",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "passport"
              }
            ]
          },
          {
            "source": "../auth.service",
            "imported": [
              "setTokenCookie"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "setTokenCookie",
                "local": "setTokenCookie"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/auth/google/index.js",
      "filenameRelative": "/root/server/auth/google/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/auth/google",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/auth/google",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _passport = require('passport');\n\nvar _passport2 = _interopRequireDefault(_passport);\n\nvar _auth = require('../auth.service');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar router = _express2.default.Router();\n\nrouter.get('/', _passport2.default.authenticate('google', {\n  failureRedirect: '/signup',\n  scope: ['profile', 'email'],\n  session: false\n})).get('/callback', _passport2.default.authenticate('google', {\n  failureRedirect: '/signup',\n  session: false\n}), _auth.setTokenCookie);\n\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsImdldCIsImF1dGhlbnRpY2F0ZSIsImZhaWx1cmVSZWRpcmVjdCIsInNjb3BlIiwic2Vzc2lvbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBLElBQUlBLFNBQVMsa0JBQVFDLE1BQVIsRUFBYjs7QUFFQUQsT0FDR0UsR0FESCxDQUNPLEdBRFAsRUFDWSxtQkFBU0MsWUFBVCxDQUFzQixRQUF0QixFQUFnQztBQUN4Q0MsbUJBQWlCLFNBRHVCO0FBRXhDQyxTQUFPLENBQ0wsU0FESyxFQUVMLE9BRkssQ0FGaUM7QUFNeENDLFdBQVM7QUFOK0IsQ0FBaEMsQ0FEWixFQVNHSixHQVRILENBU08sV0FUUCxFQVNvQixtQkFBU0MsWUFBVCxDQUFzQixRQUF0QixFQUFnQztBQUNoREMsbUJBQWlCLFNBRCtCO0FBRWhERSxXQUFTO0FBRnVDLENBQWhDLENBVHBCOztrQkFjZU4sTSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXV0aC9nb29nbGUiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHBhc3Nwb3J0IGZyb20gJ3Bhc3Nwb3J0JztcbmltcG9ydCB7c2V0VG9rZW5Db29raWV9IGZyb20gJy4uL2F1dGguc2VydmljZSc7XG5cbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXJcbiAgLmdldCgnLycsIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnZ29vZ2xlJywge1xuICAgIGZhaWx1cmVSZWRpcmVjdDogJy9zaWdudXAnLFxuICAgIHNjb3BlOiBbXG4gICAgICAncHJvZmlsZScsXG4gICAgICAnZW1haWwnXG4gICAgXSxcbiAgICBzZXNzaW9uOiBmYWxzZVxuICB9KSlcbiAgLmdldCgnL2NhbGxiYWNrJywgcGFzc3BvcnQuYXV0aGVudGljYXRlKCdnb29nbGUnLCB7XG4gICAgZmFpbHVyZVJlZGlyZWN0OiAnL3NpZ251cCcsXG4gICAgc2Vzc2lvbjogZmFsc2VcbiAgfSksIHNldFRva2VuQ29va2llKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "Router",
        "get",
        "authenticate",
        "failureRedirect",
        "scope",
        "session"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEAD,OACGE,GADH,CACO,GADP,EACY,mBAASC,YAAT,CAAsB,QAAtB,EAAgC;AACxCC,mBAAiB,SADuB;AAExCC,SAAO,CACL,SADK,EAEL,OAFK,CAFiC;AAMxCC,WAAS;AAN+B,CAAhC,CADZ,EASGJ,GATH,CASO,WATP,EASoB,mBAASC,YAAT,CAAsB,QAAtB,EAAgC;AAChDC,mBAAiB,SAD+B;AAEhDE,WAAS;AAFuC,CAAhC,CATpB;;kBAceN,M",
      "file": "index.js",
      "sourceRoot": "/root/server/auth/google",
      "sourcesContent": [
        "'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {setTokenCookie} from '../auth.service';\n\nvar router = express.Router();\n\nrouter\n  .get('/', passport.authenticate('google', {\n    failureRedirect: '/signup',\n    scope: [\n      'profile',\n      'email'\n    ],\n    session: false\n  }))\n  .get('/callback', passport.authenticate('google', {\n    failureRedirect: '/signup',\n    session: false\n  }), setTokenCookie);\n\nexport default router;\n"
      ]
    },
    "mtime": 1507831001793
  },
  "{\"filename\":\"/root/server/api/new/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/new\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireWildcard"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../auth/auth.service",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "auth"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/new/index.js",
      "filenameRelative": "/root/server/api/new/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/root/server/api/new",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/new",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _auth = require('../../auth/auth.service');\n\nvar auth = _interopRequireWildcard(_auth);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar express = require('express');\nvar controller = require('./new.controller');\n\nvar router = express.Router();\n\nrouter.get('/', controller.index);\nrouter.get('/:id', controller.show);\nrouter.post('/', auth.hasRole('admin'), controller.create);\nrouter.put('/:id', auth.hasRole('admin'), controller.upsert);\nrouter.patch('/:id', auth.hasRole('admin'), controller.patch);\nrouter.delete('/:id', auth.hasRole('admin'), controller.destroy);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImF1dGgiLCJleHByZXNzIiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXQiLCJpbmRleCIsInNob3ciLCJwb3N0IiwiaGFzUm9sZSIsImNyZWF0ZSIsInB1dCIsInVwc2VydCIsInBhdGNoIiwiZGVsZXRlIiwiZGVzdHJveSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUlBOztJQUFZQSxJOzs7O0FBRlosSUFBSUMsVUFBVUMsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFJQyxhQUFhRCxRQUFRLGtCQUFSLENBQWpCOztBQUVBLElBQUlFLFNBQVNILFFBQVFJLE1BQVIsRUFBYjs7QUFFQUQsT0FBT0UsR0FBUCxDQUFXLEdBQVgsRUFBZ0JILFdBQVdJLEtBQTNCO0FBQ0FILE9BQU9FLEdBQVAsQ0FBVyxNQUFYLEVBQW1CSCxXQUFXSyxJQUE5QjtBQUNBSixPQUFPSyxJQUFQLENBQVksR0FBWixFQUFpQlQsS0FBS1UsT0FBTCxDQUFhLE9BQWIsQ0FBakIsRUFBd0NQLFdBQVdRLE1BQW5EO0FBQ0FQLE9BQU9RLEdBQVAsQ0FBVyxNQUFYLEVBQW1CWixLQUFLVSxPQUFMLENBQWEsT0FBYixDQUFuQixFQUEwQ1AsV0FBV1UsTUFBckQ7QUFDQVQsT0FBT1UsS0FBUCxDQUFhLE1BQWIsRUFBcUJkLEtBQUtVLE9BQUwsQ0FBYSxPQUFiLENBQXJCLEVBQTRDUCxXQUFXVyxLQUF2RDtBQUNBVixPQUFPVyxNQUFQLENBQWMsTUFBZCxFQUFzQmYsS0FBS1UsT0FBTCxDQUFhLE9BQWIsQ0FBdEIsRUFBNkNQLFdBQVdhLE9BQXhEOztBQUVBQyxPQUFPQyxPQUFQLEdBQWlCZCxNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXBpL25ldyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgY29udHJvbGxlciA9IHJlcXVpcmUoJy4vbmV3LmNvbnRyb2xsZXInKTtcbmltcG9ydCAqIGFzIGF1dGggZnJvbSAnLi4vLi4vYXV0aC9hdXRoLnNlcnZpY2UnO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoJy8nLCBjb250cm9sbGVyLmluZGV4KTtcbnJvdXRlci5nZXQoJy86aWQnLCBjb250cm9sbGVyLnNob3cpO1xucm91dGVyLnBvc3QoJy8nLCBhdXRoLmhhc1JvbGUoJ2FkbWluJyksIGNvbnRyb2xsZXIuY3JlYXRlKTtcbnJvdXRlci5wdXQoJy86aWQnLCBhdXRoLmhhc1JvbGUoJ2FkbWluJyksIGNvbnRyb2xsZXIudXBzZXJ0KTtcbnJvdXRlci5wYXRjaCgnLzppZCcsIGF1dGguaGFzUm9sZSgnYWRtaW4nKSwgY29udHJvbGxlci5wYXRjaCk7XG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgYXV0aC5oYXNSb2xlKCdhZG1pbicpLCBjb250cm9sbGVyLmRlc3Ryb3kpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "auth",
        "express",
        "require",
        "controller",
        "router",
        "Router",
        "get",
        "index",
        "show",
        "post",
        "hasRole",
        "create",
        "put",
        "upsert",
        "patch",
        "delete",
        "destroy",
        "module",
        "exports"
      ],
      "mappings": "AAAA;;AAIA;;IAAYA,I;;;;AAFZ,IAAIC,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,aAAaD,QAAQ,kBAAR,CAAjB;;AAEA,IAAIE,SAASH,QAAQI,MAAR,EAAb;;AAEAD,OAAOE,GAAP,CAAW,GAAX,EAAgBH,WAAWI,KAA3B;AACAH,OAAOE,GAAP,CAAW,MAAX,EAAmBH,WAAWK,IAA9B;AACAJ,OAAOK,IAAP,CAAY,GAAZ,EAAiBT,KAAKU,OAAL,CAAa,OAAb,CAAjB,EAAwCP,WAAWQ,MAAnD;AACAP,OAAOQ,GAAP,CAAW,MAAX,EAAmBZ,KAAKU,OAAL,CAAa,OAAb,CAAnB,EAA0CP,WAAWU,MAArD;AACAT,OAAOU,KAAP,CAAa,MAAb,EAAqBd,KAAKU,OAAL,CAAa,OAAb,CAArB,EAA4CP,WAAWW,KAAvD;AACAV,OAAOW,MAAP,CAAc,MAAd,EAAsBf,KAAKU,OAAL,CAAa,OAAb,CAAtB,EAA6CP,WAAWa,OAAxD;;AAEAC,OAAOC,OAAP,GAAiBd,MAAjB",
      "file": "index.js",
      "sourceRoot": "/root/server/api/new",
      "sourcesContent": [
        "'use strict';\n\nvar express = require('express');\nvar controller = require('./new.controller');\nimport * as auth from '../../auth/auth.service';\nvar router = express.Router();\n\nrouter.get('/', controller.index);\nrouter.get('/:id', controller.show);\nrouter.post('/', auth.hasRole('admin'), controller.create);\nrouter.put('/:id', auth.hasRole('admin'), controller.upsert);\nrouter.patch('/:id', auth.hasRole('admin'), controller.patch);\nrouter.delete('/:id', auth.hasRole('admin'), controller.destroy);\n\nmodule.exports = router;\n"
      ]
    },
    "mtime": 1508176823466
  },
  "{\"filename\":\"/root/server/api/new/new.controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/new\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "fast-json-patch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "jsonpatch"
              }
            ]
          },
          {
            "source": "./new.model",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "New"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "index",
            "req",
            "res",
            "show",
            "req",
            "res",
            "create",
            "req",
            "res",
            "upsert",
            "req",
            "res",
            "patch",
            "req",
            "res",
            "destroy",
            "req",
            "res"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "index",
              "exported": "index"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "show",
              "exported": "show"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "create",
              "exported": "create"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "upsert",
              "exported": "upsert"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "patch",
              "exported": "patch"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            },
            {
              "kind": "local",
              "local": "destroy",
              "exported": "destroy"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "req"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "res"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/new/new.controller.js",
      "filenameRelative": "/root/server/api/new/new.controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "new.controller.js",
      "sourceFileName": "new.controller.js",
      "sourceRoot": "/root/server/api/new",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/new",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "new.controller"
    },
    "ignored": false,
    "code": "/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/news              ->  index\n * POST    /api/news              ->  create\n * GET     /api/news/:id          ->  show\n * PUT     /api/news/:id          ->  upsert\n * PATCH   /api/news/:id          ->  patch\n * DELETE  /api/news/:id          ->  destroy\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.index = index;\nexports.show = show;\nexports.create = create;\nexports.upsert = upsert;\nexports.patch = patch;\nexports.destroy = destroy;\n\nvar _fastJsonPatch = require('fast-json-patch');\n\nvar _fastJsonPatch2 = _interopRequireDefault(_fastJsonPatch);\n\nvar _new = require('./new.model');\n\nvar _new2 = _interopRequireDefault(_new);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function (entity) {\n    if (entity) {\n      return res.status(statusCode).json(entity);\n    }\n    return null;\n  };\n}\n\nfunction patchUpdates(patches) {\n  return function (entity) {\n    try {\n      // eslint-disable-next-line prefer-reflect\n      _fastJsonPatch2.default.apply(entity, patches, /*validate*/true);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n\n    return entity.save();\n  };\n}\n\nfunction removeEntity(res) {\n  return function (entity) {\n    if (entity) {\n      return entity.remove().then(function () {\n        res.status(204).end();\n      });\n    }\n  };\n}\n\nfunction handleEntityNotFound(res) {\n  return function (entity) {\n    if (!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function (err) {\n    res.status(statusCode).send(err);\n  };\n}\n\n// Gets a list of News\nfunction index(req, res) {\n  return _new2.default.find().exec().then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Gets a single New from the DB\nfunction show(req, res) {\n  return _new2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Creates a new New in the DB\nfunction create(req, res) {\n  return _new2.default.create(req.body).then(respondWithResult(res, 201)).catch(handleError(res));\n}\n\n// Upserts the given New in the DB at the specified ID\nfunction upsert(req, res) {\n  if (req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return _new2.default.findOneAndUpdate({ _id: req.params.id }, req.body, { new: true, upsert: true, setDefaultsOnInsert: true, runValidators: true }).exec().then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Updates an existing New in the DB\nfunction patch(req, res) {\n  if (req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return _new2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(patchUpdates(req.body)).then(respondWithResult(res)).catch(handleError(res));\n}\n\n// Deletes a New from the DB\nfunction destroy(req, res) {\n  return _new2.default.findById(req.params.id).exec().then(handleEntityNotFound(res)).then(removeEntity(res)).catch(handleError(res));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImluZGV4Iiwic2hvdyIsImNyZWF0ZSIsInVwc2VydCIsInBhdGNoIiwiZGVzdHJveSIsInJlc3BvbmRXaXRoUmVzdWx0IiwicmVzIiwic3RhdHVzQ29kZSIsImVudGl0eSIsInN0YXR1cyIsImpzb24iLCJwYXRjaFVwZGF0ZXMiLCJwYXRjaGVzIiwiYXBwbHkiLCJlcnIiLCJQcm9taXNlIiwicmVqZWN0Iiwic2F2ZSIsInJlbW92ZUVudGl0eSIsInJlbW92ZSIsInRoZW4iLCJlbmQiLCJoYW5kbGVFbnRpdHlOb3RGb3VuZCIsImhhbmRsZUVycm9yIiwic2VuZCIsInJlcSIsImZpbmQiLCJleGVjIiwiY2F0Y2giLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwiYm9keSIsIl9pZCIsIlJlZmxlY3QiLCJkZWxldGVQcm9wZXJ0eSIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJzZXREZWZhdWx0c09uSW5zZXJ0IiwicnVuVmFsaWRhdG9ycyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7QUFVQTs7Ozs7UUF5RGdCQSxLLEdBQUFBLEs7UUFPQUMsSSxHQUFBQSxJO1FBUUFDLE0sR0FBQUEsTTtRQU9BQyxNLEdBQUFBLE07UUFXQUMsSyxHQUFBQSxLO1FBWUFDLE8sR0FBQUEsTzs7QUFwR2hCOzs7O0FBQ0E7Ozs7OztBQUVBLFNBQVNDLGlCQUFULENBQTJCQyxHQUEzQixFQUFnQ0MsVUFBaEMsRUFBNEM7QUFDMUNBLGVBQWFBLGNBQWMsR0FBM0I7QUFDQSxTQUFPLFVBQVNDLE1BQVQsRUFBaUI7QUFDdEIsUUFBR0EsTUFBSCxFQUFXO0FBQ1QsYUFBT0YsSUFBSUcsTUFBSixDQUFXRixVQUFYLEVBQXVCRyxJQUF2QixDQUE0QkYsTUFBNUIsQ0FBUDtBQUNEO0FBQ0QsV0FBTyxJQUFQO0FBQ0QsR0FMRDtBQU1EOztBQUVELFNBQVNHLFlBQVQsQ0FBc0JDLE9BQXRCLEVBQStCO0FBQzdCLFNBQU8sVUFBU0os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ZXNCLEdBQWYsRUFBb0JuQixHQUFwQixFQUF5QjtBQUM5QixNQUFHbUIsSUFBSU8sSUFBSixDQUFTQyxHQUFaLEVBQWlCO0FBQ2ZDLFlBQVFDLGNBQVIsQ0FBdUJWLElBQUlPLElBQTNCLEVBQWlDLEtBQWpDO0FBQ0Q7QUFDRCxTQUFPLGNBQUlILFFBQUosQ0FBYUosSUFBSUssTUFBSixDQUFXQyxFQUF4QixFQUE0QkosSUFBNUIsR0FDSlAsSUFESSxDQUNDRSxxQkFBcUJoQixHQUFyQixDQURELEVBRUpjLElBRkksQ0FFQ1QsYUFBYWMsSUFBSU8sSUFBakIsQ0FGRCxFQUdKWixJQUhJLENBR0NmLGtCQUFrQkMsR0FBbEIsQ0FIRCxFQUlKc0IsS0FKSSxDQUlFTCxZQUFZakIsR0FBWixDQUpGLENBQVA7QUFLRDs7QUFFRDtBQUNPLFNBQVNGLE9BQVQsQ0FBaUJxQixHQUFqQixFQUFzQm5CLEdBQXRCLEVBQTJCO0FBQ2hDLFNBQU8sY0FBSXVCLFFBQUosQ0FBYUosSUFBSUssTUFBSixDQUFXQyxFQUF4QixFQUE0QkosSUFBNUIsR0FDSlAsSUFESSxDQUNDRSxxQkFBcUJoQixHQUFyQixDQURELEVBRUpjLElBRkksQ0FFQ0YsYUFBYVosR0FBYixDQUZELEVBR0pzQixLQUhJLENBR0VMLFlBQVlqQixHQUFaLENBSEYsQ0FBUDtBQUlEIiwiZmlsZSI6Im5ldy5jb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9yb290L3NlcnZlci9hcGkvbmV3Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVc2luZyBSYWlscy1saWtlIHN0YW5kYXJkIG5hbWluZyBjb252ZW50aW9uIGZvciBlbmRwb2ludHMuXG4gKiBHRVQgICAgIC9hcGkvbmV3cyAgICAgICAgICAgICAgLT4gIGluZGV4XG4gKiBQT1NUICAgIC9hcGkvbmV3cyAgICAgICAgICAgICAgLT4gIGNyZWF0ZVxuICogR0VUICAgICAvYXBpL25ld3MvOmlkICAgICAgICAgIC0+ICBzaG93XG4gKiBQVVQgICAgIC9hcGkvbmV3cy86aWQgICAgICAgICAgLT4gIHVwc2VydFxuICogUEFUQ0ggICAvYXBpL25ld3MvOmlkICAgICAgICAgIC0+ICBwYXRjaFxuICogREVMRVRFICAvYXBpL25ld3MvOmlkICAgICAgICAgIC0+ICBkZXN0cm95XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQganNvbnBhdGNoIGZyb20gJ2Zhc3QtanNvbi1wYXRjaCc7XG5pbXBvcnQgTmV3IGZyb20gJy4vbmV3Lm1vZGVsJztcblxuZnVuY3Rpb24gcmVzcG9uZFdpdGhSZXN1bHQocmVzLCBzdGF0dXNDb2RlKSB7XG4gIHN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlIHx8IDIwMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKGVudGl0eSkge1xuICAgIGlmKGVudGl0eSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoc3RhdHVzQ29kZSkuanNvbihlbnRpdHkpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGF0Y2hVcGRhdGVzKHBhdGNoZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGVudGl0eSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlZmxlY3RcbiAgICAgIGpzb25wYXRjaC5hcHBseShlbnRpdHksIHBhdGNoZXMsIC8qdmFsaWRhdGUqLyB0cnVlKTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudGl0eS5zYXZlKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUVudGl0eShyZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGVudGl0eSkge1xuICAgIGlmKGVudGl0eSkge1xuICAgICAgcmV0dXJuIGVudGl0eS5yZW1vdmUoKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzLnN0YXR1cygyMDQpLmVuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVudGl0eU5vdEZvdW5kKHJlcykge1xuICByZXR1cm4gZnVuY3Rpb24oZW50aXR5KSB7XG4gICAgaWYoIWVudGl0eSkge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLmVuZCgpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBlbnRpdHk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlcywgc3RhdHVzQ29kZSkge1xuICBzdGF0dXNDb2RlID0gc3RhdHVzQ29kZSB8fCA1MDA7XG4gIHJldHVybiBmdW5jdGlvbihlcnIpIHtcbiAgICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLnNlbmQoZXJyKTtcbiAgfTtcbn1cblxuLy8gR2V0cyBhIGxpc3Qgb2YgTmV3c1xuZXhwb3J0IGZ1bmN0aW9uIGluZGV4KHJlcSwgcmVzKSB7XG4gIHJldHVybiBOZXcuZmluZCgpLmV4ZWMoKVxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBHZXRzIGEgc2luZ2xlIE5ldyBmcm9tIHRoZSBEQlxuZXhwb3J0IGZ1bmN0aW9uIHNob3cocmVxLCByZXMpIHtcbiAgcmV0dXJuIE5ldy5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5leGVjKClcbiAgICAudGhlbihoYW5kbGVFbnRpdHlOb3RGb3VuZChyZXMpKVxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBDcmVhdGVzIGEgbmV3IE5ldyBpbiB0aGUgREJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUocmVxLCByZXMpIHtcbiAgcmV0dXJuIE5ldy5jcmVhdGUocmVxLmJvZHkpXG4gICAgLnRoZW4ocmVzcG9uZFdpdGhSZXN1bHQocmVzLCAyMDEpKVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcihyZXMpKTtcbn1cblxuLy8gVXBzZXJ0cyB0aGUgZ2l2ZW4gTmV3IGluIHRoZSBEQiBhdCB0aGUgc3BlY2lmaWVkIElEXG5leHBvcnQgZnVuY3Rpb24gdXBzZXJ0KHJlcSwgcmVzKSB7XG4gIGlmKHJlcS5ib2R5Ll9pZCkge1xuICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkocmVxLmJvZHksICdfaWQnKTtcbiAgfVxuICByZXR1cm4gTmV3LmZpbmRPbmVBbmRVcGRhdGUoe19pZDogcmVxLnBhcmFtcy5pZH0sIHJlcS5ib2R5LCB7bmV3OiB0cnVlLCB1cHNlcnQ6IHRydWUsIHNldERlZmF1bHRzT25JbnNlcnQ6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWV9KS5leGVjKClcblxuICAgIC50aGVuKHJlc3BvbmRXaXRoUmVzdWx0KHJlcykpXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKHJlcykpO1xufVxuXG4vLyBVcGRhdGVzIGFuIGV4aXN0aW5nIE5ldyBpbiB0aGUgREJcbmV4cG9ydCBmdW5jdGlvbiBwYXRjaChyZXEsIHJlcykge1xuICBpZihyZXEuYm9keS5faWQpIHtcbiAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHJlcS5ib2R5LCAnX2lkJyk7XG4gIH1cbiAgcmV0dXJuIE5ldy5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5leGVjKClcbiAgICAudGhlbihoYW5kbGVFbnRpdHlOb3RGb3VuZChyZXMpKVxuICAgIC50aGVuKHBhdGNoVXBkYXRlcyhyZXEuYm9keSkpXG4gICAgLnRoZW4ocmVzcG9uZFdpdGhSZXN1bHQocmVzKSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IocmVzKSk7XG59XG5cbi8vIERlbGV0ZXMgYSBOZXcgZnJvbSB0aGUgREJcbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95KHJlcSwgcmVzKSB7XG4gIHJldHVybiBOZXcuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkuZXhlYygpXG4gICAgLnRoZW4oaGFuZGxlRW50aXR5Tm90Rm91bmQocmVzKSlcbiAgICAudGhlbihyZW1vdmVFbnRpdHkocmVzKSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IocmVzKSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "new.controller.js"
      ],
      "names": [
        "index",
        "show",
        "create",
        "upsert",
        "patch",
        "destroy",
        "respondWithResult",
        "res",
        "statusCode",
        "entity",
        "status",
        "json",
        "patchUpdates",
        "patches",
        "apply",
        "err",
        "Promise",
        "reject",
        "save",
        "removeEntity",
        "remove",
        "then",
        "end",
        "handleEntityNotFound",
        "handleError",
        "send",
        "req",
        "find",
        "exec",
        "catch",
        "findById",
        "params",
        "id",
        "body",
        "_id",
        "Reflect",
        "deleteProperty",
        "findOneAndUpdate",
        "new",
        "setDefaultsOnInsert",
        "runValidators"
      ],
      "mappings": "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",
      "file": "new.controller.js",
      "sourceRoot": "/root/server/api/new",
      "sourcesContent": [
        "/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/news              ->  index\n * POST    /api/news              ->  create\n * GET     /api/news/:id          ->  show\n * PUT     /api/news/:id          ->  upsert\n * PATCH   /api/news/:id          ->  patch\n * DELETE  /api/news/:id          ->  destroy\n */\n\n'use strict';\n\nimport jsonpatch from 'fast-json-patch';\nimport New from './new.model';\n\nfunction respondWithResult(res, statusCode) {\n  statusCode = statusCode || 200;\n  return function(entity) {\n    if(entity) {\n      return res.status(statusCode).json(entity);\n    }\n    return null;\n  };\n}\n\nfunction patchUpdates(patches) {\n  return function(entity) {\n    try {\n      // eslint-disable-next-line prefer-reflect\n      jsonpatch.apply(entity, patches, /*validate*/ true);\n    } catch(err) {\n      return Promise.reject(err);\n    }\n\n    return entity.save();\n  };\n}\n\nfunction removeEntity(res) {\n  return function(entity) {\n    if(entity) {\n      return entity.remove()\n        .then(() => {\n          res.status(204).end();\n        });\n    }\n  };\n}\n\nfunction handleEntityNotFound(res) {\n  return function(entity) {\n    if(!entity) {\n      res.status(404).end();\n      return null;\n    }\n    return entity;\n  };\n}\n\nfunction handleError(res, statusCode) {\n  statusCode = statusCode || 500;\n  return function(err) {\n    res.status(statusCode).send(err);\n  };\n}\n\n// Gets a list of News\nexport function index(req, res) {\n  return New.find().exec()\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Gets a single New from the DB\nexport function show(req, res) {\n  return New.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Creates a new New in the DB\nexport function create(req, res) {\n  return New.create(req.body)\n    .then(respondWithResult(res, 201))\n    .catch(handleError(res));\n}\n\n// Upserts the given New in the DB at the specified ID\nexport function upsert(req, res) {\n  if(req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return New.findOneAndUpdate({_id: req.params.id}, req.body, {new: true, upsert: true, setDefaultsOnInsert: true, runValidators: true}).exec()\n\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Updates an existing New in the DB\nexport function patch(req, res) {\n  if(req.body._id) {\n    Reflect.deleteProperty(req.body, '_id');\n  }\n  return New.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(patchUpdates(req.body))\n    .then(respondWithResult(res))\n    .catch(handleError(res));\n}\n\n// Deletes a New from the DB\nexport function destroy(req, res) {\n  return New.findById(req.params.id).exec()\n    .then(handleEntityNotFound(res))\n    .then(removeEntity(res))\n    .catch(handleError(res));\n}\n"
      ]
    },
    "mtime": 1508181070053
  },
  "{\"filename\":\"/root/server/api/new/new.model.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/new\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "./new.events",
            "imported": [
              "registerEvents"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "registerEvents",
                "local": "registerEvents"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/root/server/api/new/new.model.js",
      "filenameRelative": "/root/server/api/new/new.model.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "new.model.js",
      "sourceFileName": "new.model.js",
      "sourceRoot": "/root/server/api/new",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/new",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "new.model"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _new = require('./new.events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NewSchema = new _mongoose2.default.Schema({\n  title: String,\n  description: String,\n  link: String,\n  tags: [String],\n  avatar: String,\n  thumbnail: String,\n  created: {\n    type: Date,\n    default: Date.now,\n    index: true\n  }\n});\n\n(0, _new.registerEvents)(NewSchema);\nexports.default = _mongoose2.default.model('New', NewSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy5tb2RlbC5qcyJdLCJuYW1lcyI6WyJOZXdTY2hlbWEiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImRlc2NyaXB0aW9uIiwibGluayIsInRhZ3MiLCJhdmF0YXIiLCJ0aHVtYm5haWwiLCJjcmVhdGVkIiwidHlwZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwiaW5kZXgiLCJtb2RlbCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFFQSxJQUFJQSxZQUFZLElBQUksbUJBQVNDLE1BQWIsQ0FBb0I7QUFDbENDLFNBQU9DLE1BRDJCO0FBRWxDQyxlQUFhRCxNQUZxQjtBQUdsQ0UsUUFBTUYsTUFINEI7QUFJbENHLFFBQU0sQ0FBQ0gsTUFBRCxDQUo0QjtBQUtsQ0ksVUFBUUosTUFMMEI7QUFNbENLLGFBQVdMLE1BTnVCO0FBT2xDTSxXQUFTO0FBQ1JDLFVBQU1DLElBREU7QUFFUEMsYUFBU0QsS0FBS0UsR0FGUDtBQUdQQyxXQUFPO0FBSEE7QUFQeUIsQ0FBcEIsQ0FBaEI7O0FBY0EseUJBQWVkLFNBQWY7a0JBQ2UsbUJBQVNlLEtBQVQsQ0FBZSxLQUFmLEVBQXNCZixTQUF0QixDIiwiZmlsZSI6Im5ldy5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXBpL25ldyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7cmVnaXN0ZXJFdmVudHN9IGZyb20gJy4vbmV3LmV2ZW50cyc7XG5cbnZhciBOZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgdGl0bGU6IFN0cmluZyxcbiAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgbGluazogU3RyaW5nLFxuICB0YWdzOiBbU3RyaW5nXSxcbiAgYXZhdGFyOiBTdHJpbmcsXG4gIHRodW1ibmFpbDogU3RyaW5nLFxuICBjcmVhdGVkOiB7IFxuICBcdHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgaW5kZXg6IHRydWVcbiAgfVxufSk7XG5cbnJlZ2lzdGVyRXZlbnRzKE5ld1NjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbCgnTmV3JywgTmV3U2NoZW1hKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "new.model.js"
      ],
      "names": [
        "NewSchema",
        "Schema",
        "title",
        "String",
        "description",
        "link",
        "tags",
        "avatar",
        "thumbnail",
        "created",
        "type",
        "Date",
        "default",
        "now",
        "index",
        "model"
      ],
      "mappings": "AAAA;;;;;;AAEA;;;;AACA;;;;AAEA,IAAIA,YAAY,IAAI,mBAASC,MAAb,CAAoB;AAClCC,SAAOC,MAD2B;AAElCC,eAAaD,MAFqB;AAGlCE,QAAMF,MAH4B;AAIlCG,QAAM,CAACH,MAAD,CAJ4B;AAKlCI,UAAQJ,MAL0B;AAMlCK,aAAWL,MANuB;AAOlCM,WAAS;AACRC,UAAMC,IADE;AAEPC,aAASD,KAAKE,GAFP;AAGPC,WAAO;AAHA;AAPyB,CAApB,CAAhB;;AAcA,yBAAed,SAAf;kBACe,mBAASe,KAAT,CAAe,KAAf,EAAsBf,SAAtB,C",
      "file": "new.model.js",
      "sourceRoot": "/root/server/api/new",
      "sourcesContent": [
        "'use strict';\n\nimport mongoose from 'mongoose';\nimport {registerEvents} from './new.events';\n\nvar NewSchema = new mongoose.Schema({\n  title: String,\n  description: String,\n  link: String,\n  tags: [String],\n  avatar: String,\n  thumbnail: String,\n  created: { \n  \ttype: Date,\n    default: Date.now,\n    index: true\n  }\n});\n\nregisterEvents(NewSchema);\nexport default mongoose.model('New', NewSchema);\n"
      ]
    },
    "mtime": 1508178743539
  },
  "{\"filename\":\"/root/server/api/new/new.events.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/root/server/api/new\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0:development": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "events",
            "imported": [
              "EventEmitter"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EventEmitter",
                "local": "EventEmitter"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "registerEvents"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "registerEvents",
              "exported": "registerEvents"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/root/server/api/new/new.events.js",
      "filenameRelative": "/root/server/api/new/new.events.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "new.events.js",
      "sourceFileName": "new.events.js",
      "sourceRoot": "/root/server/api/new",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/root/server/api/new",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "new.events"
    },
    "ignored": false,
    "code": "/**\n * New model events\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerEvents = undefined;\n\nvar _events = require('events');\n\nvar NewEvents = new _events.EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nNewEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(New) {\n  for (var e in events) {\n    var event = events[e];\n    New.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function (doc) {\n    NewEvents.emit(event + ':' + doc._id, doc);\n    NewEvents.emit(event, doc);\n  };\n}\n\nexports.registerEvents = registerEvents;\nexports.default = NewEvents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy5ldmVudHMuanMiXSwibmFtZXMiOlsiTmV3RXZlbnRzIiwic2V0TWF4TGlzdGVuZXJzIiwiZXZlbnRzIiwic2F2ZSIsInJlbW92ZSIsInJlZ2lzdGVyRXZlbnRzIiwiTmV3IiwiZSIsImV2ZW50IiwicG9zdCIsImVtaXRFdmVudCIsImRvYyIsImVtaXQiLCJfaWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBSUE7Ozs7Ozs7QUFFQTs7QUFDQSxJQUFJQSxZQUFZLDBCQUFoQjs7QUFFQTtBQUNBQSxVQUFVQyxlQUFWLENBQTBCLENBQTFCOztBQUVBO0FBQ0EsSUFBSUMsU0FBUztBQUNYQyxRQUFNLE1BREs7QUFFWEMsVUFBUTtBQUZHLENBQWI7O0FBS0E7QUFDQSxTQUFTQyxjQUFULENBQXdCQyxHQUF4QixFQUE2QjtBQUMzQixPQUFJLElBQUlDLENBQVIsSUFBYUwsTUFBYixFQUFxQjtBQUNuQixRQUFJTSxRQUFRTixPQUFPSyxDQUFQLENBQVo7QUFDQUQsUUFBSUcsSUFBSixDQUFTRixDQUFULEVBQVlHLFVBQVVGLEtBQVYsQ0FBWjtBQUNEO0FBQ0Y7O0FBRUQsU0FBU0UsU0FBVCxDQUFtQkYsS0FBbkIsRUFBMEI7QUFDeEIsU0FBTyxVQUFTRyxHQUFULEVBQWM7QUFDbkJYLGNBQVVZLElBQVYsQ0FBZUosUUFBUSxHQUFSLEdBQWNHLElBQUlFLEdBQWpDLEVBQXNDRixHQUF0QztBQUNBWCxjQUFVWSxJQUFWLENBQWVKLEtBQWYsRUFBc0JHLEdBQXRCO0FBQ0QsR0FIRDtBQUlEOztRQUVPTixjLEdBQUFBLGM7a0JBQ09MLFMiLCJmaWxlIjoibmV3LmV2ZW50cy5qcyIsInNvdXJjZVJvb3QiOiIvcm9vdC9zZXJ2ZXIvYXBpL25ldyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTmV3IG1vZGVsIGV2ZW50c1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gJ2V2ZW50cyc7XG52YXIgTmV3RXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4vLyBTZXQgbWF4IGV2ZW50IGxpc3RlbmVycyAoMCA9PSB1bmxpbWl0ZWQpXG5OZXdFdmVudHMuc2V0TWF4TGlzdGVuZXJzKDApO1xuXG4vLyBNb2RlbCBldmVudHNcbnZhciBldmVudHMgPSB7XG4gIHNhdmU6ICdzYXZlJyxcbiAgcmVtb3ZlOiAncmVtb3ZlJ1xufTtcblxuLy8gUmVnaXN0ZXIgdGhlIGV2ZW50IGVtaXR0ZXIgdG8gdGhlIG1vZGVsIGV2ZW50c1xuZnVuY3Rpb24gcmVnaXN0ZXJFdmVudHMoTmV3KSB7XG4gIGZvcih2YXIgZSBpbiBldmVudHMpIHtcbiAgICBsZXQgZXZlbnQgPSBldmVudHNbZV07XG4gICAgTmV3LnBvc3QoZSwgZW1pdEV2ZW50KGV2ZW50KSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbihkb2MpIHtcbiAgICBOZXdFdmVudHMuZW1pdChldmVudCArICc6JyArIGRvYy5faWQsIGRvYyk7XG4gICAgTmV3RXZlbnRzLmVtaXQoZXZlbnQsIGRvYyk7XG4gIH07XG59XG5cbmV4cG9ydCB7cmVnaXN0ZXJFdmVudHN9O1xuZXhwb3J0IGRlZmF1bHQgTmV3RXZlbnRzO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "new.events.js"
      ],
      "names": [
        "NewEvents",
        "setMaxListeners",
        "events",
        "save",
        "remove",
        "registerEvents",
        "New",
        "e",
        "event",
        "post",
        "emitEvent",
        "doc",
        "emit",
        "_id"
      ],
      "mappings": "AAAA;;;;AAIA;;;;;;;AAEA;;AACA,IAAIA,YAAY,0BAAhB;;AAEA;AACAA,UAAUC,eAAV,CAA0B,CAA1B;;AAEA;AACA,IAAIC,SAAS;AACXC,QAAM,MADK;AAEXC,UAAQ;AAFG,CAAb;;AAKA;AACA,SAASC,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,OAAI,IAAIC,CAAR,IAAaL,MAAb,EAAqB;AACnB,QAAIM,QAAQN,OAAOK,CAAP,CAAZ;AACAD,QAAIG,IAAJ,CAASF,CAAT,EAAYG,UAAUF,KAAV,CAAZ;AACD;AACF;;AAED,SAASE,SAAT,CAAmBF,KAAnB,EAA0B;AACxB,SAAO,UAASG,GAAT,EAAc;AACnBX,cAAUY,IAAV,CAAeJ,QAAQ,GAAR,GAAcG,IAAIE,GAAjC,EAAsCF,GAAtC;AACAX,cAAUY,IAAV,CAAeJ,KAAf,EAAsBG,GAAtB;AACD,GAHD;AAID;;QAEON,c,GAAAA,c;kBACOL,S",
      "file": "new.events.js",
      "sourceRoot": "/root/server/api/new",
      "sourcesContent": [
        "/**\n * New model events\n */\n\n'use strict';\n\nimport {EventEmitter} from 'events';\nvar NewEvents = new EventEmitter();\n\n// Set max event listeners (0 == unlimited)\nNewEvents.setMaxListeners(0);\n\n// Model events\nvar events = {\n  save: 'save',\n  remove: 'remove'\n};\n\n// Register the event emitter to the model events\nfunction registerEvents(New) {\n  for(var e in events) {\n    let event = events[e];\n    New.post(e, emitEvent(event));\n  }\n}\n\nfunction emitEvent(event) {\n  return function(doc) {\n    NewEvents.emit(event + ':' + doc._id, doc);\n    NewEvents.emit(event, doc);\n  };\n}\n\nexport {registerEvents};\nexport default NewEvents;\n"
      ]
    },
    "mtime": 1508176211509
  }
}